(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{472:(Ts,Re,Fi)=>{"use strict";function C(e){return"function"==typeof e}function As(e){const n=e(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Pi=As(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Or(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class $t{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(C(i))try{i()}catch(s){t=s instanceof Pi?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{f(s)}catch(d){t=t??[],d instanceof Pi?t=[...t,...d.errors]:t.push(d)}}if(t)throw new Pi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)f(t);else{if(t instanceof $t){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Or(n,t)}remove(t){const{_finalizers:n}=this;n&&Or(n,t),t instanceof $t&&t._removeParent(this)}}$t.EMPTY=(()=>{const e=new $t;return e.closed=!0,e})();const Ri=$t.EMPTY;function y(e){return e instanceof $t||e&&"closed"in e&&C(e.remove)&&C(e.add)&&C(e.unsubscribe)}function f(e){C(e)?e():e.unsubscribe()}const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},h={setTimeout(e,t,...n){const{delegate:i}=h;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=h;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function a(e){h.setTimeout(()=>{const{onUnhandledError:t}=p;if(!t)throw e;t(e)})}function u(){}const o=l("C",void 0,void 0);function l(e,t,n){return{kind:e,value:t,error:n}}let m=null;function _(e){if(p.useDeprecatedSynchronousErrorHandling){const t=!m;if(t&&(m={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:i}=m;if(m=null,n)throw i}}else e()}class b extends $t{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,y(t)&&t.add(this)):this.destination=he}static create(t,n,i){return new B(t,n,i)}next(t){this.isStopped?ue(function g(e){return l("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ue(function c(e){return l("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ue(o,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const E=Function.prototype.bind;function A(e,t){return E.call(e,t)}class F{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){z(i)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){z(i)}else z(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){z(n)}}}class B extends b{constructor(t,n,i){let r;if(super(),C(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&p.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&A(t.next,s),error:t.error&&A(t.error,s),complete:t.complete&&A(t.complete,s)}):r=t}this.destination=new F(r)}}function z(e){p.useDeprecatedSynchronousErrorHandling?function w(e){p.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=e)}(e):a(e)}function ue(e,t){const{onStoppedNotification:n}=p;n&&h.setTimeout(()=>n(e,t))}const he={closed:!0,next:u,error:function ie(e){throw e},complete:u},pe="function"==typeof Symbol&&Symbol.observable||"@@observable";function ce(e){return e}let ve=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function k(e){return e&&e instanceof b||function M(e){return e&&C(e.next)&&C(e.error)&&C(e.complete)}(e)&&y(e)}(n)?n:new B(n,i,r);return _(()=>{const{operator:d,source:v}=this;s.add(d?d.call(s,v):v?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=Ce(i))((r,s)=>{const d=new B({next:v=>{try{n(v)}catch(x){s(x),d.unsubscribe()}},error:s,complete:r});this.subscribe(d)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[pe](){return this}pipe(...n){return function xe(e){return 0===e.length?ce:1===e.length?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}(n)(this)}toPromise(n){return new(n=Ce(n))((i,r)=>{let s;this.subscribe(d=>s=d,d=>r(d),()=>i(s))})}}return e.create=t=>new e(t),e})();function Ce(e){var t;return null!==(t=e??p.Promise)&&void 0!==t?t:Promise}const L=As(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let R=(()=>{class e extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new W(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new L}next(n){_(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){_(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){_(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Ri:(this.currentObservers=null,s.push(n),new $t(()=>{this.currentObservers=null,Or(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new ve;return n.source=this,n}}return e.create=(t,n)=>new W(t,n),e})();class W extends R{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,t)}error(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==i?i:Ri}}function I(e){return t=>{if(function P(e){return C(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(e,t,n,i,r){return new H(e,t,n,i,r)}class H extends b{constructor(t,n,i,r,s,d){super(t),this.onFinalize=s,this.shouldUnsubscribe=d,this._next=n?function(v){try{n(v)}catch(x){t.error(x)}}:super._next,this._error=r?function(v){try{r(v)}catch(x){t.error(x)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(v){t.error(v)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function He(e){return this instanceof He?(this.v=e,this):new He(e)}function st(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},d("next"),d("throw"),d("return"),r[Symbol.asyncIterator]=function(){return this},r;function d(O){i[O]&&(r[O]=function(N){return new Promise(function(U,Q){s.push([O,N,U,Q])>1||v(O,N)})})}function v(O,N){try{!function x(O){O.value instanceof He?Promise.resolve(O.value.v).then(D,S):T(s[0][2],O)}(i[O](N))}catch(U){T(s[0][3],U)}}function D(O){v("next",O)}function S(O){v("throw",O)}function T(O,N){O(N),s.shift(),s.length&&v(s[0][0],s[0][1])}}function Mt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Fe(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(d){return new Promise(function(v,x){!function r(s,d,v,x){Promise.resolve(x).then(function(D){s({value:D,done:v})},d)}(v,x,(d=e[s](d)).done,d.value)})}}}const Ms=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function zc(e){return C(e?.then)}function Yc(e){return C(e[pe])}function Xc(e){return Symbol.asyncIterator&&C(e?.[Symbol.asyncIterator])}function qc(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Qc=function Iy(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Kc(e){return C(e?.[Qc])}function Zc(e){return st(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:i,done:r}=yield He(n.read());if(r)return yield He(void 0);yield yield He(i)}}finally{n.releaseLock()}})}function Jc(e){return C(e?.getReader)}function ni(e){if(e instanceof ve)return e;if(null!=e){if(Yc(e))return function Oy(e){return new ve(t=>{const n=e[pe]();if(C(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Ms(e))return function Fy(e){return new ve(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(zc(e))return function Py(e){return new ve(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,a)})}(e);if(Xc(e))return ef(e);if(Kc(e))return function Ry(e){return new ve(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Jc(e))return function ky(e){return ef(Zc(e))}(e)}throw qc(e)}function ef(e){return new ve(t=>{(function Ly(e,t){var n,i,r,s;return function J(e,t,n,i){return new(n||(n=Promise))(function(s,d){function v(S){try{D(i.next(S))}catch(T){d(T)}}function x(S){try{D(i.throw(S))}catch(T){d(T)}}function D(S){S.done?s(S.value):function r(s){return s instanceof n?s:new n(function(d){d(s)})}(S.value).then(v,x)}D((i=i.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Mt(e);!(i=yield n.next()).done;)if(t.next(i.value),t.closed)return}catch(d){r={error:d}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function ii(e,t,n,i=0,r=!1){const s=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(s),!r)return s}function tf(e,t,n=1/0){return C(t)?tf((i,r)=>function q(e,t){return I((n,i)=>{let r=0;n.subscribe(j(i,s=>{i.next(e.call(t,s,r++))}))})}((s,d)=>t(i,s,r,d))(ni(e(i,r))),n):("number"==typeof t&&(n=t),I((i,r)=>function Ny(e,t,n,i,r,s,d,v){const x=[];let D=0,S=0,T=!1;const O=()=>{T&&!x.length&&!D&&t.complete()},N=Q=>D<i?U(Q):x.push(Q),U=Q=>{s&&t.next(Q),D++;let ae=!1;ni(n(Q,S++)).subscribe(j(t,se=>{r?.(se),s?N(se):t.next(se)},()=>{ae=!0},void 0,()=>{if(ae)try{for(D--;x.length&&D<i;){const se=x.shift();d?ii(t,d,()=>U(se)):U(se)}O()}catch(se){t.error(se)}}))};return e.subscribe(j(t,N,()=>{T=!0,O()})),()=>{v?.()}}(i,r,e,n)))}const nf=new ve(e=>e.complete());function ma(e){return e[e.length-1]}function rf(e,t=0){return I((n,i)=>{n.subscribe(j(i,r=>ii(i,e,()=>i.next(r),t),()=>ii(i,e,()=>i.complete(),t),r=>ii(i,e,()=>i.error(r),t)))})}function sf(e,t=0){return I((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function af(e,t){if(!e)throw new Error("Iterable cannot be null");return new ve(n=>{ii(n,t,()=>{const i=e[Symbol.asyncIterator]();ii(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function va(...e){const t=function Hy(e){return function Vy(e){return e&&C(e.schedule)}(ma(e))?e.pop():void 0}(e),n=function Gy(e,t){return"number"==typeof ma(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?ni(i[0]):function By(e=1/0){return tf(ce,e)}(n)(function qy(e,t){return t?function Xy(e,t){if(null!=e){if(Yc(e))return function Uy(e,t){return ni(e).pipe(sf(t),rf(t))}(e,t);if(Ms(e))return function $y(e,t){return new ve(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}(e,t);if(zc(e))return function Wy(e,t){return ni(e).pipe(sf(t),rf(t))}(e,t);if(Xc(e))return af(e,t);if(Kc(e))return function zy(e,t){return new ve(n=>{let i;return ii(n,t,()=>{i=e[Qc](),ii(n,t,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(d){return void n.error(d)}s?n.complete():n.next(r)},0,!0)}),()=>C(i?.return)&&i.return()})}(e,t);if(Jc(e))return function Yy(e,t){return af(Zc(e),t)}(e,t)}throw qc(e)}(e,t):ni(e)}(i,t)):nf}function ya(e,t,...n){if(!0===t)return void e();if(!1===t)return;const i=new B({next:()=>{i.unsubscribe(),e()}});return t(...n).subscribe(i)}function tt(e){for(let t in e)if(e[t]===tt)return t;throw Error("Could not find renamed property on target object.")}function _a(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function nt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(nt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function xa(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Ky=tt({__forward_ref__:tt});function Ca(e){return e.__forward_ref__=Ca,e.toString=function(){return nt(this())},e}function Oe(e){return wa(e)?e():e}function wa(e){return"function"==typeof e&&e.hasOwnProperty(Ky)&&e.__forward_ref__===Ca}class Me extends Error{constructor(t,n){super(function Is(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function Ne(e){return"string"==typeof e?e:null==e?"":String(e)}function Os(e,t){throw new Me(-201,!1)}function Kt(e,t){null==e&&function Je(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}(t,e,null,"!=")}function Ee(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Zt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Fs(e){return lf(e,Ps)||lf(e,cf)}function lf(e,t){return e.hasOwnProperty(t)?e[t]:null}function uf(e){return e&&(e.hasOwnProperty(Da)||e.hasOwnProperty(s_))?e[Da]:null}const Ps=tt({\u0275prov:tt}),Da=tt({\u0275inj:tt}),cf=tt({ngInjectableDef:tt}),s_=tt({ngInjectorDef:tt});var ke=(()=>((ke=ke||{})[ke.Default=0]="Default",ke[ke.Host=1]="Host",ke[ke.Self=2]="Self",ke[ke.SkipSelf=4]="SkipSelf",ke[ke.Optional=8]="Optional",ke))();let ba;function an(e){const t=ba;return ba=e,t}function ff(e,t,n){const i=Fs(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&ke.Optional?null:void 0!==t?t:void Os(nt(e))}function ri(e){return{toString:e}.toString()}var mn=(()=>((mn=mn||{})[mn.OnPush=0]="OnPush",mn[mn.Default=1]="Default",mn))(),In=(()=>{return(e=In||(In={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",In;var e})();const it=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Li={},Qe=[],Rs=tt({\u0275cmp:tt}),Sa=tt({\u0275dir:tt}),Ea=tt({\u0275pipe:tt}),df=tt({\u0275mod:tt}),Gn=tt({\u0275fac:tt}),Fr=tt({__NG_ELEMENT_ID__:tt});let a_=0;function ks(e){return ri(()=>{const n=!0===e.standalone,i={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Qe,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||In.Emulated,id:"c"+a_++,styles:e.styles||Qe,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.dependencies,d=e.features;return r.inputs=pf(e.inputs,i),r.outputs=pf(e.outputs),d&&d.forEach(v=>v(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(hf).filter(gf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(jt).filter(gf):null,r})}function hf(e){return et(e)||Bt(e)}function gf(e){return null!==e}function ln(e){return ri(()=>({type:e.type,bootstrap:e.bootstrap||Qe,declarations:e.declarations||Qe,imports:e.imports||Qe,exports:e.exports||Qe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function pf(e,t){if(null==e)return Li;const n={};for(const i in e)if(e.hasOwnProperty(i)){let r=e[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,t&&(t[r]=s)}return n}const De=ks;function et(e){return e[Rs]||null}function Bt(e){return e[Sa]||null}function jt(e){return e[Ea]||null}function Yt(e){return Array.isArray(e)&&"object"==typeof e[1]}function yn(e){return Array.isArray(e)&&!0===e[1]}function Ma(e){return 0!=(8&e.flags)}function js(e){return 2==(2&e.flags)}function Vs(e){return 1==(1&e.flags)}function _n(e){return null!==e.template}function h_(e){return 0!=(256&e[2])}function Ci(e,t){return e.hasOwnProperty(Gn)?e[Gn]:null}class m_{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function wi(){return yf}function yf(e){return e.type.prototype.ngOnChanges&&(e.setInput=y_),v_}function v_(){const e=xf(this),t=e?.current;if(t){const n=e.previous;if(n===Li)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function y_(e,t,n,i){const r=xf(e)||function __(e,t){return e[_f]=t}(e,{previous:Li,current:null}),s=r.current||(r.current={}),d=r.previous,v=this.declaredInputs[n],x=d[v];s[v]=new m_(x&&x.currentValue,t,d===Li),e[i]=t}wi.ngInherit=!0;const _f="__ngSimpleChanges__";function xf(e){return e[_f]||null}function xt(e){for(;Array.isArray(e);)e=e[0];return e}function Hs(e,t){return xt(t[e])}function fn(e,t){return xt(t[e.index])}function Ra(e,t){return e.data[t]}function tn(e,t){const n=t[e];return Yt(n)?n:n[0]}function Gs(e){return 64==(64&e[2])}function si(e,t){return null==t?null:e[t]}function Cf(e){e[18]=0}function ka(e,t){e[5]+=t;let n=e,i=e[3];for(;null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}const Le={lFrame:Of(null),bindingsEnabled:!0};function Df(){return Le.bindingsEnabled}function re(){return Le.lFrame.lView}function Ye(){return Le.lFrame.tView}function Hi(e){return Le.lFrame.contextLView=e,e[8]}function Gi(e){return Le.lFrame.contextLView=null,e}function bt(){let e=bf();for(;null!==e&&64===e.type;)e=e.parent;return e}function bf(){return Le.lFrame.currentTNode}function On(e,t){const n=Le.lFrame;n.currentTNode=e,n.isParent=t}function La(){return Le.lFrame.isParent}function Ui(){return Le.lFrame.bindingIndex++}function R_(e,t){const n=Le.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ba(t)}function Ba(e){Le.lFrame.currentDirectiveIndex=e}function Af(){return Le.lFrame.currentQueryIndex}function Va(e){Le.lFrame.currentQueryIndex=e}function L_(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Mf(e,t,n){if(n&ke.SkipSelf){let r=t,s=e;for(;!(r=r.parent,null!==r||n&ke.Host||(r=L_(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,e=s}const i=Le.lFrame=If();return i.currentTNode=t,i.lView=e,!0}function Ha(e){const t=If(),n=e[1];Le.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function If(){const e=Le.lFrame,t=null===e?null:e.child;return null===t?Of(e):t}function Of(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Ff(){const e=Le.lFrame;return Le.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Pf=Ff;function Ga(){const e=Ff();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ht(){return Le.lFrame.selectedIndex}function oi(e){Le.lFrame.selectedIndex=e}function Us(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:v,ngAfterViewInit:x,ngAfterViewChecked:D,ngOnDestroy:S}=s;d&&(e.contentHooks||(e.contentHooks=[])).push(-n,d),v&&((e.contentHooks||(e.contentHooks=[])).push(n,v),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,v)),x&&(e.viewHooks||(e.viewHooks=[])).push(-n,x),D&&((e.viewHooks||(e.viewHooks=[])).push(n,D),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,D)),null!=S&&(e.destroyHooks||(e.destroyHooks=[])).push(n,S)}}function Ws(e,t,n){Rf(e,t,3,n)}function $s(e,t,n,i){(3&e[2])===n&&Rf(e,t,n,i)}function Ua(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Rf(e,t,n,i){const s=i??-1,d=t.length-1;let v=0;for(let x=void 0!==i?65535&e[18]:0;x<d;x++)if("number"==typeof t[x+1]){if(v=t[x],null!=i&&v>=i)break}else t[x]<0&&(e[18]+=65536),(v<s||-1==s)&&($_(e,n,t,x),e[18]=(4294901760&e[18])+x+2),x++}function $_(e,t,n,i){const r=n[i]<0,s=n[i+1],v=e[r?-n[i]:n[i]];if(r){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(v)}finally{}}}else try{s.call(v)}finally{}}class jr{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function zs(e,t,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],d=n[i++],v=n[i++];e.setAttribute(t,d,v,s)}else{const s=r,d=n[++i];Lf(s)?e.setProperty(t,s,d):e.setAttribute(t,s,d),i++}}return i}function kf(e){return 3===e||4===e||6===e}function Lf(e){return 64===e.charCodeAt(0)}function Ys(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){const r=t[i];"number"==typeof r?n=r:0===n||Nf(e,n,r,null,-1===n||2===n?t[++i]:null)}}return e}function Nf(e,t,n,i,r){let s=0,d=e.length;if(-1===t)d=-1;else for(;s<e.length;){const v=e[s++];if("number"==typeof v){if(v===t){d=-1;break}if(v>t){d=s-1;break}}}for(;s<e.length;){const v=e[s];if("number"==typeof v)break;if(v===n){if(null===i)return void(null!==r&&(e[s+1]=r));if(i===e[s+1])return void(e[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==d&&(e.splice(d,0,t),s=d+1),e.splice(s++,0,n),null!==i&&e.splice(s++,0,i),null!==r&&e.splice(s++,0,r)}function Bf(e){return-1!==e}function Wi(e){return 32767&e}function $i(e,t){let n=function Q_(e){return e>>16}(e),i=t;for(;n>0;)i=i[15],n--;return i}let $a=!0;function Xs(e){const t=$a;return $a=e,t}let K_=0;const Fn={};function Hr(e,t){const n=Ya(e,t);if(-1!==n)return n;const i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,za(i.data,e),za(t,null),za(i.blueprint,null));const r=qs(e,t),s=e.injectorIndex;if(Bf(r)){const d=Wi(r),v=$i(r,t),x=v[1].data;for(let D=0;D<8;D++)t[s+D]=v[d+D]|x[d+D]}return t[s+8]=r,s}function za(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ya(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function qs(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;null!==r;){if(i=Yf(r),null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function Qs(e,t,n){!function Z_(e,t,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Fr)&&(i=n[Fr]),null==i&&(i=n[Fr]=K_++);const r=255&i;t.data[e+(r>>5)]|=1<<r}(e,t,n)}function Hf(e,t,n){if(n&ke.Optional||void 0!==e)return e;Os()}function Gf(e,t,n,i){if(n&ke.Optional&&void 0===i&&(i=null),0==(n&(ke.Self|ke.Host))){const r=e[9],s=an(void 0);try{return r?r.get(t,i,n&ke.Optional):ff(t,i,n&ke.Optional)}finally{an(s)}}return Hf(i,0,n)}function Uf(e,t,n,i=ke.Default,r){if(null!==e){if(1024&t[2]){const d=function ix(e,t,n,i,r){let s=e,d=t;for(;null!==s&&null!==d&&1024&d[2]&&!(256&d[2]);){const v=Wf(s,d,n,i|ke.Self,Fn);if(v!==Fn)return v;let x=s.parent;if(!x){const D=d[21];if(D){const S=D.get(n,Fn,i);if(S!==Fn)return S}x=Yf(d),d=d[15]}s=x}return r}(e,t,n,i,Fn);if(d!==Fn)return d}const s=Wf(e,t,n,i,Fn);if(s!==Fn)return s}return Gf(t,n,i,r)}function Wf(e,t,n,i,r){const s=function tx(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Fr)?e[Fr]:void 0;return"number"==typeof t?t>=0?255&t:nx:t}(n);if("function"==typeof s){if(!Mf(t,e,i))return i&ke.Host?Hf(r,0,i):Gf(t,n,i,r);try{const d=s(i);if(null!=d||i&ke.Optional)return d;Os()}finally{Pf()}}else if("number"==typeof s){let d=null,v=Ya(e,t),x=-1,D=i&ke.Host?t[16][6]:null;for((-1===v||i&ke.SkipSelf)&&(x=-1===v?qs(e,t):t[v+8],-1!==x&&zf(i,!1)?(d=t[1],v=Wi(x),t=$i(x,t)):v=-1);-1!==v;){const S=t[1];if($f(s,v,S.data)){const T=ex(v,t,n,d,i,D);if(T!==Fn)return T}x=t[v+8],-1!==x&&zf(i,t[1].data[v+8]===D)&&$f(s,v,t)?(d=S,v=Wi(x),t=$i(x,t)):v=-1}}return r}function ex(e,t,n,i,r,s){const d=t[1],v=d.data[e+8],S=Ks(v,d,n,null==i?js(v)&&$a:i!=d&&0!=(3&v.type),r&ke.Host&&s===v);return null!==S?Gr(t,d,S,v):Fn}function Ks(e,t,n,i,r){const s=e.providerIndexes,d=t.data,v=1048575&s,x=e.directiveStart,S=s>>20,O=r?v+S:e.directiveEnd;for(let N=i?v:v+S;N<O;N++){const U=d[N];if(N<x&&n===U||N>=x&&U.type===n)return N}if(r){const N=d[x];if(N&&_n(N)&&N.type===n)return x}return null}function Gr(e,t,n,i){let r=e[n];const s=t.data;if(function z_(e){return e instanceof jr}(r)){const d=r;d.resolving&&function Zy(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Me(-200,`Circular dependency in DI detected for ${e}${n}`)}(function qe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ne(e)}(s[n]));const v=Xs(d.canSeeViewProviders);d.resolving=!0;const x=d.injectImpl?an(d.injectImpl):null;Mf(e,i,ke.Default);try{r=e[n]=d.factory(void 0,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&function W_(e,t,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(i){const d=yf(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,d),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,d)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==x&&an(x),Xs(v),d.resolving=!1,Pf()}}return r}function $f(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function zf(e,t){return!(e&ke.Self||e&ke.Host&&t)}class zi{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return Uf(this._tNode,this._lView,t,i,n)}}function nx(){return new zi(bt(),re())}function Ue(e){return ri(()=>{const t=e.prototype.constructor,n=t[Gn]||Xa(t),i=Object.prototype;let r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){const s=r[Gn]||Xa(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Xa(e){return wa(e)?()=>{const t=Xa(Oe(e));return t&&t()}:Ci(e)}function Yf(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const Xi="__parameters__";function Qi(e,t,n){return ri(()=>{const i=function Qa(e){return function(...n){if(e){const i=e(...n);for(const r in i)this[r]=i[r]}}}(t);function r(...s){if(this instanceof r)return i.apply(this,s),this;const d=new r(...s);return v.annotation=d,v;function v(x,D,S){const T=x.hasOwnProperty(Xi)?x[Xi]:Object.defineProperty(x,Xi,{value:[]})[Xi];for(;T.length<=S;)T.push(null);return(T[S]=T[S]||[]).push(d),x}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}class Ve{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function nn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?(t===e&&(t=e.slice(0,n)),nn(i,t)):t!==e&&t.push(i)}return t}function $n(e,t){e.forEach(n=>Array.isArray(n)?$n(n,t):t(n))}function qf(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Zs(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function rn(e,t,n){let i=Ki(e,t);return i>=0?e[1|i]=n:(i=~i,function ax(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(e,i,t,n)),i}function Za(e,t){const n=Ki(e,t);if(n>=0)return e[1|n]}function Ki(e,t){return function Zf(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){const s=i+(r-i>>1),d=e[s<<n];if(t===d)return s<<n;d>t?r=s:i=s+1}return~(r<<n)}(e,t,1)}const zr={},el="__NG_DI_FLAG__",eo="ngTempTokenPath",px=/\n/gm,Jf="__source";let Yr;function Zi(e){const t=Yr;return Yr=e,t}function vx(e,t=ke.Default){if(void 0===Yr)throw new Me(-203,!1);return null===Yr?ff(e,void 0,t):Yr.get(e,t&ke.Optional?null:void 0,t)}function be(e,t=ke.Default){return(function o_(){return ba}()||vx)(Oe(e),t)}function to(e,t=ke.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),be(e,t)}function tl(e){const t=[];for(let n=0;n<e.length;n++){const i=Oe(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Me(900,!1);let r,s=ke.Default;for(let d=0;d<i.length;d++){const v=i[d],x=yx(v);"number"==typeof x?-1===x?r=v.token:s|=x:r=v}t.push(be(r,s))}else t.push(be(i))}return t}function Xr(e,t){return e[el]=t,e.prototype[el]=t,e}function yx(e){return e[el]}const no=Xr(Qi("Optional"),8),io=Xr(Qi("SkipSelf"),4);let il,oo;function er(e){return function rl(){if(void 0===oo&&(oo=null,it.trustedTypes))try{oo=it.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return oo}()?.createHTML(e)||e}class Di{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Px extends Di{getTypeName(){return"HTML"}}class Rx extends Di{getTypeName(){return"Style"}}class kx extends Di{getTypeName(){return"Script"}}class Lx extends Di{getTypeName(){return"URL"}}class Nx extends Di{getTypeName(){return"ResourceURL"}}function sn(e){return e instanceof Di?e.changingThisBreaksApplicationSecurity:e}function Pn(e,t){const n=function Bx(e){return e instanceof Di&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}class Wx{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(er(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}}class $x{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);const i=this.inertDocument.createElement("body");n.appendChild(i)}}getInertBodyElement(t){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=er(t),n;const i=this.inertDocument.createElement("body");return i.innerHTML=er(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(t){const n=t.attributes;for(let r=n.length-1;0<r;r--){const d=n.item(r).name;("xmlns:ns1"===d||0===d.indexOf("ns1:"))&&t.removeAttribute(d)}let i=t.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const Yx=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function lo(e){return(e=String(e)).match(Yx)?e:"unsafe:"+e}function zn(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Kr(...e){const t={};for(const n of e)for(const i in n)n.hasOwnProperty(i)&&(t[i]=!0);return t}const hd=zn("area,br,col,hr,img,wbr"),gd=zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pd=zn("rp,rt"),ol=Kr(hd,Kr(gd,zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kr(pd,zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kr(pd,gd)),al=zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),md=Kr(al,zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xx=zn("script,style,template");class qx{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!ol.hasOwnProperty(n))return this.sanitizedSomething=!0,!Xx.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=t.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),d=s.name,v=d.toLowerCase();if(!md.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let x=s.value;al[v]&&(x=lo(x)),this.buf.push(" ",d,'="',vd(x),'"')}return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();ol.hasOwnProperty(n)&&!hd.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(vd(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const Qx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kx=/([^\#-~ |!])/g;function vd(e){return e.replace(/&/g,"&amp;").replace(Qx,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Kx,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let uo;function yd(e,t){let n=null;try{uo=uo||function dd(e){const t=new $x(e);return function zx(){try{return!!(new window.DOMParser).parseFromString(er(""),"text/html")}catch{return!1}}()?new Wx(t):t}(e);let i=t?String(t):"";n=uo.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=uo.getInertBodyElement(i)}while(i!==s);return er((new qx).sanitizeChildren(ll(n)||n))}finally{if(n){const i=ll(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function ll(e){return"content"in e&&function Zx(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var rt=(()=>((rt=rt||{})[rt.NONE=0]="NONE",rt[rt.HTML=1]="HTML",rt[rt.STYLE=2]="STYLE",rt[rt.SCRIPT=3]="SCRIPT",rt[rt.URL=4]="URL",rt[rt.RESOURCE_URL=5]="RESOURCE_URL",rt))();const Cd=new Ve("ENVIRONMENT_INITIALIZER"),wd=new Ve("INJECTOR",-1),Dd=new Ve("INJECTOR_DEF_TYPES");class bd{get(t,n=zr){if(n===zr){const i=new Error(`NullInjectorError: No provider for ${nt(t)}!`);throw i.name="NullInjectorError",i}return n}}function oC(...e){return{\u0275providers:Sd(0,e)}}function Sd(e,...t){const n=[],i=new Set;let r;return $n(t,s=>{const d=s;ul(d,n,[],i)&&(r||(r=[]),r.push(d))}),void 0!==r&&Ed(r,n),n}function Ed(e,t){for(let n=0;n<e.length;n++){const{providers:r}=e[n];$n(r,s=>{t.push(s)})}}function ul(e,t,n,i){if(!(e=Oe(e)))return!1;let r=null,s=uf(e);const d=!s&&et(e);if(s||d){if(d&&!d.standalone)return!1;r=e}else{const x=e.ngModule;if(s=uf(x),!s)return!1;r=x}const v=i.has(r);if(d){if(v)return!1;if(i.add(r),d.dependencies){const x="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const D of x)ul(D,t,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!v){let D;i.add(r);try{$n(s.imports,S=>{ul(S,t,n,i)&&(D||(D=[]),D.push(S))})}finally{}void 0!==D&&Ed(D,t)}if(!v){const D=Ci(r)||(()=>new r);t.push({provide:r,useFactory:D,deps:Qe},{provide:Dd,useValue:r,multi:!0},{provide:Cd,useValue:()=>be(r),multi:!0})}const x=s.providers;null==x||v||$n(x,S=>{t.push(S)})}}return r!==e&&void 0!==e.providers}const aC=tt({provide:String,useValue:tt});function cl(e){return null!==e&&"object"==typeof e&&aC in e}function bi(e){return"function"==typeof e}const fl=new Ve("Set Injector scope."),co={},uC={};let dl;function fo(){return void 0===dl&&(dl=new bd),dl}class tr{}class Md extends tr{constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gl(t,d=>this.processProvider(d)),this.records.set(wd,nr(void 0,this)),r.has("environment")&&this.records.set(tr,nr(void 0,this));const s=this.records.get(fl);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Dd.multi,Qe,ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Zi(this),i=an(void 0);try{return t()}finally{Zi(n),an(i)}}get(t,n=zr,i=ke.Default){this.assertNotDestroyed();const r=Zi(this),s=an(void 0);try{if(!(i&ke.SkipSelf)){let v=this.records.get(t);if(void 0===v){const x=function gC(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ve}(t)&&Fs(t);v=x&&this.injectableDefInScope(x)?nr(hl(t),co):null,this.records.set(t,v)}if(null!=v)return this.hydrate(t,v)}return(i&ke.Self?fo():this.parent).get(t,n=i&ke.Optional&&n===zr?null:n)}catch(d){if("NullInjectorError"===d.name){if((d[eo]=d[eo]||[]).unshift(nt(t)),r)throw d;return function _x(e,t,n,i){const r=e[eo];throw t[Jf]&&r.unshift(t[Jf]),e.message=function xx(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let r=nt(t);if(Array.isArray(t))r=t.map(nt).join(" -> ");else if("object"==typeof t){let s=[];for(let d in t)if(t.hasOwnProperty(d)){let v=t[d];s.push(d+":"+("string"==typeof v?JSON.stringify(v):nt(v)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(px,"\n  ")}`}("\n"+e.message,r,n,i),e.ngTokenPath=r,e[eo]=null,e}(d,t,"R3InjectorError",this.source)}throw d}finally{an(s),Zi(r)}}resolveInjectorInitializers(){const t=Zi(this),n=an(void 0);try{const i=this.get(Cd.multi,Qe,ke.Self);for(const r of i)r()}finally{Zi(t),an(n)}}toString(){const t=[],n=this.records;for(const i of n.keys())t.push(nt(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(t){let n=bi(t=Oe(t))?t:Oe(t&&t.provide);const i=function fC(e){return cl(e)?nr(void 0,e.useValue):nr(function Id(e,t,n){let i;if(bi(e)){const r=Oe(e);return Ci(r)||hl(r)}if(cl(e))i=()=>Oe(e.useValue);else if(function Ad(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...tl(e.deps||[]));else if(function Td(e){return!(!e||!e.useExisting)}(e))i=()=>be(Oe(e.useExisting));else{const r=Oe(e&&(e.useClass||e.provide));if(!function dC(e){return!!e.deps}(e))return Ci(r)||hl(r);i=()=>new r(...tl(e.deps))}return i}(e),co)}(t);if(bi(t)||!0!==t.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=nr(void 0,co,!0),r.factory=()=>tl(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){return n.value===co&&(n.value=uC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function hC(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Oe(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function hl(e){const t=Fs(e),n=null!==t?t.factory:Ci(e);if(null!==n)return n;if(e instanceof Ve)throw new Me(204,!1);if(e instanceof Function)return function cC(e){const t=e.length;if(t>0)throw function $r(e,t){const n=[];for(let i=0;i<e;i++)n.push(t);return n}(t,"?"),new Me(204,!1);const n=function i_(e){const t=e&&(e[Ps]||e[cf]);if(t){const n=function r_(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Me(204,!1)}function nr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function pC(e){return!!e.\u0275providers}function gl(e,t){for(const n of e)Array.isArray(n)?gl(n,t):pC(n)?gl(n.\u0275providers,t):t(n)}class Od{}class yC{resolveComponentFactory(t){throw function vC(e){const t=Error(`No component factory found for ${nt(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let ho=(()=>{class e{}return e.NULL=new yC,e})();function _C(){return ir(bt(),re())}function ir(e,t){return new Ke(fn(e,t))}let Ke=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=_C,e})();function xC(e){return e instanceof Ke?e.nativeElement:e}class Pd{}let go=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function CC(){const e=re(),n=tn(bt().index,e);return(Yt(n)?n:e)[11]}(),e})(),wC=(()=>{class e{}return e.\u0275prov=Ee({token:e,providedIn:"root",factory:()=>null}),e})();class po{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const DC=new po("14.2.3"),pl={};function xl(e){return e.ngOriginalError}class rr{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&xl(t);for(;n&&xl(n);)n=xl(n);return n||null}}const Cl=new Map;let kC=0;const Dl="__ngContext__";function Rt(e,t){Yt(t)?(e[Dl]=t[20],function NC(e){Cl.set(e[20],e)}(t)):e[Dl]=t}var Xt=(()=>((Xt=Xt||{})[Xt.Important=1]="Important",Xt[Xt.DashCase=2]="DashCase",Xt))();function Sl(e,t){return undefined(e,t)}function es(e){const t=e[3];return yn(t)?t[3]:t}function El(e){return Yd(e[13])}function Tl(e){return Yd(e[4])}function Yd(e){for(;null!==e&&!yn(e);)e=e[4];return e}function or(e,t,n,i,r){if(null!=i){let s,d=!1;yn(i)?s=i:Yt(i)&&(d=!0,i=i[0]);const v=xt(i);0===e&&null!==n?null==r?Jd(t,n,v):Si(t,n,v,r||null,!0):1===e&&null!==n?Si(t,n,v,r||null,!0):2===e?function oh(e,t,n){const i=mo(e,t);i&&function cw(e,t,n,i){e.removeChild(t,n,i)}(e,i,t,n)}(t,v,d):3===e&&t.destroyNode(v),null!=s&&function hw(e,t,n,i,r){const s=n[7];s!==xt(n)&&or(t,e,i,s,r);for(let v=10;v<n.length;v++){const x=n[v];ts(x[1],x,e,t,i,s)}}(t,e,s,n,r)}}function Ml(e,t,n){return e.createElement(t,n)}function qd(e,t){const n=e[9],i=n.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,ka(r,-1)),n.splice(i,1)}function Il(e,t){if(e.length<=10)return;const n=10+t,i=e[n];if(i){const r=i[17];null!==r&&r!==e&&qd(r,i),t>0&&(e[n-1][4]=i[4]);const s=Zs(e,10+t);!function nw(e,t){ts(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(i[1],i);const d=s[19];null!==d&&d.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function Qd(e,t){if(!(128&t[2])){const n=t[11];n.destroyNode&&ts(e,t,n,3,null,null),function sw(e){let t=e[13];if(!t)return Ol(e[1],e);for(;t;){let n=null;if(Yt(t))n=t[13];else{const i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)Yt(t)&&Ol(t[1],t),t=t[3];null===t&&(t=e),Yt(t)&&Ol(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ol(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function uw(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let i=0;i<n.length;i+=2){const r=t[n[i]];if(!(r instanceof jr)){const s=n[i+1];if(Array.isArray(s))for(let d=0;d<s.length;d+=2){const v=r[s[d]],x=s[d+1];try{x.call(v)}finally{}}else try{s.call(r)}finally{}}}}(e,t),function lw(e,t){const n=e.cleanup,i=t[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const d=n[s+1],v="function"==typeof d?d(t):xt(t[d]),x=i[r=n[s+2]],D=n[s+3];"boolean"==typeof D?v.removeEventListener(n[s],x,D):D>=0?i[r=D]():i[r=-D].unsubscribe(),s+=2}else{const d=i[r=n[s+1]];n[s].call(d)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();t[7]=null}}(e,t),1===t[1].type&&t[11].destroy();const n=t[17];if(null!==n&&yn(t[3])){n!==t[3]&&qd(n,t);const i=t[19];null!==i&&i.detachView(e)}!function BC(e){Cl.delete(e[20])}(t)}}function Kd(e,t,n){return function Zd(e,t,n){let i=t;for(;null!==i&&40&i.type;)i=(t=i).parent;if(null===i)return n[0];if(2&i.flags){const r=e.data[i.directiveStart].encapsulation;if(r===In.None||r===In.Emulated)return null}return fn(i,n)}(e,t.parent,n)}function Si(e,t,n,i,r){e.insertBefore(t,n,i,r)}function Jd(e,t,n){e.appendChild(t,n)}function eh(e,t,n,i,r){null!==i?Si(e,t,n,i,r):Jd(e,t,n)}function mo(e,t){return e.parentNode(t)}let ih=function nh(e,t,n){return 40&e.type?fn(e,n):null};function vo(e,t,n,i){const r=Kd(e,i,t),s=t[11],v=function th(e,t,n){return ih(e,t,n)}(i.parent||t[6],i,t);if(null!=r)if(Array.isArray(n))for(let x=0;x<n.length;x++)eh(s,r,n[x],v,!1);else eh(s,r,n,v,!1)}function yo(e,t){if(null!==t){const n=t.type;if(3&n)return fn(t,e);if(4&n)return Pl(-1,e[t.index]);if(8&n){const i=t.child;if(null!==i)return yo(e,i);{const r=e[t.index];return yn(r)?Pl(-1,r):xt(r)}}if(32&n)return Sl(t,e)()||xt(e[t.index]);{const i=sh(e,t);return null!==i?Array.isArray(i)?i[0]:yo(es(e[16]),i):yo(e,t.next)}}return null}function sh(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Pl(e,t){const n=10+e+1;if(n<t.length){const i=t[n],r=i[1].firstChild;if(null!==r)return yo(i,r)}return t[7]}function Rl(e,t,n,i,r,s,d){for(;null!=n;){const v=i[n.index],x=n.type;if(d&&0===t&&(v&&Rt(xt(v),i),n.flags|=4),64!=(64&n.flags))if(8&x)Rl(e,t,n.child,i,r,s,!1),or(t,e,r,v,s);else if(32&x){const D=Sl(n,i);let S;for(;S=D();)or(t,e,r,S,s);or(t,e,r,v,s)}else 16&x?ah(e,t,i,n,r,s):or(t,e,r,v,s);n=d?n.projectionNext:n.next}}function ts(e,t,n,i,r,s){Rl(n,i,e.firstChild,t,r,s,!1)}function ah(e,t,n,i,r,s){const d=n[16],x=d[6].projection[i.projection];if(Array.isArray(x))for(let D=0;D<x.length;D++)or(t,e,r,x[D],s);else Rl(e,t,x,d[3],r,s,!0)}function lh(e,t,n){e.setAttribute(t,"style",n)}function kl(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function uh(e,t,n){let i=e.length;for(;;){const r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){const s=t.length;if(r+s===i||e.charCodeAt(r+s)<=32)return r}n=r+1}}const ch="ng-template";function pw(e,t,n){let i=0;for(;i<e.length;){let r=e[i++];if(n&&"class"===r){if(r=e[i],-1!==uh(r.toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function fh(e){return 4===e.type&&e.value!==ch}function mw(e,t,n){return t===(4!==e.type||n?e.value:ch)}function vw(e,t,n){let i=4;const r=e.attrs||[],s=function xw(e){for(let t=0;t<e.length;t++)if(kf(e[t]))return t;return e.length}(r);let d=!1;for(let v=0;v<t.length;v++){const x=t[v];if("number"!=typeof x){if(!d)if(4&i){if(i=2|1&i,""!==x&&!mw(e,x,n)||""===x&&1===t.length){if(xn(i))return!1;d=!0}}else{const D=8&i?x:t[++v];if(8&i&&null!==e.attrs){if(!pw(e.attrs,D,n)){if(xn(i))return!1;d=!0}continue}const T=yw(8&i?"class":x,r,fh(e),n);if(-1===T){if(xn(i))return!1;d=!0;continue}if(""!==D){let O;O=T>s?"":r[T+1].toLowerCase();const N=8&i?O:null;if(N&&-1!==uh(N,D,0)||2&i&&D!==O){if(xn(i))return!1;d=!0}}}}else{if(!d&&!xn(i)&&!xn(x))return!1;if(d&&xn(x))continue;d=!1,i=x|1&i}}return xn(i)||d}function xn(e){return 0==(1&e)}function yw(e,t,n,i){if(null===t)return-1;let r=0;if(i||!n){let s=!1;for(;r<t.length;){const d=t[r];if(d===e)return r;if(3===d||6===d)s=!0;else{if(1===d||2===d){let v=t[++r];for(;"string"==typeof v;)v=t[++r];continue}if(4===d)break;if(0===d){r+=4;continue}}r+=s?1:2}return-1}return function Cw(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function dh(e,t,n=!1){for(let i=0;i<t.length;i++)if(vw(e,t[i],n))return!0;return!1}function hh(e,t){return e?":not("+t.trim()+")":t}function Dw(e){let t=e[0],n=1,i=2,r="",s=!1;for(;n<e.length;){let d=e[n];if("string"==typeof d)if(2&i){const v=e[++n];r+="["+d+(v.length>0?'="'+v+'"':"")+"]"}else 8&i?r+="."+d:4&i&&(r+=" "+d);else""!==r&&!xn(d)&&(t+=hh(s,r),r=""),i=d,s=s||!xn(i);n++}return""!==r&&(t+=hh(s,r)),t}const Be={};function ns(e){gh(Ye(),re(),Ht()+e,!1)}function gh(e,t,n,i){if(!i)if(3==(3&t[2])){const s=e.preOrderCheckHooks;null!==s&&Ws(t,s,n)}else{const s=e.preOrderHooks;null!==s&&$s(t,s,0,n)}oi(n)}function yh(e,t=null,n=null,i){const r=_h(e,t,n,i);return r.resolveInjectorInitializers(),r}function _h(e,t=null,n=null,i,r=new Set){const s=[n||Qe,oC(e)];return i=i||("object"==typeof e?void 0:nt(e)),new Md(s,t||fo(),i||null,r)}let li=(()=>{class e{static create(n,i){if(Array.isArray(n))return yh({name:""},i,n,"");{const r=n.name??"";return yh({name:r},n.parent,n.providers,r)}}}return e.THROW_IF_NOT_FOUND=zr,e.NULL=new bd,e.\u0275prov=Ee({token:e,providedIn:"any",factory:()=>be(wd)}),e.__NG_ELEMENT_ID__=-1,e})();function G(e,t=ke.Default){const n=re();return null===n?be(e,t):Uf(bt(),n,Oe(e),t)}function xo(e,t){return e<<17|t<<2}function Cn(e){return e>>17&32767}function Vl(e){return 2|e}function Xn(e){return(131068&e)>>2}function Hl(e,t){return-131069&e|t<<2}function Gl(e){return 1|e}function Lh(e,t){const n=e.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const d=e.data[s];Va(r),d.contentQueries(2,t[s],s)}}}function Do(e,t,n,i,r,s,d,v,x,D,S){const T=t.blueprint.slice();return T[0]=r,T[2]=76|i,(null!==S||e&&1024&e[2])&&(T[2]|=1024),Cf(T),T[3]=T[15]=e,T[8]=n,T[10]=d||e&&e[10],T[11]=v||e&&e[11],T[12]=x||e&&e[12]||null,T[9]=D||e&&e[9]||null,T[6]=s,T[20]=function LC(){return kC++}(),T[21]=S,T[16]=2==t.type?e[16]:T,T}function lr(e,t,n,i,r){let s=e.data[t];if(null===s)s=function Ql(e,t,n,i,r){const s=bf(),d=La(),x=e.data[t]=function a0(e,t,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?s:s&&s.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=x),null!==s&&(d?null==s.child&&null!==x.parent&&(s.child=x):null===s.next&&(s.next=x)),x}(e,t,n,i,r),function P_(){return Le.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const d=function Br(){const e=Le.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===d?-1:d.injectorIndex}return On(s,!0),s}function ur(e,t,n,i){if(0===n)return-1;const r=t.length;for(let s=0;s<n;s++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function Kl(e,t,n){Ha(t);try{const i=e.viewQuery;null!==i&&su(1,i,n);const r=e.template;null!==r&&Nh(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Lh(e,t),e.staticViewQueries&&su(2,e.viewQuery,n);const s=e.components;null!==s&&function r0(e,t){for(let n=0;n<t.length;n++)D0(e,t[n])}(t,s)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[2]&=-5,Ga()}}function bo(e,t,n,i){const r=t[2];if(128!=(128&r)){Ha(t);try{Cf(t),function Ef(e){return Le.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Nh(e,t,n,2,i);const d=3==(3&r);if(d){const D=e.preOrderCheckHooks;null!==D&&Ws(t,D,null)}else{const D=e.preOrderHooks;null!==D&&$s(t,D,0,null),Ua(t,0)}if(function C0(e){for(let t=El(e);null!==t;t=Tl(t)){if(!t[2])continue;const n=t[9];for(let i=0;i<n.length;i++){const r=n[i],s=r[3];0==(512&r[2])&&ka(s,1),r[2]|=512}}}(t),function x0(e){for(let t=El(e);null!==t;t=Tl(t))for(let n=10;n<t.length;n++){const i=t[n],r=i[1];Gs(i)&&bo(r,i,r.template,i[8])}}(t),null!==e.contentQueries&&Lh(e,t),d){const D=e.contentCheckHooks;null!==D&&Ws(t,D)}else{const D=e.contentHooks;null!==D&&$s(t,D,1),Ua(t,1)}!function t0(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)oi(~r);else{const s=r,d=n[++i],v=n[++i];R_(d,s),v(2,t[s])}}}finally{oi(-1)}}(e,t);const v=e.components;null!==v&&function n0(e,t){for(let n=0;n<t.length;n++)w0(e,t[n])}(t,v);const x=e.viewQuery;if(null!==x&&su(2,x,i),d){const D=e.viewCheckHooks;null!==D&&Ws(t,D)}else{const D=e.viewHooks;null!==D&&$s(t,D,2),Ua(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,ka(t[3],-1))}finally{Ga()}}}function Nh(e,t,n,i,r){const s=Ht(),d=2&i;try{oi(-1),d&&t.length>22&&gh(e,t,22,!1),n(i,r)}finally{oi(s)}}function Zl(e,t,n){!Df()||(function d0(e,t,n,i){const r=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Hr(n,t),Rt(i,t);const d=n.initialInputs;for(let v=r;v<s;v++){const x=e.data[v],D=_n(x);D&&v0(t,n,x);const S=Gr(t,e,v,n);Rt(S,t),null!==d&&y0(0,v-r,S,x,0,d),D&&(tn(n.index,t)[8]=S)}}(e,t,n,fn(n,t)),128==(128&n.flags)&&function h0(e,t,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,d=function k_(){return Le.lFrame.currentDirectiveIndex}();try{oi(s);for(let v=i;v<r;v++){const x=e.data[v],D=t[v];Ba(v),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&$h(x,D)}}finally{oi(-1),Ba(d)}}(e,t,n))}function Jl(e,t,n=fn){const i=t.localNames;if(null!==i){let r=t.index+1;for(let s=0;s<i.length;s+=2){const d=i[s+1],v=-1===d?n(t,e):e[d];e[r++]=v}}}function jh(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=eu(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function eu(e,t,n,i,r,s,d,v,x,D){const S=22+i,T=S+r,O=function s0(e,t){const n=[];for(let i=0;i<t;i++)n.push(i<e?null:Be);return n}(S,T),N="function"==typeof D?D():D;return O[1]={type:e,blueprint:O,template:n,queries:null,viewQuery:v,declTNode:t,data:O.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:T,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:x,consts:N,incompleteFirstPass:!1}}function Vh(e,t,n,i){const r=Qh(t);null===n?r.push(i):(r.push(n),e.firstCreatePass&&Kh(e).push(i,r.length-1))}function Hh(e,t,n){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function Gh(e,t){const i=t.directiveEnd,r=e.data,s=t.attrs,d=[];let v=null,x=null;for(let D=t.directiveStart;D<i;D++){const S=r[D],T=S.inputs,O=null===s||fh(t)?null:_0(T,s);d.push(O),v=Hh(T,D,v),x=Hh(S.outputs,D,x)}null!==v&&(v.hasOwnProperty("class")&&(t.flags|=16),v.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=d,t.inputs=v,t.outputs=x}function Uh(e,t){const n=tn(t,e);16&n[2]||(n[2]|=32)}function tu(e,t,n,i){let r=!1;if(Df()){const s=function g0(e,t,n){const i=e.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const d=i[s];dh(n,d.selectors,!1)&&(r||(r=[]),Qs(Hr(n,t),e,d.type),_n(d)?(zh(e,n),r.unshift(d)):r.push(d))}return r}(e,t,n),d=null===i?null:{"":-1};if(null!==s){r=!0,Yh(n,e.data.length,s.length);for(let S=0;S<s.length;S++){const T=s[S];T.providersResolver&&T.providersResolver(T)}let v=!1,x=!1,D=ur(e,t,s.length,null);for(let S=0;S<s.length;S++){const T=s[S];n.mergedAttrs=Ys(n.mergedAttrs,T.hostAttrs),Xh(e,n,t,D,T),m0(D,T,d),null!==T.contentQueries&&(n.flags|=8),(null!==T.hostBindings||null!==T.hostAttrs||0!==T.hostVars)&&(n.flags|=128);const O=T.type.prototype;!v&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),v=!0),!x&&(O.ngOnChanges||O.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),x=!0),D++}Gh(e,n)}d&&function p0(e,t,n){if(t){const i=e.localNames=[];for(let r=0;r<t.length;r+=2){const s=n[t[r+1]];if(null==s)throw new Me(-301,!1);i.push(t[r],s)}}}(n,i,d)}return n.mergedAttrs=Ys(n.mergedAttrs,n.attrs),r}function Wh(e,t,n,i,r,s){const d=s.hostBindings;if(d){let v=e.hostBindingOpCodes;null===v&&(v=e.hostBindingOpCodes=[]);const x=~t.index;(function f0(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(v)!=x&&v.push(x),v.push(i,r,d)}}function $h(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function zh(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function m0(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;_n(t)&&(n[""]=e)}}function Yh(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Xh(e,t,n,i,r){e.data[i]=r;const s=r.factory||(r.factory=Ci(r.type)),d=new jr(s,_n(r),G);e.blueprint[i]=d,n[i]=d,Wh(e,t,0,i,ur(e,n,r.hostVars,Be),r)}function v0(e,t,n){const i=fn(t,e),r=jh(n),s=e[10],d=So(e,Do(e,r,null,n.onPush?32:16,i,t,s,s.createRenderer(i,n),null,null,null));e[t.index]=d}function y0(e,t,n,i,r,s){const d=s[t];if(null!==d){const v=i.setInput;for(let x=0;x<d.length;){const D=d[x++],S=d[x++],T=d[x++];null!==v?i.setInput(n,T,D,S):n[S]=T}}}function _0(e,t){let n=null,i=0;for(;i<t.length;){const r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function qh(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function w0(e,t){const n=tn(t,e);if(Gs(n)){const i=n[1];48&n[2]?bo(i,n,i.template,n[8]):n[5]>0&&iu(n)}}function iu(e){for(let i=El(e);null!==i;i=Tl(i))for(let r=10;r<i.length;r++){const s=i[r];if(Gs(s))if(512&s[2]){const d=s[1];bo(d,s,d.template,s[8])}else s[5]>0&&iu(s)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=tn(n[i],e);Gs(r)&&r[5]>0&&iu(r)}}function D0(e,t){const n=tn(t,e),i=n[1];(function b0(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(i,n),Kl(i,n,n[8])}function So(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ru(e){for(;e;){e[2]|=32;const t=es(e);if(h_(e)&&!t)return e;e=t}return null}function Eo(e,t,n,i=!0){const r=t[10];r.begin&&r.begin();try{bo(e,t,e.template,n)}catch(d){throw i&&Jh(t,d),d}finally{r.end&&r.end()}}function su(e,t,n){Va(0),t(e,n)}function Qh(e){return e[7]||(e[7]=[])}function Kh(e){return e.cleanup||(e.cleanup=[])}function Jh(e,t){const n=e[9],i=n?n.get(rr,null):null;i&&i.handleError(t)}function ou(e,t,n,i,r){for(let s=0;s<n.length;){const d=n[s++],v=n[s++],x=t[d],D=e.data[d];null!==D.setInput?D.setInput(x,r,i,v):x[v]=r}}function To(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,s=0;if(null!==t)for(let d=0;d<t.length;d++){const v=t[d];"number"==typeof v?s=v:1==s?r=xa(r,v):2==s&&(i=xa(i,v+": "+t[++d]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function Ao(e,t,n,i,r=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&i.push(xt(s)),yn(s))for(let v=10;v<s.length;v++){const x=s[v],D=x[1].firstChild;null!==D&&Ao(x[1],x,D,i)}const d=n.type;if(8&d)Ao(e,t,n.child,i);else if(32&d){const v=Sl(n,t);let x;for(;x=v();)i.push(x)}else if(16&d){const v=sh(t,n);if(Array.isArray(v))i.push(...v);else{const x=es(t[16]);Ao(x[1],x,v,i,!0)}}n=r?n.projectionNext:n.next}return i}class is{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return Ao(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(yn(t)){const n=t[8],i=n?n.indexOf(this):-1;i>-1&&(Il(t,i),Zs(n,i))}this._attachedToViewContainer=!1}Qd(this._lView[1],this._lView)}onDestroy(t){Vh(this._lView[1],this._lView,null,t)}markForCheck(){ru(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Eo(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rw(e,t){ts(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=t}}class S0 extends is{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Eo(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class au extends ho{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=et(t);return new rs(n,this.ngModule)}}function eg(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class T0{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){const r=this.injector.get(t,pl,i);return r!==pl||n===pl?r:this.parentInjector.get(t,n,i)}}class rs extends Od{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function bw(e){return e.map(Dw).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return eg(this.componentDef.inputs)}get outputs(){return eg(this.componentDef.outputs)}create(t,n,i,r){let s=(r=r||this.ngModule)instanceof tr?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const d=s?new T0(t,s):t,v=d.get(Pd,null);if(null===v)throw new Me(407,!1);const x=d.get(wC,null),D=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",T=i?function o0(e,t,n){return e.selectRootElement(t,n===In.ShadowDom)}(D,i,this.componentDef.encapsulation):Ml(v.createRenderer(null,this.componentDef),S,function E0(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(S)),O=this.componentDef.onPush?288:272,N=eu(0,null,null,1,0,null,null,null,null,null),U=Do(null,N,null,O,null,null,v,D,x,d,null);let Q,ae;Ha(U);try{const se=function I0(e,t,n,i,r,s){const d=n[1];n[22]=e;const x=lr(d,22,2,"#host",null),D=x.mergedAttrs=t.hostAttrs;null!==D&&(To(x,D,!0),null!==e&&(zs(r,e,D),null!==x.classes&&kl(r,e,x.classes),null!==x.styles&&lh(r,e,x.styles)));const S=i.createRenderer(e,t),T=Do(n,jh(t),null,t.onPush?32:16,n[22],x,i,S,s||null,null,null);return d.firstCreatePass&&(Qs(Hr(x,n),d,t.type),zh(d,x),Yh(x,n.length,1)),So(n,T),n[22]=T}(T,this.componentDef,U,v,D);if(T)if(i)zs(D,T,["ng-version",DC.full]);else{const{attrs:me,classes:ee}=function Sw(e){const t=[],n=[];let i=1,r=2;for(;i<e.length;){let s=e[i];if("string"==typeof s)2===r?""!==s&&t.push(s,e[++i]):8===r&&n.push(s);else{if(!xn(r))break;r=s}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);me&&zs(D,T,me),ee&&ee.length>0&&kl(D,T,ee.join(" "))}if(ae=Ra(N,22),void 0!==n){const me=ae.projection=[];for(let ee=0;ee<this.ngContentSelectors.length;ee++){const Te=n[ee];me.push(null!=Te?Array.from(Te):null)}}Q=function O0(e,t,n,i){const r=n[1],s=function c0(e,t,n){const i=bt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Xh(e,i,t,ur(e,t,1,null),n),Gh(e,i));const r=Gr(t,e,i.directiveStart,i);Rt(r,t);const s=fn(i,t);return s&&Rt(s,t),r}(r,n,t);if(e[8]=n[8]=s,null!==i)for(const v of i)v(s,t);if(t.contentQueries){const v=bt();t.contentQueries(1,s,v.directiveStart)}const d=bt();return!r.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(oi(d.index),Wh(n[1],d,0,d.directiveStart,d.directiveEnd,t),$h(t,s)),s}(se,this.componentDef,U,[F0]),Kl(N,U,null)}finally{Ga()}return new M0(this.componentType,Q,ir(ae,U),U,ae)}}class M0 extends class mC{}{constructor(t,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new S0(r),this.componentType=t}setInput(t,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[t])){const s=this._rootLView;ou(s[1],s,r,t,n),Uh(s,this._tNode.index)}}get injector(){return new zi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function F0(){const e=bt();Us(re()[1],e)}function Pe(e){let t=function tg(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const i=[e];for(;t;){let r;if(_n(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Me(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);const d=e;d.inputs=lu(e.inputs),d.declaredInputs=lu(e.declaredInputs),d.outputs=lu(e.outputs);const v=r.hostBindings;v&&L0(e,v);const x=r.viewQuery,D=r.contentQueries;if(x&&R0(e,x),D&&k0(e,D),_a(e.inputs,r.inputs),_a(e.declaredInputs,r.declaredInputs),_a(e.outputs,r.outputs),_n(r)&&r.data.animation){const S=e.data;S.animation=(S.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let d=0;d<s.length;d++){const v=s[d];v&&v.ngInherit&&v(e),v===Pe&&(n=!1)}}t=Object.getPrototypeOf(t)}!function P0(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){const r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=Ys(r.hostAttrs,n=Ys(n,r.hostAttrs))}}(i)}function lu(e){return e===Li?{}:e===Qe?[]:e}function R0(e,t){const n=e.viewQuery;e.viewQuery=n?(i,r)=>{t(i,r),n(i,r)}:t}function k0(e,t){const n=e.contentQueries;e.contentQueries=n?(i,r,s)=>{t(i,r,s),n(i,r,s)}:t}function L0(e,t){const n=e.hostBindings;e.hostBindings=n?(i,r)=>{t(i,r),n(i,r)}:t}let Mo=null;function Ei(){if(!Mo){const e=it.Symbol;if(e&&e.iterator)Mo=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Mo=i)}}}return Mo}function uu(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function kt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function cu(e,t,n,i,r,s,d,v){const x=re(),D=Ye(),S=e+22,T=D.firstCreatePass?function W0(e,t,n,i,r,s,d,v,x){const D=t.consts,S=lr(t,e,4,d||null,si(D,v));tu(t,n,S,si(D,x)),Us(t,S);const T=S.tViews=eu(2,S,i,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,D);return null!==t.queries&&(t.queries.template(t,S),T.queries=t.queries.embeddedTView(S)),S}(S,D,x,t,n,i,r,s,d):D.data[S];On(T,!1);const O=x[11].createComment("");vo(D,x,O,T),Rt(O,x),So(x,x[S]=qh(O,x,O,T)),Vs(T)&&Zl(D,x,T),null!=d&&Jl(x,T,v)}function fi(e,t,n){const i=re();return kt(i,Ui(),t)&&function on(e,t,n,i,r,s,d,v){const x=fn(t,n);let S,D=t.inputs;!v&&null!=D&&(S=D[i])?(ou(e,n,S,i,r),js(t)&&Uh(n,t.index)):3&t.type&&(i=function l0(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=d?d(r,t.value||"",i):r,s.setProperty(x,i,r))}(Ye(),function pt(){const e=Le.lFrame;return Ra(e.tView,e.selectedIndex)}(),i,e,t,i[11],n,!1),fi}function fu(e,t,n,i,r){const d=r?"class":"style";ou(e,n,t.inputs[d],d,i)}function It(e,t,n,i){const r=re(),s=Ye(),d=22+e,v=r[11],x=r[d]=Ml(v,t,function U_(){return Le.lFrame.currentNamespace}()),D=s.firstCreatePass?function Y0(e,t,n,i,r,s,d){const v=t.consts,D=lr(t,e,2,r,si(v,s));return tu(t,n,D,si(v,d)),null!==D.attrs&&To(D,D.attrs,!1),null!==D.mergedAttrs&&To(D,D.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,D),D}(d,s,r,0,t,n,i):s.data[d];On(D,!0);const S=D.mergedAttrs;null!==S&&zs(v,x,S);const T=D.classes;null!==T&&kl(v,x,T);const O=D.styles;return null!==O&&lh(v,x,O),64!=(64&D.flags)&&vo(s,r,x,D),0===function T_(){return Le.lFrame.elementDepthCount}()&&Rt(x,r),function A_(){Le.lFrame.elementDepthCount++}(),Vs(D)&&(Zl(s,r,D),function Bh(e,t,n){if(Ma(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const d=e.data[s];d.contentQueries&&d.contentQueries(1,n[s],s)}}}(s,D,r)),null!==i&&Jl(r,D),It}function Ot(){let e=bt();La()?function Na(){Le.lFrame.isParent=!1}():(e=e.parent,On(e,!1));const t=e;!function M_(){Le.lFrame.elementDepthCount--}();const n=Ye();return n.firstCreatePass&&(Us(n,e),Ma(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function X_(e){return 0!=(16&e.flags)}(t)&&fu(n,t,re(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function q_(e){return 0!=(32&e.flags)}(t)&&fu(n,t,re(),t.stylesWithoutHost,!1),Ot}function gu(){return re()}function pu(e){return!!e&&"function"==typeof e.then}const q0=function gg(e){return!!e&&"function"==typeof e.subscribe};function wn(e,t,n,i){const r=re(),s=Ye(),d=bt();return function mg(e,t,n,i,r,s,d,v){const x=Vs(i),S=e.firstCreatePass&&Kh(e),T=t[8],O=Qh(t);let N=!0;if(3&i.type||v){const ae=fn(i,t),se=v?v(ae):ae,me=O.length,ee=v?Xe=>v(xt(Xe[i.index])):i.index;let Te=null;if(!v&&x&&(Te=function Q0(e,t,n,i){const r=e.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const d=r[s];if(d===n&&r[s+1]===i){const v=t[7],x=r[s+2];return v.length>x?v[x]:null}"string"==typeof d&&(s+=2)}return null}(e,t,r,i.index)),null!==Te)(Te.__ngLastListenerFn__||Te).__ngNextListenerFn__=s,Te.__ngLastListenerFn__=s,N=!1;else{s=yg(i,t,T,s,!1);const Xe=n.listen(se,r,s);O.push(s,Xe),S&&S.push(r,ee,me,me+1)}}else s=yg(i,t,T,s,!1);const U=i.outputs;let Q;if(N&&null!==U&&(Q=U[r])){const ae=Q.length;if(ae)for(let se=0;se<ae;se+=2){const ft=t[Q[se]][Q[se+1]].subscribe(s),Oi=O.length;O.push(s,ft),S&&S.push(r,i.index,Oi,-(Oi+1))}}}(s,r,r[11],d,e,t,0,i),wn}function vg(e,t,n,i){try{return!1!==n(i)}catch(r){return Jh(e,r),!1}}function yg(e,t,n,i,r){return function s(d){if(d===Function)return i;ru(2&e.flags?tn(e.index,t):t);let x=vg(t,0,i,d),D=s.__ngNextListenerFn__;for(;D;)x=vg(t,0,D,d)&&x,D=D.__ngNextListenerFn__;return r&&!1===x&&(d.preventDefault(),d.returnValue=!1),x}}function di(e=1){return function N_(e){return(Le.lFrame.contextLView=function B_(e,t){for(;e>0;)t=t[15],e--;return t}(e,Le.lFrame.contextLView))[8]}(e)}function Ag(e,t,n,i,r){const s=e[n+1],d=null===t;let v=i?Cn(s):Xn(s),x=!1;for(;0!==v&&(!1===x||d);){const S=e[v+1];nD(e[v],t)&&(x=!0,e[v+1]=i?Gl(S):Vl(S)),v=i?Cn(S):Xn(S)}x&&(e[n+1]=i?Vl(s):Gl(s))}function nD(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Ki(e,t)>=0}function vu(e,t){return function Dn(e,t,n,i){const r=re(),s=Ye(),d=function Wn(e){const t=Le.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);s.firstUpdatePass&&function Ng(e,t,n,i){const r=e.data;if(null===r[n+1]){const s=r[Ht()],d=function Lg(e,t){return t>=e.expandoStartIndex}(e,n);(function Hg(e,t){return 0!=(e.flags&(t?16:32))})(s,i)&&null===t&&!d&&(t=!1),t=function fD(e,t,n,i){const r=function ja(e){const t=Le.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=as(n=yu(null,e,t,n,i),t.attrs,i),s=null);else{const d=t.directiveStylingLast;if(-1===d||e[d]!==r)if(n=yu(r,e,t,n,i),null===s){let x=function dD(e,t,n){const i=n?t.classBindings:t.styleBindings;if(0!==Xn(i))return e[Cn(i)]}(e,t,i);void 0!==x&&Array.isArray(x)&&(x=yu(null,e,t,x[1],i),x=as(x,t.attrs,i),function hD(e,t,n,i){e[Cn(n?t.classBindings:t.styleBindings)]=i}(e,t,i,x))}else s=function gD(e,t,n){let i;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)i=as(i,e[s].hostAttrs,n);return as(i,t.attrs,n)}(e,t,i)}return void 0!==s&&(i?t.residualClasses=s:t.residualStyles=s),n}(r,s,t,i),function eD(e,t,n,i,r,s){let d=s?t.classBindings:t.styleBindings,v=Cn(d),x=Xn(d);e[i]=n;let S,D=!1;if(Array.isArray(n)){const T=n;S=T[1],(null===S||Ki(T,S)>0)&&(D=!0)}else S=n;if(r)if(0!==x){const O=Cn(e[v+1]);e[i+1]=xo(O,v),0!==O&&(e[O+1]=Hl(e[O+1],i)),e[v+1]=function $w(e,t){return 131071&e|t<<17}(e[v+1],i)}else e[i+1]=xo(v,0),0!==v&&(e[v+1]=Hl(e[v+1],i)),v=i;else e[i+1]=xo(x,0),0===v?v=i:e[x+1]=Hl(e[x+1],i),x=i;D&&(e[i+1]=Vl(e[i+1])),Ag(e,S,i,!0),Ag(e,S,i,!1),function tD(e,t,n,i,r){const s=r?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&Ki(s,t)>=0&&(n[i+1]=Gl(n[i+1]))}(t,S,e,i,s),d=xo(v,x),s?t.classBindings=d:t.styleBindings=d}(r,s,t,n,d,i)}}(s,e,d,i),t!==Be&&kt(r,d,t)&&function jg(e,t,n,i,r,s,d,v){if(!(3&t.type))return;const x=e.data,D=x[v+1];Oo(function Ah(e){return 1==(1&e)}(D)?Vg(x,t,n,r,Xn(D),d):void 0)||(Oo(s)||function Th(e){return 2==(2&e)}(D)&&(s=Vg(x,null,n,r,v,d)),function gw(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let s=-1===i.indexOf("-")?void 0:Xt.DashCase;null==r?e.removeStyle(n,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Xt.Important),e.setStyle(n,i,r,s))}}(i,d,Hs(Ht(),n),r,s))}(s,s.data[Ht()],r,r[11],e,r[d+1]=function vD(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=nt(sn(e)))),e}(t,n),i,d)}(e,t,null,!0),vu}function yu(e,t,n,i,r){let s=null;const d=n.directiveEnd;let v=n.directiveStylingLast;for(-1===v?v=n.directiveStart:v++;v<d&&(s=t[v],i=as(i,s.hostAttrs,r),s!==e);)v++;return null!==e&&(n.directiveStylingLast=v),i}function as(e,t,n){const i=n?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const d=t[s];"number"==typeof d?r=d:r===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),rn(e,d,!!n||t[++s]))}return void 0===e?null:e}function Vg(e,t,n,i,r,s){const d=null===t;let v;for(;r>0;){const x=e[r],D=Array.isArray(x),S=D?x[1]:x,T=null===S;let O=n[r+1];O===Be&&(O=T?Qe:void 0);let N=T?Za(O,i):S===i?O:void 0;if(D&&!Oo(N)&&(N=Za(x,i)),Oo(N)&&(v=N,d))return v;const U=e[r+1];r=d?Cn(U):Xn(U)}if(null!==t){let x=s?t.residualClasses:t.residualStyles;null!=x&&(v=Za(x,i))}return v}function Oo(e){return void 0!==e}function Sn(e,t=""){const n=re(),i=Ye(),r=e+22,s=i.firstCreatePass?lr(i,r,1,t,null):i.data[r],d=n[r]=function Al(e,t){return e.createText(t)}(n[11],t);vo(i,n,d,s),On(s,!1)}function _u(e){return xu("",e,""),_u}function xu(e,t,n){const i=re(),r=function fr(e,t,n,i){return kt(e,Ui(),n)?t+Ne(n)+i:Be}(i,e,t,n);return r!==Be&&function qn(e,t,n){const i=Hs(t,e);!function Xd(e,t,n){e.setValue(t,n)}(e[11],i,n)}(i,Ht(),r),xu}const Cr="en-US";let up=Cr;class wr{}class kp extends wr{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new au(this);const i=function Jt(e,t){const n=e[df]||null;if(!n&&!0===t)throw new Error(`Type ${nt(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function Yn(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=_h(t,n,[{provide:wr,useValue:this},{provide:ho,useValue:this.componentFactoryResolver}],nt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Tu extends class Nb{}{constructor(t){super(),this.moduleType=t}create(t){return new kp(this.moduleType,t)}}function Mu(e){return t=>{setTimeout(e,void 0,t)}}const le=class hS extends R{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,i){let r=t,s=n||(()=>null),d=i;if(t&&"object"==typeof t){const x=t;r=x.next?.bind(x),s=x.error?.bind(x),d=x.complete?.bind(x)}this.__isAsync&&(s=Mu(s),r&&(r=Mu(r)),d&&(d=Mu(d)));const v=super.subscribe({next:r,error:s,complete:d});return t instanceof $t&&t.add(v),v}};function gS(){return this._results[Ei()]()}class Iu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Ei(),i=Iu.prototype;i[n]||(i[n]=gS)}get changes(){return this._changes||(this._changes=new le)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const i=this;i.dirty=!1;const r=nn(t);(this._changesDetected=!function sx(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Qn=(()=>{class e{}return e.__NG_ELEMENT_ID__=vS,e})();const pS=Qn,mS=class extends pS{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(t,n){const i=this._declarationTContainer.tViews,r=Do(this._declarationLView,i,t,16,null,i.declTNode,null,null,null,null,n||null);r[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(r[19]=d.createEmbeddedView(i)),Kl(i,r,t),new is(r)}};function vS(){return Lo(bt(),re())}function Lo(e,t){return 4&e.type?new mS(t,e,ir(e,t)):null}let Bn=(()=>{class e{}return e.__NG_ELEMENT_ID__=yS,e})();function yS(){return Qp(bt(),re())}const _S=Bn,Xp=class extends _S{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return ir(this._hostTNode,this._hostLView)}get injector(){return new zi(this._hostTNode,this._hostLView)}get parentInjector(){const t=qs(this._hostTNode,this._hostLView);if(Bf(t)){const n=$i(t,this._hostLView),i=Wi(t);return new zi(n[1].data[i+8],n)}return new zi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=qp(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const d=t.createEmbeddedView(n||{},s);return this.insert(d,r),d}createComponent(t,n,i,r,s){const d=t&&!function Wr(e){return"function"==typeof e}(t);let v;if(d)v=n;else{const T=n||{};v=T.index,i=T.injector,r=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const x=d?t:new rs(et(t)),D=i||this.parentInjector;if(!s&&null==x.ngModule){const O=(d?D:this.parentInjector).get(tr,null);O&&(s=O)}const S=x.create(D,r,void 0,s);return this.insert(S.hostView,v),S}insert(t,n){const i=t._lView,r=i[1];if(function E_(e){return yn(e[3])}(i)){const S=this.indexOf(t);if(-1!==S)this.detach(S);else{const T=i[3],O=new Xp(T,T[6],T[3]);O.detach(O.indexOf(t))}}const s=this._adjustIndex(n),d=this._lContainer;!function ow(e,t,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=t),i<s-10?(t[4]=n[r],qf(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;const d=t[17];null!==d&&n!==d&&function aw(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(d,t);const v=t[19];null!==v&&v.insertView(e),t[2]|=64}(r,i,d,s);const v=Pl(s,d),x=i[11],D=mo(x,d[7]);return null!==D&&function iw(e,t,n,i,r,s){i[0]=r,i[6]=t,ts(e,i,n,1,r,s)}(r,d[6],x,i,D,v),t.attachToViewContainerRef(),qf(Ou(d),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=qp(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),i=Il(this._lContainer,n);i&&(Zs(Ou(this._lContainer),n),Qd(i[1],i))}detach(t){const n=this._adjustIndex(t,-1),i=Il(this._lContainer,n);return i&&null!=Zs(Ou(this._lContainer),n)?new is(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function qp(e){return e[8]}function Ou(e){return e[8]||(e[8]=[])}function Qp(e,t){let n;const i=t[e.index];if(yn(i))n=i;else{let r;if(8&e.type)r=xt(i);else{const s=t[11];r=s.createComment("");const d=fn(e,t);Si(s,mo(s,d),r,function fw(e,t){return e.nextSibling(t)}(s,d),!1)}t[e.index]=n=qh(i,t,r,e),So(t,n)}return new Xp(n,e,t)}class Fu{constructor(t){this.queryList=t,this.matches=null}clone(){return new Fu(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const i=null!==t.contentQueries?t.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const d=n.getByIndex(s);r.push(this.queries[d.indexInDeclarationView].clone())}return new Pu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==tm(t,n).matches&&this.queries[n].setDirty()}}class Kp{constructor(t,n,i=null){this.predicate=t,this.flags=n,this.read=i}}class Ru{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(t,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new Ru(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ku{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new ku(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=t.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(t,n,wS(n,s)),this.matchTNodeWithReadOption(t,n,Ks(n,t,s,!1,!1))}else i===Qn?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Ks(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ke||r===Bn||r===Qn&&4&n.type)this.addMatch(n.index,-2);else{const s=Ks(n,t,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function wS(e,t){const n=e.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1];return null}function bS(e,t,n,i){return-1===n?function DS(e,t){return 11&e.type?ir(e,t):4&e.type?Lo(e,t):null}(t,e):-2===n?function SS(e,t,n){return n===Ke?ir(t,e):n===Qn?Lo(t,e):n===Bn?Qp(t,e):void 0}(e,t,i):Gr(e,e[1],n,t)}function Zp(e,t,n,i){const r=t[19].queries[i];if(null===r.matches){const s=e.data,d=n.matches,v=[];for(let x=0;x<d.length;x+=2){const D=d[x];v.push(D<0?null:bS(t,s[D],d[x+1],n.metadata.read))}r.matches=v}return r.matches}function Lu(e,t,n,i){const r=e.queries.getByIndex(n),s=r.matches;if(null!==s){const d=Zp(e,t,r,n);for(let v=0;v<s.length;v+=2){const x=s[v];if(x>0)i.push(d[v/2]);else{const D=s[v+1],S=t[-x];for(let T=10;T<S.length;T++){const O=S[T];O[17]===O[3]&&Lu(O[1],O,D,i)}if(null!==S[9]){const T=S[9];for(let O=0;O<T.length;O++){const N=T[O];Lu(N[1],N,D,i)}}}}}return i}function No(e){const t=re(),n=Ye(),i=Af();Va(i+1);const r=tm(n,i);if(e.dirty&&function S_(e){return 4==(4&e[2])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)e.reset([]);else{const s=r.crossesNgTemplate?Lu(n,t,i,[]):Zp(n,t,r,i);e.reset(s,xC),e.notifyOnChanges()}return!0}return!1}function Bo(e,t,n){const i=Ye();i.firstCreatePass&&(function em(e,t,n){null===e.queries&&(e.queries=new Ru),e.queries.track(new ku(t,n))}(i,new Kp(e,t,n),-1),2==(2&t)&&(i.staticViewQueries=!0)),function Jp(e,t,n){const i=new Iu(4==(4&n));Vh(e,t,i,i.destroy),null===t[19]&&(t[19]=new Pu),t[19].queries.push(new Fu(i))}(i,re(),t)}function jo(){return function TS(e,t){return e[19].queries[t].queryList}(re(),Af())}function tm(e,t){return e.queries.getByIndex(t)}function Ho(...e){}const xm=new Ve("Application Initializer");let Go=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Ho,this.reject=Ho,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(pu(s))n.push(s);else if(q0(s)){const d=new Promise((v,x)=>{s.subscribe({complete:v,error:x})});n.push(d)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(be(xm,8))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ms=new Ve("AppId",{providedIn:"root",factory:function Cm(){return`${Hu()}${Hu()}${Hu()}`}});function Hu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wm=new Ve("Platform Initializer"),jn=new Ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Dm=new Ve("appBootstrapListener"),Kn=new Ve("LocaleId",{providedIn:"root",factory:()=>to(Kn,ke.Optional|ke.SkipSelf)||function qS(){return typeof $localize<"u"&&$localize.locale||Cr}()}),eE=(()=>Promise.resolve(0))();function Gu(e){typeof Zone>"u"?eE.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ct{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new le(!1),this.onMicrotaskEmpty=new le(!1),this.onStable=new le(!1),this.onError=new le(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function tE(){let e=it.requestAnimationFrame,t=it.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function rE(e){const t=()=>{!function iE(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(it,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Wu(e),e.isCheckStableRunning=!0,Uu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Wu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,d,v)=>{try{return Em(e),n.invokeTask(r,s,d,v)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Tm(e)}},onInvoke:(n,i,r,s,d,v,x)=>{try{return Em(e),n.invoke(r,s,d,v,x)}finally{e.shouldCoalesceRunChangeDetection&&t(),Tm(e)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Wu(e),Uu(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ct.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(Ct.isInAngularZone())throw new Me(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){const s=this._inner,d=s.scheduleEventTask("NgZoneEvent: "+r,t,nE,Ho,Ho);try{return s.runTask(d,n,i)}finally{s.cancelTask(d)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}}const nE={};function Uu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Wu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Em(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Tm(e){e._nesting--,Uu(e)}class sE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new le,this.onMicrotaskEmpty=new le,this.onStable=new le,this.onError=new le}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}}const Am=new Ve(""),Uo=new Ve("");let Yu,$u=(()=>{class e{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Yu||(function oE(e){Yu=e}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ct.assertNotInAngularZone(),Gu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gu(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==s),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}}return e.\u0275fac=function(n){return new(n||e)(be(Ct),be(zu),be(Uo))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})(),zu=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Yu?.findTestabilityInTree(this,n,i)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),hi=null;const Mm=new Ve("AllowMultipleToken"),Xu=new Ve("PlatformDestroyListeners");function Om(e,t,n=[]){const i=`Platform: ${t}`,r=new Ve(i);return(s=[])=>{let d=qu();if(!d||d.injector.get(Mm,!1)){const v=[...n,...s,{provide:r,useValue:!0}];e?e(v):function uE(e){if(hi&&!hi.get(Mm,!1))throw new Me(400,!1);hi=e;const t=e.get(Pm);(function Im(e){const t=e.get(wm,null);t&&t.forEach(n=>n())})(e)}(function Fm(e=[],t){return li.create({name:t,providers:[{provide:fl,useValue:"platform"},{provide:Xu,useValue:new Set([()=>hi=null])},...e]})}(v,i))}return function fE(e){const t=qu();if(!t)throw new Me(401,!1);return t}()}}function qu(){return hi?.get(Pm)??null}let Pm=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function km(e,t){let n;return n="noop"===e?new sE:("zone.js"===e?void 0:e)||new Ct(t),n}(i?.ngZone,function Rm(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:Ct,useValue:r}];return r.run(()=>{const d=li.create({providers:s,parent:this.injector,name:n.moduleType.name}),v=n.create(d),x=v.injector.get(rr,null);if(!x)throw new Me(402,!1);return r.runOutsideAngular(()=>{const D=r.onError.subscribe({next:S=>{x.handleError(S)}});v.onDestroy(()=>{Wo(this._modules,v),D.unsubscribe()})}),function Lm(e,t,n){try{const i=n();return pu(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(x,r,()=>{const D=v.injector.get(Go);return D.runInitializers(),D.donePromise.then(()=>(function cp(e){Kt(e,"Expected localeId to be defined"),"string"==typeof e&&(up=e.toLowerCase().replace(/_/g,"-"))}(v.injector.get(Kn,Cr)||Cr),this._moduleDoBootstrap(v),v))})})}bootstrapModule(n,i=[]){const r=Nm({},i);return function aE(e,t,n){const i=new Tu(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(n){const i=n.injector.get(Qu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new Me(403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(Xu,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(be(li))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function Nm(e,t){return Array.isArray(t)?t.reduce(Nm,e):{...e,...t}}let Qu=(()=>{class e{constructor(n,i,r){this._zone=n,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new ve(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),d=new ve(v=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Ct.assertNotInAngularZone(),Gu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const D=this._zone.onUnstable.subscribe(()=>{Ct.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{x.unsubscribe(),D.unsubscribe()}});this.isStable=va(s,d.pipe(function Qy(e={}){const{connector:t=(()=>new R),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return s=>{let d,v,x,D=0,S=!1,T=!1;const O=()=>{v?.unsubscribe(),v=void 0},N=()=>{O(),d=x=void 0,S=T=!1},U=()=>{const Q=d;N(),Q?.unsubscribe()};return I((Q,ae)=>{D++,!T&&!S&&O();const se=x=x??t();ae.add(()=>{D--,0===D&&!T&&!S&&(v=ya(U,r))}),se.subscribe(ae),!d&&D>0&&(d=new B({next:me=>se.next(me),error:me=>{T=!0,O(),v=ya(N,n,me),se.error(me)},complete:()=>{S=!0,O(),v=ya(N,i),se.complete()}}),ni(Q).subscribe(d))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof Od;if(!this._injector.get(Go).done)throw!r&&function Pr(e){const t=et(e)||Bt(e)||jt(e);return null!==t&&t.standalone}(n),new Me(405,false);let d;d=r?n:this._injector.get(ho).resolveComponentFactory(n),this.componentTypes.push(d.componentType);const v=function lE(e){return e.isBoundToModule}(d)?void 0:this._injector.get(wr),D=d.create(li.NULL,[],i||d.selector,v),S=D.location.nativeElement,T=D.injector.get(Am,null);return T?.registerApplication(S),D.onDestroy(()=>{this.detachView(D.hostView),Wo(this.components,D),T?.unregisterApplication(S)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Wo(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Dm,[]).concat(this._bootstrapListeners).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Wo(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Me(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(be(Ct),be(tr),be(rr))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Wo(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ym{constructor(){}supports(t){return t instanceof Map||uu(t)}create(){return new bE}}class bE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||uu(t)))throw new Me(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const i=t._prev;return n._next=t,n._prev=i,t._prev=n,i&&(i._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,n);const s=r._prev,d=r._next;return s&&(s._next=d),d&&(d._prev=s),r._next=null,r._prev=null,r}const i=new SE(t);return this._records.set(t,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(i=>n(t[i],i))}}class SE{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qm(){return new gi([new Ym])}let gi=(()=>{class e{constructor(n){this.factories=n}static create(n,i){if(i){const r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||qm()),deps:[[e,new io,new no]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(i)return i;throw new Me(901,!1)}}return e.\u0275prov=Ee({token:e,providedIn:"root",factory:qm}),e})();const AE=Om(null,"core",[]);let ME=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(be(Qu))},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({}),e})(),Yo=null;function ys(){return Yo}const Lt=new Ve("DocumentToken");let lv=(()=>{class e{constructor(n,i){this._viewContainer=n,this._context=new wT,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){uv("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){uv("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}}return e.\u0275fac=function(n){return new(n||e)(G(Bn),G(Qn))},e.\u0275dir=De({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class wT{constructor(){this.$implicit=null,this.ngIf=null}}function uv(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${nt(t)}'.`)}let hc=(()=>{class e{constructor(n,i,r){this._ngEl=n,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,i){const[r,s]=n.split("."),d=-1===r.indexOf("-")?void 0:Xt.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,d):this._renderer.removeStyle(this._ngEl.nativeElement,r,d)}_applyChanges(n){n.forEachRemovedItem(i=>this._setStyle(i.key,null)),n.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),n.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return e.\u0275fac=function(n){return new(n||e)(G(Ke),G(gi),G(go))},e.\u0275dir=De({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),mc=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({}),e})();const dv="browser";function Sr(e){return e===dv}function Er(e){return"server"===e}class _c extends class mA extends class FE{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function OE(e){Yo||(Yo=e)}(new _c)}onAndCancel(t,n,i){return t.addEventListener(n,i,!1),()=>{t.removeEventListener(n,i,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function vA(){return ws=ws||document.querySelector("base"),ws?ws.getAttribute("href"):null}();return null==n?null:function yA(e){ra=ra||document.createElement("a"),ra.setAttribute("href",e);const t=ra.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function vT(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let ra,ws=null;const vv=new Ve("TRANSITION_ID"),xA=[{provide:xm,useFactory:function _A(e,t,n){return()=>{n.get(Go).donePromise.then(()=>{const i=ys(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[vv,Lt,li],multi:!0}];let wA=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const sa=new Ve("EventManagerPlugins");let oa=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>r.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const d=r[s];if(d.supports(n))return this._eventNameToPlugin.set(n,d),d}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(be(sa),be(Ct))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();class yv{constructor(t){this._doc=t}addGlobalEventListener(t,n,i){const r=ys().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let _v=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})(),Ds=(()=>{class e extends _v{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,r){n.forEach(s=>{const d=this._doc.createElement("style");d.textContent=s,r.push(i.appendChild(d))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(xv),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(n,r,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(xv))}}return e.\u0275fac=function(n){return new(n||e)(be(Lt))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();function xv(e){ys().remove(e)}const xc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cc=/%COMP%/g;function aa(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?aa(e,r,n):(r=r.replace(Cc,e),n.push(r))}return n}function Dv(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let wc=(()=>{class e{constructor(n,i,r){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Dc(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case In.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new AA(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(n),r}case 1:case In.ShadowDom:return new MA(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const r=aa(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(be(oa),be(Ds),be(ms))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();class Dc{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(xc[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(Sv(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(Sv(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;const s=xc[r];s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){const r=xc[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(Xt.DashCase|Xt.Important)?t.style.setProperty(n,i,r&Xt.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Xt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t[n]=i}setValue(t,n){t.nodeValue=n}listen(t,n,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,Dv(i)):this.eventManager.addEventListener(t,n,Dv(i))}}function Sv(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class AA extends Dc{constructor(t,n,i,r){super(t),this.component=i;const s=aa(r+"-"+i.id,i.styles,[]);n.addStyles(s),this.contentAttr=function SA(e){return"_ngcontent-%COMP%".replace(Cc,e)}(r+"-"+i.id),this.hostAttr=function EA(e){return"_nghost-%COMP%".replace(Cc,e)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}}class MA extends Dc{constructor(t,n,i,r){super(t),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=aa(r.id,r.styles,[]);for(let d=0;d<s.length;d++){const v=document.createElement("style");v.textContent=s[d],this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let IA=(()=>{class e extends yv{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return e.\u0275fac=function(n){return new(n||e)(be(Lt))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const Ev=["alt","control","meta","shift"],OA={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FA={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let PA=(()=>{class e extends yv{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,i,r){const s=e.parseEventName(i),d=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ys().onAndCancel(n,s.domEventName,d))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=e._normalizeKey(i.pop());let d="",v=i.indexOf("code");if(v>-1&&(i.splice(v,1),d="code."),Ev.forEach(D=>{const S=i.indexOf(D);S>-1&&(i.splice(S,1),d+=D+".")}),d+=s,0!=i.length||0===s.length)return null;const x={};return x.domEventName=r,x.fullKey=d,x}static matchEventFullKeyCode(n,i){let r=OA[n.key]||n.key,s="";return i.indexOf("code.")>-1&&(r=n.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Ev.forEach(d=>{d!==r&&(0,FA[d])(n)&&(s+=d+".")}),s+=r,s===i)}static eventCallback(n,i,r){return s=>{e.matchEventFullKeyCode(s,n)&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(be(Lt))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac}),e})();const Av=[{provide:jn,useValue:dv},{provide:wm,useValue:function RA(){_c.makeCurrent()},multi:!0},{provide:Lt,useFactory:function LA(){return function Ix(e){il=e}(document),document},deps:[]}],NA=Om(AE,"browser",Av),Mv=new Ve(""),Iv=[{provide:Uo,useClass:class CA{addToWindow(t){it.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},it.getAllAngularTestabilities=()=>t.getAllTestabilities(),it.getAllAngularRootElements=()=>t.getAllRootElements(),it.frameworkStabilizers||(it.frameworkStabilizers=[]),it.frameworkStabilizers.push(i=>{const r=it.getAllAngularTestabilities();let s=r.length,d=!1;const v=function(x){d=d||x,s--,0==s&&i(d)};r.forEach(function(x){x.whenStable(v)})})}findTestabilityInTree(t,n,i){return null==n?null:t.getTestability(n)??(i?ys().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Am,useClass:$u,deps:[Ct,zu,Uo]},{provide:$u,useClass:$u,deps:[Ct,zu,Uo]}],Ov=[{provide:fl,useValue:"root"},{provide:rr,useFactory:function kA(){return new rr},deps:[]},{provide:sa,useClass:IA,multi:!0,deps:[Lt,Ct,jn]},{provide:sa,useClass:PA,multi:!0,deps:[Lt]},{provide:wc,useClass:wc,deps:[oa,Ds,ms]},{provide:Pd,useExisting:wc},{provide:_v,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[Lt]},{provide:oa,useClass:oa,deps:[sa,Ct]},{provide:class ZT{},useClass:wA,deps:[]},[]];let BA=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:ms,useValue:n.appId},{provide:vv,useExisting:ms},xA]}}}return e.\u0275fac=function(n){return new(n||e)(be(Mv,12))},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({providers:[...Ov,...Iv],imports:[mc,ME]}),e})();typeof window<"u"&&window;let Rv=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ee({token:e,factory:function(n){let i=null;return i=n?new(n||e):be(kv),i},providedIn:"root"}),e})(),kv=(()=>{class e extends Rv{constructor(n){super(),this._doc=n}sanitize(n,i){if(null==i)return null;switch(n){case rt.NONE:return i;case rt.HTML:return Pn(i,"HTML")?sn(i):yd(this._doc,String(i)).toString();case rt.STYLE:return Pn(i,"Style")?sn(i):i;case rt.SCRIPT:if(Pn(i,"Script"))return sn(i);throw new Error("unsafe value used in a script context");case rt.URL:return Pn(i,"URL")?sn(i):lo(String(i));case rt.RESOURCE_URL:if(Pn(i,"ResourceURL"))return sn(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${n} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(n){return function jx(e){return new Px(e)}(n)}bypassSecurityTrustStyle(n){return function Vx(e){return new Rx(e)}(n)}bypassSecurityTrustScript(n){return function Hx(e){return new kx(e)}(n)}bypassSecurityTrustUrl(n){return function Gx(e){return new Lx(e)}(n)}bypassSecurityTrustResourceUrl(n){return function Ux(e){return new Nx(e)}(n)}}return e.\u0275fac=function(n){return new(n||e)(be(Lt))},e.\u0275prov=Ee({token:e,factory:function(n){let i=null;return i=n?new n:function YA(e){return new kv(e.get(Lt))}(be(li)),i},providedIn:"root"}),e})();class XA extends R{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}function Lv(e){for(let t in e){let n=e[t]??"";switch(t){case"display":e.display="flex"===n?["-webkit-flex","flex"]:"inline-flex"===n?["-webkit-inline-flex","inline-flex"]:n;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":e["-webkit-"+t]=n;break;case"flex-direction":e["-webkit-flex-direction"]=n,e["flex-direction"]=n;break;case"order":e.order=e["-webkit-"+t]=isNaN(+n)?"0":n}}return e}const Ec="inline",la=["row","column","row-reverse","column-reverse"];function Nv(e){let[t,n,i]=Bv(e);return function QA(e,t=null,n=!1){return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":t||null}}(t,n,i)}function Bv(e){e=e?.toLowerCase()??"";let[t,n,i]=e.split(" ");return la.find(r=>r===t)||(t=la[0]),n===Ec&&(n=i!==Ec?i:"",i=Ec),[t,qA(n),!!i]}function bs(e){let[t]=Bv(e);return t.indexOf("row")>-1}function qA(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}function ei(e,...t){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(let n of t)if(null!=n)for(let i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e}function Tc(e,t){return I((n,i)=>{let r=0;n.subscribe(j(i,s=>e.call(t,s,r++)&&i.next(s)))})}const JA={provide:Dm,useFactory:function ZA(e,t){return()=>{if(Sr(t)){const n=Array.from(e.querySelectorAll(`[class*=${jv}]`)),i=/\bflex-layout-.+?\b/g;n.forEach(r=>{r.classList.contains(`${jv}ssr`)&&r.parentNode?r.parentNode.removeChild(r):r.className.replace(i,"")})}}},deps:[Lt,jn],multi:!0},jv="flex-layout-";let Ac=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({providers:[JA]}),e})();class Ii{constructor(t=!1,n="all",i="",r="",s=0){this.matches=t,this.mediaQuery=n,this.mqAlias=i,this.suffix=r,this.priority=s,this.property=""}clone(){return new Ii(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let eM=(()=>{class e{constructor(){this.stylesheet=new Map}addStyleToElement(n,i,r){const s=this.stylesheet.get(n);s?s.set(i,r):this.stylesheet.set(n,new Map([[i,r]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(n,i){const r=this.stylesheet.get(n);let s="";if(r){const d=r.get(i);("number"==typeof d||"string"==typeof d)&&(s=d+"")}return s}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Mc={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Mn=new Ve("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Mc}),Tr=new Ve("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),Ic=new Ve("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Vv(e,t){return e=e?.clone()??new Ii,t&&(e.mqAlias=t.alias,e.mediaQuery=t.mediaQuery,e.suffix=t.suffix,e.priority=t.priority),e}class vt{constructor(){this.shouldCache=!0}sideEffect(t,n,i){}}let lt=(()=>{class e{constructor(n,i,r,s){this._serverStylesheet=n,this._serverModuleLoaded=i,this._platformId=r,this.layoutConfig=s}applyStyleToElement(n,i,r=null){let s={};"string"==typeof i&&(s[i]=r,i=s),s=this.layoutConfig.disableVendorPrefixes?i:Lv(i),this._applyMultiValueStyleToElement(s,n)}applyStyleToElements(n,i=[]){const r=this.layoutConfig.disableVendorPrefixes?n:Lv(n);i.forEach(s=>{this._applyMultiValueStyleToElement(r,s)})}getFlowDirection(n){const i="flex-direction";let r=this.lookupStyle(n,i);return[r||"row",this.lookupInlineStyle(n,i)||Er(this._platformId)&&this._serverModuleLoaded?r:""]}hasWrap(n){return"wrap"===this.lookupStyle(n,"flex-wrap")}lookupAttributeValue(n,i){return n.getAttribute(i)??""}lookupInlineStyle(n,i){return Sr(this._platformId)?n.style.getPropertyValue(i):function tM(e,t){return Hv(e)[t]??""}(n,i)}lookupStyle(n,i,r=!1){let s="";return n&&((s=this.lookupInlineStyle(n,i))||(Sr(this._platformId)?r||(s=getComputedStyle(n).getPropertyValue(i)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(n,i)))),s?s.trim():""}_applyMultiValueStyleToElement(n,i){Object.keys(n).sort().forEach(r=>{const s=n[r],d=Array.isArray(s)?s:[s];d.sort();for(let v of d)v=v?v+"":"",Sr(this._platformId)||!this._serverModuleLoaded?Sr(this._platformId)?i.style.setProperty(r,v):nM(i,r,v):this._serverStylesheet.addStyleToElement(i,r,v)})}}return e.\u0275fac=function(n){return new(n||e)(be(eM),be(Tr),be(jn),be(Mn))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function nM(e,t,n){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=Hv(e);i[t]=n??"",function iM(e,t){let n="";for(const i in t)t[i]&&(n+=`${i}:${t[i]};`);e.setAttribute("style",n)}(e,i)}function Hv(e){const t={},n=e.getAttribute("style");if(n){const i=n.split(/;+/g);for(let r=0;r<i.length;r++){const s=i[r].trim();if(s.length>0){const d=s.indexOf(":");if(-1===d)throw new Error(`Invalid CSS style: ${s}`);t[s.substr(0,d).trim()]=s.substr(d+1).trim()}}}return t}function Ss(e,t){return(t&&t.priority||0)-(e&&e.priority||0)}function rM(e,t){return(e.priority||0)-(t.priority||0)}let Oc=(()=>{class e{constructor(n,i,r){this._zone=n,this._platformId=i,this._document=r,this.source=new XA(new Ii(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const n=[];return this.registry.forEach((i,r)=>{i.matches&&n.push(r)}),n}isActive(n){return this.registry.get(n)?.matches??this.registerQuery(n).some(r=>r.matches)}observe(n,i=!1){if(n&&n.length){const r=this._observable$.pipe(Tc(d=>!i||n.indexOf(d.mediaQuery)>-1));return va(new ve(d=>{const v=this.registerQuery(n);if(v.length){const x=v.pop();v.forEach(D=>{d.next(D)}),this.source.next(x)}d.complete()}),r)}return this._observable$}registerQuery(n){const i=Array.isArray(n)?n:[n],r=[];return function sM(e,t){const n=e.filter(i=>!Gv[i]);if(n.length>0){const i=n.join(", ");try{const r=t.createElement("style");r.setAttribute("type","text/css"),r.styleSheet||r.appendChild(t.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${i} {.fx-query-test{ }}\n`)),t.head.appendChild(r),n.forEach(s=>Gv[s]=r)}catch(r){console.error(r)}}}(i,this._document),i.forEach(s=>{const d=x=>{this._zone.run(()=>this.source.next(new Ii(x.matches,s)))};let v=this.registry.get(s);v||(v=this.buildMQL(s),v.addListener(d),this.pendingRemoveListenerFns.push(()=>v.removeListener(d)),this.registry.set(s,v)),v.matches&&r.push(new Ii(!0,s))}),r}ngOnDestroy(){let n;for(;n=this.pendingRemoveListenerFns.pop();)n()}buildMQL(n){return function oM(e,t){return t&&window.matchMedia("all").addListener?window.matchMedia(e):{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(n,Sr(this._platformId))}}return e.\u0275fac=function(n){return new(n||e)(be(Ct),be(jn),be(Lt))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Gv={},aM=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Uv="(orientation: portrait) and (max-width: 599.98px)",Wv="(orientation: landscape) and (max-width: 959.98px)",$v="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",zv="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",Yv="(orientation: portrait) and (min-width: 840px)",Xv="(orientation: landscape) and (min-width: 1280px)",ti={HANDSET:`${Uv}, ${Wv}`,TABLET:`${$v} , ${zv}`,WEB:`${Yv}, ${Xv} `,HANDSET_PORTRAIT:`${Uv}`,TABLET_PORTRAIT:`${$v} `,WEB_PORTRAIT:`${Yv}`,HANDSET_LANDSCAPE:`${Wv}`,TABLET_LANDSCAPE:`${zv}`,WEB_LANDSCAPE:`${Xv}`},lM=[{alias:"handset",priority:2e3,mediaQuery:ti.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:ti.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:ti.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:ti.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:ti.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:ti.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:ti.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:ti.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:ti.WEB_PORTRAIT,overlapping:!0}],uM=/(\.|-|_)/g;function cM(e){let t=e.length>0?e.charAt(0):"",n=e.length>1?e.slice(1):"";return t.toUpperCase()+n}const gM=new Ve("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const e=to(Ic),t=to(Mn),n=[].concat.apply([],(e||[]).map(r=>Array.isArray(r)?r:[r]));return function hM(e,t=[]){const n={};return e.forEach(i=>{n[i.alias]=i}),t.forEach(i=>{n[i.alias]?ei(n[i.alias],i):n[i.alias]=i}),function dM(e){return e.forEach(t=>{t.suffix||(t.suffix=function fM(e){return e.replace(uM,"|").split("|").map(cM).join("")}(t.alias),t.overlapping=!!t.overlapping)}),e}(Object.keys(n).map(i=>n[i]))}((t.disableDefaultBps?[]:aM).concat(t.addOrientationBps?lM:[]),n)}});let Fc=(()=>{class e{constructor(n){this.findByMap=new Map,this.items=[...n].sort(rM)}findByAlias(n){return n?this.findWithPredicate(n,i=>i.alias===n):null}findByQuery(n){return this.findWithPredicate(n,i=>i.mediaQuery===n)}get overlappings(){return this.items.filter(n=>n.overlapping)}get aliases(){return this.items.map(n=>n.alias)}get suffixes(){return this.items.map(n=>n?.suffix??"")}findWithPredicate(n,i){let r=this.findByMap.get(n);return r||(r=this.items.find(i)??null,this.findByMap.set(n,r)),r??null}}return e.\u0275fac=function(n){return new(n||e)(be(gM))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ar="print",pM={alias:Ar,mediaQuery:Ar,priority:1e3};let mM=(()=>{class e{constructor(n,i,r){this.breakpoints=n,this.layoutConfig=i,this._document=r,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new vM,this.deactivations=[]}withPrintQuery(n){return[...n,Ar]}isPrintEvent(n){return n.mediaQuery.startsWith(Ar)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(n=>this.breakpoints.findByAlias(n)).filter(n=>null!==n)}getEventBreakpoints({mediaQuery:n}){const i=this.breakpoints.findByQuery(n);return(i?[...this.printBreakPoints,i]:this.printBreakPoints).sort(Ss)}updateEvent(n){let i=this.breakpoints.findByQuery(n.mediaQuery);return this.isPrintEvent(n)&&(i=this.getEventBreakpoints(n)[0],n.mediaQuery=i?.mediaQuery??""),Vv(n,i)}registerBeforeAfterPrintHooks(n){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const i=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(n,this.getEventBreakpoints(new Ii(!0,Ar))),n.updateStyles())},r=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(n),n.updateStyles())};this._document.defaultView.addEventListener("beforeprint",i),this._document.defaultView.addEventListener("afterprint",r),this.beforePrintEventListeners.push(i),this.afterPrintEventListeners.push(r)}interceptEvents(n){return i=>{this.isPrintEvent(i)?i.matches&&!this.isPrinting?(this.startPrinting(n,this.getEventBreakpoints(i)),n.updateStyles()):!i.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(n),n.updateStyles()):this.collectActivations(n,i)}}blockPropagation(){return n=>!(this.isPrinting||this.isPrintEvent(n))}startPrinting(n,i){this.isPrinting=!0,this.formerActivations=n.activatedBreakpoints,n.activatedBreakpoints=this.queue.addPrintBreakpoints(i)}stopPrinting(n){n.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(n,i){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!i.matches){const r=this.breakpoints.findByQuery(i.mediaQuery);if(r){const s=this.formerActivations&&this.formerActivations.includes(r),d=!this.formerActivations&&n.activatedBreakpoints.includes(r);(s||d)&&(this.deactivations.push(r),this.deactivations.sort(Ss))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(n=>this._document.defaultView.removeEventListener("beforeprint",n)),this.afterPrintEventListeners.forEach(n=>this._document.defaultView.removeEventListener("afterprint",n)))}}return e.\u0275fac=function(n){return new(n||e)(be(Fc),be(Mn),be(Lt))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class vM{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(t){return t.push(pM),t.sort(Ss),t.forEach(n=>this.addBreakpoint(n)),this.printBreakpoints}addBreakpoint(t){t&&void 0===this.printBreakpoints.find(i=>i.mediaQuery===t.mediaQuery)&&(this.printBreakpoints=function yM(e){return e?.mediaQuery.startsWith(Ar)??!1}(t)?[t,...this.printBreakpoints]:[...this.printBreakpoints,t])}clear(){this.printBreakpoints=[]}}let ct=(()=>{class e{constructor(n,i,r){this.matchMedia=n,this.breakpoints=i,this.hook=r,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new R,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(n){this._activatedBreakpoints=[...n]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(n){this._useFallbacks=n}onMediaChange(n){const i=this.findByQuery(n.mediaQuery);if(i){n=Vv(n,i);const r=this.activatedBreakpoints.indexOf(i);n.matches&&-1===r?(this._activatedBreakpoints.push(i),this._activatedBreakpoints.sort(Ss),this.updateStyles()):!n.matches&&-1!==r&&(this._activatedBreakpoints.splice(r,1),this._activatedBreakpoints.sort(Ss),this.updateStyles())}}init(n,i,r,s,d=[]){qv(this.updateMap,n,i,r),qv(this.clearMap,n,i,s),this.buildElementKeyMap(n,i),this.watchExtraTriggers(n,i,d)}getValue(n,i,r){const s=this.elementMap.get(n);if(s){const d=void 0!==r?s.get(r):this.getActivatedValues(s,i);if(d)return d.get(i)}}hasValue(n,i){const r=this.elementMap.get(n);if(r){const s=this.getActivatedValues(r,i);if(s)return void 0!==s.get(i)||!1}return!1}setValue(n,i,r,s){let d=this.elementMap.get(n);if(d){const x=(d.get(s)??new Map).set(i,r);d.set(s,x),this.elementMap.set(n,d)}else d=(new Map).set(s,(new Map).set(i,r)),this.elementMap.set(n,d);const v=this.getValue(n,i);void 0!==v&&this.updateElement(n,i,v)}trackValue(n,i){return this.subject.asObservable().pipe(Tc(r=>r.element===n&&r.key===i))}updateStyles(){this.elementMap.forEach((n,i)=>{const r=new Set(this.elementKeyMap.get(i));let s=this.getActivatedValues(n);s&&s.forEach((d,v)=>{this.updateElement(i,v,d),r.delete(v)}),r.forEach(d=>{if(s=this.getActivatedValues(n,d),s){const v=s.get(d);this.updateElement(i,d,v)}else this.clearElement(i,d)})})}clearElement(n,i){const r=this.clearMap.get(n);if(r){const s=r.get(i);s&&(s(),this.subject.next({element:n,key:i,value:""}))}}updateElement(n,i,r){const s=this.updateMap.get(n);if(s){const d=s.get(i);d&&(d(r),this.subject.next({element:n,key:i,value:r}))}}releaseElement(n){const i=this.watcherMap.get(n);i&&(i.forEach(s=>s.unsubscribe()),this.watcherMap.delete(n));const r=this.elementMap.get(n);r&&(r.forEach((s,d)=>r.delete(d)),this.elementMap.delete(n))}triggerUpdate(n,i){const r=this.elementMap.get(n);if(r){const s=this.getActivatedValues(r,i);s&&(i?this.updateElement(n,i,s.get(i)):s.forEach((d,v)=>this.updateElement(n,v,d)))}}buildElementKeyMap(n,i){let r=this.elementKeyMap.get(n);r||(r=new Set,this.elementKeyMap.set(n,r)),r.add(i)}watchExtraTriggers(n,i,r){if(r&&r.length){let s=this.watcherMap.get(n);if(s||(s=new Map,this.watcherMap.set(n,s)),!s.get(i)){const v=va(...r).subscribe(()=>{const x=this.getValue(n,i);this.updateElement(n,i,x)});s.set(i,v)}}}findByQuery(n){return this.breakpoints.findByQuery(n)}getActivatedValues(n,i){for(let s=0;s<this.activatedBreakpoints.length;s++){const v=n.get(this.activatedBreakpoints[s].alias);if(v&&(void 0===i||v.has(i)&&null!=v.get(i)))return v}if(!this._useFallbacks)return;const r=n.get("");return void 0===i||r&&r.has(i)?r:void 0}observeActivations(){const n=this.breakpoints.items.map(i=>i.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(n)).pipe(function KA(e,t,n){const i=C(e)||t||n?{next:e,error:t,complete:n}:e;return i?I((r,s)=>{var d;null===(d=i.subscribe)||void 0===d||d.call(i);let v=!0;r.subscribe(j(s,x=>{var D;null===(D=i.next)||void 0===D||D.call(i,x),s.next(x)},()=>{var x;v=!1,null===(x=i.complete)||void 0===x||x.call(i),s.complete()},x=>{var D;v=!1,null===(D=i.error)||void 0===D||D.call(i,x),s.error(x)},()=>{var x,D;v&&(null===(x=i.unsubscribe)||void 0===x||x.call(i)),null===(D=i.finalize)||void 0===D||D.call(i)}))}):ce}(this.hook.interceptEvents(this)),Tc(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return e.\u0275fac=function(n){return new(n||e)(be(Oc),be(Fc),be(mM))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function qv(e,t,n,i){if(void 0!==i){const r=e.get(t)??new Map;r.set(n,i),e.set(t,r)}}let ht=(()=>{class e{constructor(n,i,r,s){this.elementRef=n,this.styleBuilder=i,this.styler=r,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new R,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(n){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,n,this.marshal.activatedAlias)}ngOnChanges(n){Object.keys(n).forEach(i=>{if(-1!==this.inputs.indexOf(i)){const r=i.split(".").slice(1).join(".");this.setValue(n[i].currentValue,r)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(n=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),n)}addStyles(n,i){const r=this.styleBuilder,s=r.shouldCache;let d=this.styleCache.get(n);(!d||!s)&&(d=r.buildStyles(n,i),s&&this.styleCache.set(n,d)),this.mru={...d},this.applyStyleToElement(d),r.sideEffect(n,d,i)}clearStyles(){Object.keys(this.mru).forEach(n=>{this.mru[n]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(n,i=!1){if(n){const[r,s]=this.styler.getFlowDirection(n);if(!s&&i){const d=Nv(r);this.styler.applyStyleToElements(d,[n])}return r.trim()}return"row"}hasWrap(n){return this.styler.hasWrap(n)}applyStyleToElement(n,i,r=this.nativeElement){this.styler.applyStyleToElement(r,n,i)}setValue(n,i){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,n,i)}updateWithValue(n){this.currentValue!==n&&(this.addStyles(n),this.currentValue=n)}}return e.\u0275fac=function(n){return new(n||e)(G(Ke),G(vt),G(lt),G(ct))},e.\u0275dir=De({type:e,features:[wi]}),e})();function Qv(e,t="1",n="1"){let i=[t,n,e],r=e.indexOf("calc");if(r>0){i[2]=Kv(e.substring(r).trim());let s=e.substr(0,r).trim().split(" ");2==s.length&&(i[0]=s[0],i[1]=s[1])}else if(0==r)i[2]=Kv(e.trim());else{let s=e.split(" ");i=3===s.length?s:[t,n,e]}return i}function Kv(e){return e.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function Mr(e){return I((t,n)=>{ni(e).subscribe(j(n,()=>n.complete(),u)),!n.closed&&t.subscribe(n)})}class RM{constructor(t,n,i=!0){this.key=t,this.value=n,this.key=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=i?n.replace(/['"]/g,"").trim():n.trim(),this.value=this.value.replace(/;/,"")}}function Jv(e){let t=typeof e;return"object"===t?e.constructor===Array?"array":e.constructor===Set?"set":"object":t}function ty(e){const[t,...n]=e.split(":");return new RM(t,n.join(":"))}function ny(e,t){return t.key&&(e[t.key]=t.value),e}let NM=(()=>{class e extends ht{constructor(n,i,r,s,d,v,x,D,S){super(n,null,i,r),this.sanitizer=s,this.ngStyleInstance=x,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new hc(n,d,v)),this.init();const T=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(T),this.isServer=D&&Er(S)}updateWithValue(n){const i=this.buildStyleMap(n);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...i},this.isServer&&this.applyStyleToElement(i),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(n){const i=r=>this.sanitizer.sanitize(rt.STYLE,r)??"";if(n)switch(Jv(n)){case"string":return ry(function kM(e,t=";"){return String(e).trim().split(t).map(n=>n.trim()).filter(n=>""!==n)}(n),i);case"array":return ry(n,i);default:return function ey(e,t){let n=[];return"set"===Jv(e)?e.forEach(i=>n.push(i)):Object.keys(e).forEach(i=>{n.push(`${i}:${e[i]}`)}),function LM(e,t){return e.map(ty).filter(i=>!!i).map(i=>(t&&(i.value=t(i.value)),i)).reduce(ny,{})}(n,t)}(n,i)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return e.\u0275fac=function(n){return new(n||e)(G(Ke),G(lt),G(ct),G(Rv),G(gi),G(go),G(hc,10),G(Tr),G(jn))},e.\u0275dir=De({type:e,features:[Pe]}),e})();const BM=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let iy=(()=>{class e extends NM{constructor(){super(...arguments),this.inputs=BM}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ue(e)))(i||e)}}(),e.\u0275dir=De({type:e,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[Pe]}),e})();function ry(e,t){return e.map(ty).filter(i=>!!i).map(i=>(t&&(i.value=t(i.value)),i)).reduce(ny,{})}let sy=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({imports:[Ac]}),e})(),UM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({}),e})(),WM=(()=>{class e extends vt{buildStyles(n,{display:i}){const r=Nv(n);return{...r,display:"none"===i?i:r.display}}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ue(e)))(i||e)}}(),e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const $M=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let zM=(()=>{class e extends ht{constructor(n,i,r,s,d){super(n,r,i,s),this._config=d,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(n){const r=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=ly.get(r)??new Map,ly.set(r,this.styleCache),this.currentValue!==n&&(this.addStyles(n,{display:r}),this.currentValue=n)}}return e.\u0275fac=function(n){return new(n||e)(G(Ke),G(lt),G(WM),G(ct),G(Mn))},e.\u0275dir=De({type:e,features:[Pe]}),e})(),ay=(()=>{class e extends zM{constructor(){super(...arguments),this.inputs=$M}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ue(e)))(i||e)}}(),e.\u0275dir=De({type:e,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[Pe]}),e})();const ly=new Map;let rI=(()=>{class e extends vt{constructor(n){super(),this.layoutConfig=n}buildStyles(n,i){let[r,s,...d]=n.split(" "),v=d.join(" ");const x=i.direction.indexOf("column")>-1?"column":"row",D=bs(x)?"max-width":"max-height",S=bs(x)?"min-width":"min-height",T=String(v).indexOf("calc")>-1,O=T||"auto"===v,N=String(v).indexOf("%")>-1&&!T,U=String(v).indexOf("px")>-1||String(v).indexOf("rem")>-1||String(v).indexOf("em")>-1||String(v).indexOf("vw")>-1||String(v).indexOf("vh")>-1;let Q=T||U;r="0"==r?0:r,s="0"==s?0:s;const ae=!r&&!s;let se={};const me={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(v||""){case"":const ee=!1!==this.layoutConfig.useColumnBasisZero;v="row"===x?"0%":ee?"0.000000001px":"auto";break;case"initial":case"nogrow":r=0,v="auto";break;case"grow":v="100%";break;case"noshrink":s=0,v="auto";break;case"auto":break;case"none":r=0,s=0,v="auto";break;default:!Q&&!N&&!isNaN(v)&&(v+="%"),"0%"===v&&(Q=!0),"0px"===v&&(v="0%"),se=ei(me,T?{"flex-grow":r,"flex-shrink":s,"flex-basis":Q?v:"100%"}:{flex:`${r} ${s} ${Q?v:"100%"}`})}return se.flex||se["flex-grow"]||(se=ei(me,T?{"flex-grow":r,"flex-shrink":s,"flex-basis":v}:{flex:`${r} ${s} ${v}`})),"0%"!==v&&"0px"!==v&&"0.000000001px"!==v&&"auto"!==v&&(se[S]=ae||Q&&r?v:null,se[D]=ae||!O&&s?v:null),se[S]||se[D]?i.hasWrap&&(se[T?"flex-basis":"flex"]=se[D]?T?se[D]:`${r} ${s} ${se[D]}`:T?se[S]:`${r} ${s} ${se[S]}`):se=ei(me,T?{"flex-grow":r,"flex-shrink":s,"flex-basis":v}:{flex:`${r} ${s} ${v}`}),ei(se,{"box-sizing":"border-box"})}}return e.\u0275fac=function(n){return new(n||e)(be(Mn))},e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const sI=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let oI=(()=>{class e extends ht{constructor(n,i,r,s,d){super(n,s,i,d),this.layoutConfig=r,this.marshal=d,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(n){this.flexShrink=n||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(n){this.flexGrow=n||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Mr(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Mr(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(n){const r=n.value.split(" ");this.direction=r[0],this.wrap=void 0!==r[1]&&"wrap"===r[1],this.triggerUpdate()}updateWithValue(n){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const r=this.direction,s=r.startsWith("row"),d=this.wrap;s&&d?this.styleCache=uI:s&&!d?this.styleCache=aI:!s&&d?this.styleCache=cI:!s&&!d&&(this.styleCache=lI);const x=Qv(String(n).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(x.join(" "),{direction:r,hasWrap:d})}triggerReflow(){const n=this.activatedValue;if(void 0!==n){const i=Qv(n+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,i.join(" "))}}}return e.\u0275fac=function(n){return new(n||e)(G(Ke),G(lt),G(Mn),G(rI),G(ct))},e.\u0275dir=De({type:e,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[Pe]}),e})(),fy=(()=>{class e extends oI{constructor(){super(...arguments),this.inputs=sI}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ue(e)))(i||e)}}(),e.\u0275dir=De({type:e,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[Pe]}),e})();const aI=new Map,lI=new Map,uI=new Map,cI=new Map;let PI=(()=>{class e extends vt{buildStyles(n,i){const r={},[s,d]=n.split(" ");switch(s){case"center":r["justify-content"]="center";break;case"space-around":r["justify-content"]="space-around";break;case"space-between":r["justify-content"]="space-between";break;case"space-evenly":r["justify-content"]="space-evenly";break;case"end":case"flex-end":r["justify-content"]="flex-end";break;default:r["justify-content"]="flex-start"}switch(d){case"start":case"flex-start":r["align-items"]=r["align-content"]="flex-start";break;case"center":r["align-items"]=r["align-content"]="center";break;case"end":case"flex-end":r["align-items"]=r["align-content"]="flex-end";break;case"space-between":r["align-content"]="space-between",r["align-items"]="stretch";break;case"space-around":r["align-content"]="space-around",r["align-items"]="stretch";break;case"baseline":r["align-content"]="stretch",r["align-items"]="baseline";break;default:r["align-items"]=r["align-content"]="stretch"}return ei(r,{display:i.inline?"inline-flex":"flex","flex-direction":i.layout,"box-sizing":"border-box","max-width":"stretch"===d?bs(i.layout)?null:"100%":null,"max-height":"stretch"===d&&bs(i.layout)?"100%":null})}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ue(e)))(i||e)}}(),e.\u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const RI=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let kI=(()=>{class e extends ht{constructor(n,i,r,s){super(n,r,i,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Mr(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(n){const i=this.layout||"row",r=this.inline;"row"===i&&r?this.styleCache=VI:"row"!==i||r?"row-reverse"===i&&r?this.styleCache=GI:"row-reverse"!==i||r?"column"===i&&r?this.styleCache=HI:"column"!==i||r?"column-reverse"===i&&r?this.styleCache=UI:"column-reverse"===i&&!r&&(this.styleCache=jI):this.styleCache=NI:this.styleCache=BI:this.styleCache=LI,this.addStyles(n,{layout:i,inline:r})}onLayoutChange(n){const i=n.value.split(" ");this.layout=i[0],this.inline=n.value.includes("inline"),la.find(r=>r===this.layout)||(this.layout="row"),this.triggerUpdate()}}return e.\u0275fac=function(n){return new(n||e)(G(Ke),G(lt),G(PI),G(ct))},e.\u0275dir=De({type:e,features:[Pe]}),e})(),dy=(()=>{class e extends kI{constructor(){super(...arguments),this.inputs=RI}}return e.\u0275fac=function(){let t;return function(i){return(t||(t=Ue(e)))(i||e)}}(),e.\u0275dir=De({type:e,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[Pe]}),e})();const LI=new Map,NI=new Map,BI=new Map,jI=new Map,VI=new Map,HI=new Map,GI=new Map,UI=new Map;let hy=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({imports:[Ac,UM]}),e})(),Cy=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({imports:[Ac]}),e})(),fF=(()=>{class e{constructor(n,i){Er(i)&&!n&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(n,i=[]){return{ngModule:e,providers:n.serverLoaded?[{provide:Mn,useValue:{...Mc,...n}},{provide:Ic,useValue:i,multi:!0},{provide:Tr,useValue:!0}]:[{provide:Mn,useValue:{...Mc,...n}},{provide:Ic,useValue:i,multi:!0}]}}}return e.\u0275fac=function(n){return new(n||e)(be(Tr),be(jn))},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({imports:[hy,sy,Cy,hy,sy,Cy]}),e})();var Es=Fi(621),wy=function(){if(typeof Map<"u")return Map;function e(t,n){var i=-1;return t.some(function(r,s){return r[0]===n&&(i=s,!0)}),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var i=e(this.__entries__,n),r=this.__entries__[i];return r&&r[1]},t.prototype.set=function(n,i){var r=e(this.__entries__,n);~r?this.__entries__[r][1]=i:this.__entries__.push([n,i])},t.prototype.delete=function(n){var i=this.__entries__,r=e(i,n);~r&&i.splice(r,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,i){void 0===i&&(i=null);for(var r=0,s=this.__entries__;r<s.length;r++){var d=s[r];n.call(i,d[1],d[0])}},t}()}(),Rc=typeof window<"u"&&typeof document<"u"&&window.document===document,fa=typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),dF="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(fa):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},mF=["top","right","bottom","left","width","height","size","weight"],vF=typeof MutationObserver<"u",yF=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function gF(e,t){var n=!1,i=!1,r=0;function s(){n&&(n=!1,e()),i&&v()}function d(){dF(s)}function v(){var x=Date.now();if(n){if(x-r<2)return;i=!0}else n=!0,i=!1,setTimeout(d,t);r=x}return v}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,i=n.indexOf(t);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Rc||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),vF?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Rc||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,i=void 0===n?"":n;mF.some(function(s){return!!~i.indexOf(s)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Dy=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},Ir=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||fa},by=ha(0,0,0,0);function da(e){return parseFloat(e)||0}function Sy(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(i,r){return i+da(e["border-"+r+"-width"])},0)}var wF=typeof SVGGraphicsElement<"u"?function(e){return e instanceof Ir(e).SVGGraphicsElement}:function(e){return e instanceof Ir(e).SVGElement&&"function"==typeof e.getBBox};function bF(e){return Rc?wF(e)?function xF(e){var t=e.getBBox();return ha(0,0,t.width,t.height)}(e):function CF(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return by;var i=Ir(e).getComputedStyle(e),r=function _F(e){for(var n={},i=0,r=["top","right","bottom","left"];i<r.length;i++){var s=r[i];n[s]=da(e["padding-"+s])}return n}(i),s=r.left+r.right,d=r.top+r.bottom,v=da(i.width),x=da(i.height);if("border-box"===i.boxSizing&&(Math.round(v+s)!==t&&(v-=Sy(i,"left","right")+s),Math.round(x+d)!==n&&(x-=Sy(i,"top","bottom")+d)),!function DF(e){return e===Ir(e).document.documentElement}(e)){var D=Math.round(v+s)-t,S=Math.round(x+d)-n;1!==Math.abs(D)&&(v-=D),1!==Math.abs(S)&&(x-=S)}return ha(r.left,r.top,v,x)}(e):by}function ha(e,t,n,i){return{x:e,y:t,width:n,height:i}}var EF=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ha(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=bF(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),TF=function e(t,n){var i=function SF(e){var t=e.x,n=e.y,i=e.width,r=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,d=Object.create(s.prototype);return Dy(d,{x:t,y:n,width:i,height:r,top:n,right:t+i,bottom:r+n,left:t}),d}(n);Dy(this,{target:t,contentRect:i})},AF=function(){function e(t,n,i){if(this.activeObservations_=[],this.observations_=new wy,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=i}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u")&&Element instanceof Object){if(!(t instanceof Ir(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new EF(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u")&&Element instanceof Object){if(!(t instanceof Ir(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(t)||(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(i){return new TF(i.target,i.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Ey=typeof WeakMap<"u"?new WeakMap:new wy,Ty=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=yF.getInstance(),i=new AF(t,n,this);Ey.set(this,i)};["observe","unobserve","disconnect"].forEach(function(e){Ty.prototype[e]=function(){var t;return(t=Ey.get(this))[e].apply(t,arguments)}});const IF=typeof fa.ResizeObserver<"u"?fa.ResizeObserver:Ty,Ay=new Ve("FABRIC_CONFIG"),OF=["drop","dragover","dragenter","dragleave","mouseup","mousedown","mouseover","mouseout","mousemove","mousewheel","mousedblclick","mouseupBefore","mousedownBefore","mousemoveBefore","mouseUp","mouseDown","mouseOver","mouseOut","mouseMove","mouseWheel","mouseDblclick","mouseUpBefore","mouseDownBefore","mouseMoveBefore","pathCreated","alterRender","objectAdded","objectMoved","objectScaled","objectSkewed","objectRotated","objectRemoved","objectModified","objectSelected","objectMoving","objectScaling","objectSkewing","objectRotating","selectionCleared","selectionCreated","selectionUpdated","beforeTransform","beforeSelectionCleared"];class FF{constructor(t={}){this.assign(t)}assign(t={}){for(const n in t)this[n]=t[n]}}let ga=(()=>{class e{constructor(n,i,r,s){this.zone=n,this.elementRef=i,this.differs=r,this.defaults=s,this.instance=null,this.ro=null,this.objectsJSON=null,this.initialZoom=null,this.initialWidth=null,this.initialHeight=null,this.configDiff=null,this.disabled=!1,this.drop=new le,this.dragover=new le,this.dragenter=new le,this.dragleave=new le,this.mouseup=new le,this.mousedown=new le,this.mouseover=new le,this.mouseout=new le,this.mousemove=new le,this.mousewheel=new le,this.mousedblclick=new le,this.mouseupBefore=new le,this.mousedownBefore=new le,this.mousemoveBefore=new le,this.mouseUp=new le,this.mouseDown=new le,this.mouseOver=new le,this.mouseOut=new le,this.mouseMove=new le,this.mouseWheel=new le,this.mouseDblclick=new le,this.mouseUpBefore=new le,this.mouseDownBefore=new le,this.mouseMoveBefore=new le,this.pathCreated=new le,this.alterRender=new le,this.objectAdded=new le,this.objectMoved=new le,this.objectScaled=new le,this.objectSkewed=new le,this.objectRotated=new le,this.objectRemoved=new le,this.objectModified=new le,this.objectSelected=new le,this.objectMoving=new le,this.objectScaling=new le,this.objectSkewing=new le,this.objectRotating=new le,this.selectionCleared=new le,this.selectionCreated=new le,this.selectionUpdated=new le,this.beforeTransform=new le,this.beforeSelectionCleared=new le}set zoom(n){this.setZoom(n)}set width(n){this.setWidth(n)}set height(n){this.setHeight(n)}ngOnInit(){const n=new FF(this.defaults);n.assign(this.config),this.zone.runOutsideAngular(()=>{this.instance=this.disabled?new Es.fabric.StaticCanvas(this.elementRef.nativeElement,n):new Es.fabric.Canvas(this.elementRef.nativeElement,n),this.initialZoom&&this.setZoom(this.initialZoom),this.initialWidth&&this.setWidth(this.initialWidth),this.initialHeight&&this.setHeight(this.initialHeight),null!==this.objectsJSON&&this.loadFromJSON(this.objectsJSON)}),OF.forEach(i=>{const r=i.replace(/([A-Z])/g,s=>`:${s.toLowerCase()}`);this.instance&&this.instance.on(r,s=>{this.zone.run(()=>{this[i].observers.length&&this[i].emit(s)})})}),this.configDiff||(this.configDiff=this.differs.find(this.config||{}).create(),this.configDiff.diff(this.config||{})),this.zone.runOutsideAngular(()=>{this.ro=new IF((i,r)=>{const s=this.elementRef.nativeElement.parentElement.parentElement;this.initialWidth||this.setWidth(s.offsetWidth),this.initialHeight||this.setHeight(s.offsetHeight)}),this.ro.observe(this.elementRef.nativeElement.parentElement.parentElement)})}ngOnDestroy(){this.ro&&this.ro.disconnect(),this.instance&&(this.objectsJSON=this.instance.toObject(),this.instance.dispose(),delete this.instance,this.instance=null)}ngDoCheck(){this.configDiff&&this.configDiff.diff(this.config||{})&&(this.ngOnDestroy(),this.ngOnInit())}ngOnChanges(n){this.instance&&n.disabled&&n.disabled.currentValue!==n.disabled.previousValue&&(this.ngOnDestroy(),this.ngOnInit())}fabric(){return this.instance}clear(){this.instance&&this.instance.clear()}render(){this.instance&&this.instance.renderAll()}setZoom(n){this.initialZoom=n,this.instance&&this.instance.setZoom(n)}setWidth(n){this.initialWidth=n,this.instance&&this.instance.setWidth(n)}setHeight(n){this.initialHeight=n,this.instance&&this.instance.setHeight(n)}loadFromJSON(n,i,r){this.instance&&this.instance.loadFromJSON(n,()=>{let s=!0;i&&(s=i()),s&&this.instance&&this.instance.renderAll()},r)}}return e.\u0275fac=function(n){return new(n||e)(G(Ct),G(Ke),G(gi),G(Ay,8))},e.\u0275dir=De({type:e,selectors:[["","fabric",""]],inputs:{zoom:"zoom",width:"width",height:"height",disabled:"disabled",config:["fabric","config"]},outputs:{drop:"drop",dragover:"dragover",dragenter:"dragenter",dragleave:"dragleave",mouseup:"mouseup",mousedown:"mousedown",mouseover:"mouseover",mouseout:"mouseout",mousemove:"mousemove",mousewheel:"mousewheel",mousedblclick:"mousedblclick",mouseupBefore:"mouseupBefore",mousedownBefore:"mousedownBefore",mousemoveBefore:"mousemoveBefore",mouseUp:"mouseUp",mouseDown:"mouseDown",mouseOver:"mouseOver",mouseOut:"mouseOut",mouseMove:"mouseMove",mouseWheel:"mouseWheel",mouseDblclick:"mouseDblclick",mouseUpBefore:"mouseUpBefore",mouseDownBefore:"mouseDownBefore",mouseMoveBefore:"mouseMoveBefore",pathCreated:"pathCreated",alterRender:"alterRender",objectAdded:"objectAdded",objectMoved:"objectMoved",objectScaled:"objectScaled",objectSkewed:"objectSkewed",objectRotated:"objectRotated",objectRemoved:"objectRemoved",objectModified:"objectModified",objectSelected:"objectSelected",objectMoving:"objectMoving",objectScaling:"objectScaling",objectSkewing:"objectSkewing",objectRotating:"objectRotating",selectionCleared:"selectionCleared",selectionCreated:"selectionCreated",selectionUpdated:"selectionUpdated",beforeTransform:"beforeTransform",beforeSelectionCleared:"beforeSelectionCleared"},exportAs:["ngxFabric"],features:[wi]}),e})(),My=(()=>{class e{constructor(){this.json=null,this.zoom=null,this.width=null,this.height=null,this.disabled=!1,this.useFabricClass=!0,this.dataLoaded=new le,this.drop=new le,this.dragover=new le,this.dragenter=new le,this.dragleave=new le,this.mouseup=new le,this.mousedown=new le,this.mouseover=new le,this.mouseout=new le,this.mousemove=new le,this.mousewheel=new le,this.mousedblclick=new le,this.mouseupBefore=new le,this.mousedownBefore=new le,this.mousemoveBefore=new le,this.mouseUp=new le,this.mouseDown=new le,this.mouseOver=new le,this.mouseOut=new le,this.mouseMove=new le,this.mouseWheel=new le,this.mouseDblclick=new le,this.mouseUpBefore=new le,this.mouseDownBefore=new le,this.mouseMoveBefore=new le,this.pathCreated=new le,this.alterRender=new le,this.objectAdded=new le,this.objectMoved=new le,this.objectScaled=new le,this.objectSkewed=new le,this.objectRotated=new le,this.objectRemoved=new le,this.objectModified=new le,this.objectSelected=new le,this.objectMoving=new le,this.objectScaling=new le,this.objectSkewing=new le,this.objectRotating=new le,this.selectionCleared=new le,this.selectionCreated=new le,this.selectionUpdated=new le,this.beforeTransform=new le,this.beforeSelectionCleared=new le}set data(n){this.setJSON(n)}ngAfterViewInit(){null!=this.json&&this.setJSON(this.json,!0)}setJSON(n,i){(i||n!==this.json)&&(this.directiveRef&&this.directiveRef.loadFromJSON(n,()=>{this.directiveRef&&this.directiveRef.fabric()&&this.dataLoaded.emit(this.directiveRef.fabric())}),this.json=n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ks({type:e,selectors:[["fabric"]],viewQuery:function(n,i){if(1&n&&Bo(ga,7),2&n){let r;No(r=jo())&&(i.directiveRef=r.first)}},hostVars:2,hostBindings:function(n,i){2&n&&vu("fabric",i.useFabricClass)},inputs:{data:"data",zoom:"zoom",width:"width",height:"height",disabled:"disabled",config:"config",useFabricClass:"useFabricClass"},outputs:{dataLoaded:"dataLoaded",drop:"drop",dragover:"dragover",dragenter:"dragenter",dragleave:"dragleave",mouseup:"mouseup",mousedown:"mousedown",mouseover:"mouseover",mouseout:"mouseout",mousemove:"mousemove",mousewheel:"mousewheel",mousedblclick:"mousedblclick",mouseupBefore:"mouseupBefore",mousedownBefore:"mousedownBefore",mousemoveBefore:"mousemoveBefore",mouseUp:"mouseUp",mouseDown:"mouseDown",mouseOver:"mouseOver",mouseOut:"mouseOut",mouseMove:"mouseMove",mouseWheel:"mouseWheel",mouseDblclick:"mouseDblclick",mouseUpBefore:"mouseUpBefore",mouseDownBefore:"mouseDownBefore",mouseMoveBefore:"mouseMoveBefore",pathCreated:"pathCreated",alterRender:"alterRender",objectAdded:"objectAdded",objectMoved:"objectMoved",objectScaled:"objectScaled",objectSkewed:"objectSkewed",objectRotated:"objectRotated",objectRemoved:"objectRemoved",objectModified:"objectModified",objectSelected:"objectSelected",objectMoving:"objectMoving",objectScaling:"objectScaling",objectSkewing:"objectSkewing",objectRotating:"objectRotating",selectionCleared:"selectionCleared",selectionCreated:"selectionCreated",selectionUpdated:"selectionUpdated",beforeTransform:"beforeTransform",beforeSelectionCleared:"beforeSelectionCleared"},exportAs:["ngxFabric"],decls:1,vars:5,consts:[[3,"fabric","zoom","width","height","disabled","drop","dragover","dragenter","dragleave","mouseup","mousedown","mouseover","mouseout","mousemove","mousewheel","mousedblclick","mouseupBefore","mousedownBefore","mousemoveBefore","mouseUp","mouseDown","mouseOver","mouseOut","mouseMove","mouseWheel","mouseDblclick","mouseUpBefore","mouseDownBefore","mouseMoveBefore","pathCreated","alterRender","objectAdded","objectMoved","objectScaled","objectSkewed","objectRotated","objectRemoved","objectModified","objectSelected","objectMoving","objectScaling","objectSkewing","objectRotating","selectionCleared","selectionCreated","selectionUpdated","beforeTransform","beforeSelectionCleared"]],template:function(n,i){1&n&&(It(0,"canvas",0),wn("drop",function(s){return i.drop.emit(s)})("dragover",function(s){return i.dragover.emit(s)})("dragenter",function(s){return i.dragenter.emit(s)})("dragleave",function(s){return i.dragleave.emit(s)})("mouseup",function(s){return i.mouseup.emit(s)})("mousedown",function(s){return i.mousedown.emit(s)})("mouseover",function(s){return i.mouseover.emit(s)})("mouseout",function(s){return i.mouseout.emit(s)})("mousemove",function(s){return i.mousemove.emit(s)})("mousewheel",function(s){return i.mousewheel.emit(s)})("mousedblclick",function(s){return i.mousedblclick.emit(s)})("mouseupBefore",function(s){return i.mouseupBefore.emit(s)})("mousedownBefore",function(s){return i.mousedownBefore.emit(s)})("mousemoveBefore",function(s){return i.mousemoveBefore.emit(s)})("mouseUp",function(s){return i.mouseUp.emit(s)})("mouseDown",function(s){return i.mouseDown.emit(s)})("mouseOver",function(s){return i.mouseOver.emit(s)})("mouseOut",function(s){return i.mouseOut.emit(s)})("mouseMove",function(s){return i.mouseMove.emit(s)})("mouseWheel",function(s){return i.mouseWheel.emit(s)})("mouseDblclick",function(s){return i.mouseDblclick.emit(s)})("mouseUpBefore",function(s){return i.mouseUpBefore.emit(s)})("mouseDownBefore",function(s){return i.mouseDownBefore.emit(s)})("mouseMoveBefore",function(s){return i.mouseMoveBefore.emit(s)})("pathCreated",function(s){return i.pathCreated.emit(s)})("alterRender",function(s){return i.alterRender.emit(s)})("objectAdded",function(s){return i.objectAdded.emit(s)})("objectMoved",function(s){return i.objectMoved.emit(s)})("objectScaled",function(s){return i.objectScaled.emit(s)})("objectSkewed",function(s){return i.objectSkewed.emit(s)})("objectRotated",function(s){return i.objectRotated.emit(s)})("objectRemoved",function(s){return i.objectRemoved.emit(s)})("objectModified",function(s){return i.objectModified.emit(s)})("objectSelected",function(s){return i.objectSelected.emit(s)})("objectMoving",function(s){return i.objectMoving.emit(s)})("objectScaling",function(s){return i.objectScaling.emit(s)})("objectSkewing",function(s){return i.objectSkewing.emit(s)})("objectRotating",function(s){return i.objectRotating.emit(s)})("selectionCleared",function(s){return i.selectionCleared.emit(s)})("selectionCreated",function(s){return i.selectionCreated.emit(s)})("selectionUpdated",function(s){return i.selectionUpdated.emit(s)})("beforeTransform",function(s){return i.beforeTransform.emit(s)})("beforeSelectionCleared",function(s){return i.beforeSelectionCleared.emit(s)}),Ot()),2&n&&fi("fabric",i.config)("zoom",i.zoom)("width",i.width)("height",i.height)("disabled",i.disabled)},dependencies:[ga],styles:["fabric[fxflex]{display:flex;flex-direction:column;min-width:0;min-height:0}fabric.fabric{width:100%;height:100%}\n"],encapsulation:2}),e})(),PF=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ln({type:e}),e.\u0275inj=Zt({imports:[mc,mc]}),e})();function RF(e,t){if(1&e){const n=gu();It(0,"fabric",11),wn("dataLoaded",function(r){return Hi(n),Gi(di().onDataLoaded(r))})("objectAdded",function(r){return Hi(n),Gi(di().onObjectAdded(r))})("selectionCreated",function(r){return Hi(n),Gi(di().onSelectionCreated(r))}),Ot()}if(2&e){const n=di();fi("data",n.data)("config",n.config)("disabled",n.disabled)}}function kF(e,t){if(1&e){const n=gu();It(0,"div",12)(1,"canvas",13),wn("objectAdded",function(r){return Hi(n),Gi(di().onObjectAdded(r))})("selectionCreated",function(r){return Hi(n),Gi(di().onSelectionCreated(r))}),Ot()()}if(2&e){const n=di();ns(1),fi("fabric",n.config)("disabled",n.disabled)}}let LF=(()=>{class e{constructor(){this.show=!0,this.data={objects:[{type:"group",top:22,left:72,width:200,height:60,objects:[{type:"rect",top:-30,left:-100,width:200,height:60,fill:"#cfcfcf"},{type:"text",width:200,height:60,fontSize:24,text:"Example object",originX:"center",originY:"center",styles:{}}]}]},this.type="component",this.disabled=!1,this.config={renderOnAddRemove:!0}}toggleType(){this.type="component"===this.type?"directive":"component"}addLine(){const n=new Es.fabric.Line([44,100,300,100],{fill:"#000000",stroke:"#000000",strokeWidth:3});"directive"===this.type&&this.directiveRef?this.directiveRef.fabric().add(n):"component"===this.type&&this.componentRef&&this.componentRef.directiveRef&&this.componentRef.directiveRef.fabric().add(n)}addText(){const n=new Es.fabric.Text("Angular",{top:120,left:105,fill:"#000000"});"directive"===this.type&&this.directiveRef?this.directiveRef.fabric().add(n):"component"===this.type&&this.componentRef&&this.componentRef.directiveRef&&this.componentRef.directiveRef.fabric().add(n)}addImage(){Es.fabric.Image.fromURL("https://angular.io/assets/images/logos/angular/angular.png",n=>{n.scale(.5),n.set({left:110,top:180}),"directive"===this.type&&this.directiveRef?this.directiveRef.fabric().add(n):"component"===this.type&&this.componentRef&&this.componentRef.directiveRef&&this.componentRef.directiveRef.fabric().add(n)})}toggleDisabled(){this.disabled=!this.disabled}resetCanvasObjects(){"directive"===this.type&&this.directiveRef?this.directiveRef.clear():"component"===this.type&&this.componentRef&&this.componentRef.directiveRef&&this.componentRef.directiveRef.clear(),this.data=Object.assign({},this.data)}onDataLoaded(n){console.log("Data loaded:",n)}onObjectAdded(n){console.log("Object added:",n)}onSelectionCreated(n){console.log("Selection created:",n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ks({type:e,selectors:[["my-app"]],viewQuery:function(n,i){if(1&n&&(Bo(My,5),Bo(ga,5)),2&n){let r;No(r=jo())&&(i.componentRef=r.first),No(r=jo())&&(i.directiveRef=r.first)}},decls:28,vars:4,consts:[["fxLayout","column",1,"box-container",3,"ngStyle.lt-sm"],[1,"app-title"],[1,"info-container"],["fxLayout","row","fxLayout.lt-sm","column","fxLayoutAlign","stretch","fxFlex","auto",1,"horizontal-container"],["fxLayout","column","fxLayoutAlign","stretch","fxFlex","50%",1,"vertical-container"],[1,"box-title"],["fxLayout","column","fxLayoutAlign","stretch","fxFlex","auto",1,"action-container"],["fxLayout","column","fxLayoutAlign","center","fxFlex","auto",1,"action-button",3,"click"],["fxLayout","column","fxLayoutAlign","stretch","fxFlex","auto",1,"content-container"],["fxFlex","auto",3,"data","config","disabled","dataLoaded","objectAdded","selectionCreated",4,"ngIf"],["fxFlex","auto",4,"ngIf"],["fxFlex","auto",3,"data","config","disabled","dataLoaded","objectAdded","selectionCreated"],["fxFlex","auto"],[1,"fabric-canvas",3,"fabric","disabled","objectAdded","selectionCreated"]],template:function(n,i){1&n&&(It(0,"div",0)(1,"div",1),Sn(2,"Simple example app for the ngx-fabric-wrapper"),Ot(),It(3,"div",2),Sn(4," This example only shows some of the available features, to see all check Fabric demos / documentation. "),Ot(),It(5,"div",3)(6,"div",4)(7,"div",5),Sn(8,"Settings"),Ot(),It(9,"div",6)(10,"div",7),wn("click",function(){return i.toggleType()}),Sn(11),Ot(),It(12,"div",7),wn("click",function(){return i.toggleDisabled()}),Sn(13,"Toggle disabled state"),Ot(),It(14,"div",7),wn("click",function(){return i.addLine()}),Sn(15,"Add line object"),Ot(),It(16,"div",7),wn("click",function(){return i.addText()}),Sn(17,"Add text object"),Ot(),It(18,"div",7),wn("click",function(){return i.addImage()}),Sn(19,"Add image object"),Ot(),It(20,"div",7),wn("click",function(){return i.resetCanvasObjects()}),Sn(21,"Reset the canvas"),Ot()()(),It(22,"div",4)(23,"div",5),Sn(24,"Fabric"),Ot(),It(25,"div",8),cu(26,RF,1,3,"fabric",9),cu(27,kF,2,2,"div",10),Ot()()()()),2&n&&(fi("ngStyle.lt-sm","min-height: 800px;"),ns(11),_u("component"===i.type?"Switch to directive":"Switch to component"),ns(15),fi("ngIf","component"===i.type&&i.show),ns(1),fi("ngIf","directive"===i.type&&i.show))},dependencies:[lv,My,ga,ay,dy,fy,iy],styles:[".app-title[_ngcontent-%COMP%]{font-size:24px}.box-title[_ngcontent-%COMP%]{font-size:20px}.box-container[_ngcontent-%COMP%]{box-sizing:border-box;width:800px;height:500px;max-width:90%;max-height:90%;padding:24px;margin:24px auto;border-radius:4px;color:#555;background-color:#eee;box-shadow:0 6px 20px #0000002e,0 6px 6px #00000040}.info-container[_ngcontent-%COMP%]{padding:12px 16px;line-height:24px}.action-container[_ngcontent-%COMP%]{overflow:auto;padding:16px}.content-container[_ngcontent-%COMP%]{overflow:visible}.action-container[_ngcontent-%COMP%], .content-container[_ngcontent-%COMP%]{position:relative;height:300px;min-height:0;margin:8px 16px;border-radius:4px;background-color:#fff}.action-button[_ngcontent-%COMP%]{box-sizing:border-box;width:calc(100% - 16px);min-height:35px;padding:4px 16px;margin:8px;border:1px solid #555;border-radius:4px;cursor:pointer;font-size:14px;font-weight:700;line-height:14px;text-align:center}.action-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#555}.quill-editor[_ngcontent-%COMP%]{display:flex}"]}),e})();const NF={allowTouchScrolling:!0};let BF=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ln({type:e,bootstrap:[LF]}),e.\u0275inj=Zt({providers:[{provide:Ay,useValue:NF}],imports:[PF,BA,fF]}),e})();NA().bootstrapModule(BF)},621:(Ts,Re,Fi)=>{var y,f,p,h,a,u,C=C||{version:"5.2.4"};if(Re.fabric=C,typeof document<"u"&&typeof window<"u")C.document=document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),C.window=window;else{var Pi=new(Fi(960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;C.document=Pi.document,C.jsdomImplForWrapper=Fi(759).implForWrapper,C.nodeCanvas=Fi(272).Canvas,C.window=Pi,DOMParser=C.window.DOMParser}function $t(y,f){var p=y.canvas,h=f.targetCanvas,a=h.getContext("2d");a.translate(0,h.height),a.scale(1,-1),a.drawImage(p,0,p.height-h.height,h.width,h.height,0,0,h.width,h.height)}function Ri(y,f){var h=f.targetCanvas.getContext("2d"),a=f.destinationWidth,u=f.destinationHeight,o=a*u*4,c=new Uint8Array(this.imageBuffer,0,o),g=new Uint8ClampedArray(this.imageBuffer,0,o);y.readPixels(0,0,a,u,y.RGBA,y.UNSIGNED_BYTE,c);var l=new ImageData(g,a,u);h.putImageData(l,0,0)}C.isTouchSupported="ontouchstart"in C.window||"ontouchstart"in C.document||C.window&&C.window.navigator&&C.window.navigator.maxTouchPoints>0,C.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",C.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],C.DPI=96,C.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",C.commaWsp="(?:\\s+,?\\s*|,\\s*)",C.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,C.reNonWord=/[ \n\.,;!\?\-]/,C.fontPaths={},C.iMatrix=[1,0,0,1,0,0],C.svgNS="http://www.w3.org/2000/svg",C.perfLimitSizeTotal=2097152,C.maxCacheSideLimit=4096,C.minCacheSideLimit=256,C.charWidthsCache={},C.textureSize=2048,C.disableStyleCopyPaste=!1,C.enableGLFiltering=!0,C.devicePixelRatio=C.window.devicePixelRatio||C.window.webkitDevicePixelRatio||C.window.mozDevicePixelRatio||1,C.browserShadowBlurConstant=1,C.arcToSegmentsCache={},C.boundsOfCurveCache={},C.cachesBoundsOfCurve=!0,C.forceGLPutImageData=!1,C.initFilterBackend=function(){return C.enableGLFiltering&&C.isWebglSupported&&C.isWebglSupported(C.textureSize)?(console.log("max texture size: "+C.maxTextureSize),new C.WebglFilterBackend({tileSize:C.textureSize})):C.Canvas2dFilterBackend?new C.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=C),function(){function y(o,c){if(this.__eventListeners[o]){var g=this.__eventListeners[o];c?g[g.indexOf(c)]=!1:C.util.array.fill(g,!1)}}function p(o,c){var g=function(){c.apply(this,arguments),this.off(o,g)}.bind(this);this.on(o,g)}C.Observable={fire:function u(o,c){if(!this.__eventListeners)return this;var g=this.__eventListeners[o];if(!g)return this;for(var l=0,m=g.length;l<m;l++)g[l]&&g[l].call(this,c||{});return this.__eventListeners[o]=g.filter(function(_){return!1!==_}),this},on:function f(o,c){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var g in o)this.on(g,o[g]);else this.__eventListeners[o]||(this.__eventListeners[o]=[]),this.__eventListeners[o].push(c);return this},once:function h(o,c){if(1===arguments.length)for(var g in o)p.call(this,g,o[g]);else p.call(this,o,c);return this},off:function a(o,c){if(!this.__eventListeners)return this;if(0===arguments.length)for(o in this.__eventListeners)y.call(this,o);else if(1===arguments.length&&"object"==typeof arguments[0])for(var g in o)y.call(this,g,o[g]);else y.call(this,o,c);return this}}}(),C.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var y=0,f=arguments.length;y<f;y++)this._onObjectAdded(arguments[y]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(y,f,p){var h=this._objects;return p?h[f]=y:h.splice(f,0,y),this._onObjectAdded&&this._onObjectAdded(y),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f,y=this._objects,p=!1,h=0,a=arguments.length;h<a;h++)-1!==(f=y.indexOf(arguments[h]))&&(p=!0,y.splice(f,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&p&&this.requestRenderAll(),this},forEachObject:function(y,f){for(var p=this.getObjects(),h=0,a=p.length;h<a;h++)y.call(f,p[h],h,p);return this},getObjects:function(y){return typeof y>"u"?this._objects.concat():this._objects.filter(function(f){return f.type===y})},item:function(y){return this._objects[y]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(y,f){return this._objects.indexOf(y)>-1||!!f&&this._objects.some(function(p){return"function"==typeof p.contains&&p.contains(y,!0)})},complexity:function(){return this._objects.reduce(function(y,f){return y+(f.complexity?f.complexity():0)},0)}},C.CommonMethods={_setOptions:function(y){for(var f in y)this.set(f,y[f])},_initGradient:function(y,f){y&&y.colorStops&&!(y instanceof C.Gradient)&&this.set(f,new C.Gradient(y))},_initPattern:function(y,f,p){!y||!y.source||y instanceof C.Pattern?p&&p():this.set(f,new C.Pattern(y,p))},_setObject:function(y){for(var f in y)this._set(f,y[f])},set:function(y,f){return"object"==typeof y?this._setObject(y):this._set(y,f),this},_set:function(y,f){this[y]=f},toggle:function(y){var f=this.get(y);return"boolean"==typeof f&&this.set(y,!f),this},get:function(y){return this[y]}},y=Re,f=Math.sqrt,p=Math.atan2,h=Math.pow,a=Math.PI/180,u=Math.PI/2,C.util={cos:function(o){if(0===o)return 1;switch(o<0&&(o=-o),o/u){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},sin:function(o){if(0===o)return 0;var g=1;switch(o<0&&(g=-1),o/u){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(o)},removeFromArray:function(o,c){var g=o.indexOf(c);return-1!==g&&o.splice(g,1),o},getRandomInt:function(o,c){return Math.floor(Math.random()*(c-o+1))+o},degreesToRadians:function(o){return o*a},radiansToDegrees:function(o){return o/a},rotatePoint:function(o,c,g){var l=new C.Point(o.x-c.x,o.y-c.y),m=C.util.rotateVector(l,g);return new C.Point(m.x,m.y).addEquals(c)},rotateVector:function(o,c){var g=C.util.sin(c),l=C.util.cos(c);return{x:o.x*l-o.y*g,y:o.x*g+o.y*l}},createVector:function(o,c){return new C.Point(c.x-o.x,c.y-o.y)},calcAngleBetweenVectors:function(o,c){return Math.acos((o.x*c.x+o.y*c.y)/(Math.hypot(o.x,o.y)*Math.hypot(c.x,c.y)))},getHatVector:function(o){return new C.Point(o.x,o.y).multiply(1/Math.hypot(o.x,o.y))},getBisector:function(o,c,g){var l=C.util.createVector(o,c),m=C.util.createVector(o,g),_=C.util.calcAngleBetweenVectors(l,m),w=C.util.calcAngleBetweenVectors(C.util.rotateVector(l,_),m);return{vector:C.util.getHatVector(C.util.rotateVector(l,_*(0===w?1:-1)/2)),angle:_}},projectStrokeOnPoints:function(o,c,g){var l=[],m=c.strokeWidth/2,_=c.strokeUniform?new C.Point(1/c.scaleX,1/c.scaleY):new C.Point(1,1),w=function(b){var E=m/Math.hypot(b.x,b.y);return new C.Point(b.x*E*_.x,b.y*E*_.y)};return o.length<=1||o.forEach(function(b,E){var F,B,A=new C.Point(b.x,b.y);0===E?(B=o[E+1],F=g?w(C.util.createVector(B,A)).addEquals(A):o[o.length-1]):E===o.length-1?(F=o[E-1],B=g?w(C.util.createVector(F,A)).addEquals(A):o[0]):(F=o[E-1],B=o[E+1]);var he,pe,z=C.util.getBisector(A,F,B),ie=z.vector;if("miter"===c.strokeLineJoin&&(he=-m/Math.sin(z.angle/2),pe=new C.Point(ie.x*he*_.x,ie.y*he*_.y),Math.hypot(pe.x,pe.y)/m<=c.strokeMiterLimit))return l.push(A.add(pe)),void l.push(A.subtract(pe));he=-m*Math.SQRT2,pe=new C.Point(ie.x*he*_.x,ie.y*he*_.y),l.push(A.add(pe)),l.push(A.subtract(pe))}),l},transformPoint:function(o,c,g){return g?new C.Point(c[0]*o.x+c[2]*o.y,c[1]*o.x+c[3]*o.y):new C.Point(c[0]*o.x+c[2]*o.y+c[4],c[1]*o.x+c[3]*o.y+c[5])},makeBoundingBoxFromPoints:function(o,c){if(c)for(var g=0;g<o.length;g++)o[g]=C.util.transformPoint(o[g],c);var l=[o[0].x,o[1].x,o[2].x,o[3].x],m=C.util.array.min(l),w=C.util.array.max(l)-m,b=[o[0].y,o[1].y,o[2].y,o[3].y],E=C.util.array.min(b);return{left:m,top:E,width:w,height:C.util.array.max(b)-E}},invertTransform:function(o){var c=1/(o[0]*o[3]-o[1]*o[2]),g=[c*o[3],-c*o[1],-c*o[2],c*o[0]],l=C.util.transformPoint({x:o[4],y:o[5]},g,!0);return g[4]=-l.x,g[5]=-l.y,g},toFixed:function(o,c){return parseFloat(Number(o).toFixed(c))},parseUnit:function(o,c){var g=/\D{0,2}$/.exec(o),l=parseFloat(o);switch(c||(c=C.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return l*C.DPI/25.4;case"cm":return l*C.DPI/2.54;case"in":return l*C.DPI;case"pt":return l*C.DPI/72;case"pc":return l*C.DPI/72*12;case"em":return l*c;default:return l}},falseFunction:function(){return!1},getKlass:function(o,c){return o=C.util.string.camelize(o.charAt(0).toUpperCase()+o.slice(1)),C.util.resolveNamespace(c)[o]},getSvgAttributes:function(o){var c=["instantiated_by_use","style","id","class"];switch(o){case"linearGradient":c=c.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":c=c.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":c=c.concat(["offset","stop-color","stop-opacity"])}return c},resolveNamespace:function(o){if(!o)return C;var l,c=o.split("."),g=c.length,m=y||C.window;for(l=0;l<g;++l)m=m[c[l]];return m},loadImage:function(o,c,g,l){if(o){var m=C.util.createImage(),_=function(){c&&c.call(g,m,!1),m=m.onload=m.onerror=null};m.onload=_,m.onerror=function(){C.log("Error loading "+m.src),c&&c.call(g,null,!0),m=m.onload=m.onerror=null},0!==o.indexOf("data")&&null!=l&&(m.crossOrigin=l),"data:image/svg"===o.substring(0,14)&&(m.onload=null,C.util.loadImageInDom(m,_)),m.src=o}else c&&c.call(g,o)},loadImageInDom:function(o,c){var g=C.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(o),C.document.querySelector("body").appendChild(g),o.onload=function(){c(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(o,c,g,l){var m=[],_=0,w=(o=o||[]).length;function b(){++_===w&&c&&c(m.filter(function(E){return E}))}w?o.forEach(function(E,A){E&&E.type?C.util.getKlass(E.type,g).fromObject(E,function(B,z){z||(m[A]=B),l&&l(E,B,z),b()}):b()}):c&&c(m)},enlivenObjectEnlivables:function(o,c,g){var l=C.Object.ENLIVEN_PROPS.filter(function(m){return!!o[m]});C.util.enlivenObjects(l.map(function(m){return o[m]}),function(m){var _={};l.forEach(function(w,b){_[w]=m[b],c&&(c[w]=m[b])}),g&&g(_)})},enlivenPatterns:function(o,c){function g(){++m===_&&c&&c(l)}var l=[],m=0,_=(o=o||[]).length;_?o.forEach(function(w,b){w&&w.source?new C.Pattern(w,function(E){l[b]=E,g()}):(l[b]=w,g())}):c&&c(l)},groupSVGElements:function(o,c,g){var l;return o&&1===o.length?(typeof g<"u"&&(o[0].sourcePath=g),o[0]):(c&&(c.width&&c.height?c.centerPoint={x:c.width/2,y:c.height/2}:(delete c.width,delete c.height)),l=new C.Group(o,c),typeof g<"u"&&(l.sourcePath=g),l)},populateWithProperties:function(o,c,g){if(g&&Array.isArray(g))for(var l=0,m=g.length;l<m;l++)g[l]in o&&(c[g[l]]=o[g[l]])},createCanvasElement:function(){return C.document.createElement("canvas")},copyCanvasElement:function(o){var c=C.util.createCanvasElement();return c.width=o.width,c.height=o.height,c.getContext("2d").drawImage(o,0,0),c},toDataURL:function(o,c,g){return o.toDataURL("image/"+c,g)},createImage:function(){return C.document.createElement("img")},multiplyTransformMatrices:function(o,c,g){return[o[0]*c[0]+o[2]*c[1],o[1]*c[0]+o[3]*c[1],o[0]*c[2]+o[2]*c[3],o[1]*c[2]+o[3]*c[3],g?0:o[0]*c[4]+o[2]*c[5]+o[4],g?0:o[1]*c[4]+o[3]*c[5]+o[5]]},qrDecompose:function(o){var c=p(o[1],o[0]),g=h(o[0],2)+h(o[1],2),l=f(g),m=(o[0]*o[3]-o[2]*o[1])/l,_=p(o[0]*o[2]+o[1]*o[3],g);return{angle:c/a,scaleX:l,scaleY:m,skewX:_/a,skewY:0,translateX:o[4],translateY:o[5]}},calcRotateMatrix:function(o){if(!o.angle)return C.iMatrix.concat();var c=C.util.degreesToRadians(o.angle),g=C.util.cos(c),l=C.util.sin(c);return[g,l,-l,g,0,0]},calcDimensionsMatrix:function(o){var c=typeof o.scaleX>"u"?1:o.scaleX,g=typeof o.scaleY>"u"?1:o.scaleY,l=[o.flipX?-c:c,0,0,o.flipY?-g:g,0,0],m=C.util.multiplyTransformMatrices,_=C.util.degreesToRadians;return o.skewX&&(l=m(l,[1,0,Math.tan(_(o.skewX)),1],!0)),o.skewY&&(l=m(l,[1,Math.tan(_(o.skewY)),0,1],!0)),l},composeMatrix:function(o){var c=[1,0,0,1,o.translateX||0,o.translateY||0],g=C.util.multiplyTransformMatrices;return o.angle&&(c=g(c,C.util.calcRotateMatrix(o))),(1!==o.scaleX||1!==o.scaleY||o.skewX||o.skewY||o.flipX||o.flipY)&&(c=g(c,C.util.calcDimensionsMatrix(o))),c},resetObjectTransform:function(o){o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},saveObjectTransform:function(o){return{scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}},isTransparent:function(o,c,g,l){l>0&&(c>l?c-=l:c=0,g>l?g-=l:g=0);var _,m=!0,b=o.getImageData(c,g,2*l||1,2*l||1),E=b.data.length;for(_=3;_<E&&0!=(m=b.data[_]<=0);_+=4);return b=null,m},parsePreserveAspectRatioAttribute:function(o){var _,c="meet",m=o.split(" ");return m&&m.length&&("meet"!==(c=m.pop())&&"slice"!==c?(_=c,c="meet"):m.length&&(_=m.pop())),{meetOrSlice:c,alignX:"none"!==_?_.slice(1,4):"none",alignY:"none"!==_?_.slice(5,8):"none"}},clearFabricFontCache:function(o){(o=(o||"").toLowerCase())?C.charWidthsCache[o]&&delete C.charWidthsCache[o]:C.charWidthsCache={}},limitDimsByArea:function(o,c){var g=Math.sqrt(c*o),l=Math.floor(c/g);return{x:Math.floor(g),y:l}},capValue:function(o,c,g){return Math.max(o,Math.min(c,g))},findScaleToFit:function(o,c){return Math.min(c.width/o.width,c.height/o.height)},findScaleToCover:function(o,c){return Math.max(c.width/o.width,c.height/o.height)},matrixToSVG:function(o){return"matrix("+o.map(function(c){return C.util.toFixed(c,C.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(o,c){var g=C.util.invertTransform(c),l=C.util.multiplyTransformMatrices(g,o.calcOwnMatrix());C.util.applyTransformToObject(o,l)},addTransformToObject:function(o,c){C.util.applyTransformToObject(o,C.util.multiplyTransformMatrices(c,o.calcOwnMatrix()))},applyTransformToObject:function(o,c){var g=C.util.qrDecompose(c),l=new C.Point(g.translateX,g.translateY);o.flipX=!1,o.flipY=!1,o.set("scaleX",g.scaleX),o.set("scaleY",g.scaleY),o.skewX=g.skewX,o.skewY=g.skewY,o.angle=g.angle,o.setPositionByOrigin(l,"center","center")},sizeAfterTransform:function(o,c,g){var l=o/2,m=c/2,_=[{x:-l,y:-m},{x:l,y:-m},{x:-l,y:m},{x:l,y:m}],w=C.util.calcDimensionsMatrix(g),b=C.util.makeBoundingBoxFromPoints(_,w);return{x:b.width,y:b.height}},mergeClipPaths:function(o,c){var g=o,l=c;g.inverted&&!l.inverted&&(g=c,l=o),C.util.applyTransformToObject(l,C.util.multiplyTransformMatrices(C.util.invertTransform(g.calcTransformMatrix()),l.calcTransformMatrix()));var m=g.inverted&&l.inverted;return m&&(g.inverted=l.inverted=!1),new C.Group([g],{clipPath:l,inverted:m})},hasStyleChanged:function(o,c,g){return g=g||!1,o.fill!==c.fill||o.stroke!==c.stroke||o.strokeWidth!==c.strokeWidth||o.fontSize!==c.fontSize||o.fontFamily!==c.fontFamily||o.fontWeight!==c.fontWeight||o.fontStyle!==c.fontStyle||o.deltaY!==c.deltaY||g&&(o.overline!==c.overline||o.underline!==c.underline||o.linethrough!==c.linethrough)},stylesToArray:function(g,c){g=C.util.object.clone(g,!0);for(var l=c.split("\n"),m=-1,_={},w=[],b=0;b<l.length;b++)if(g[b])for(var E=0;E<l[b].length;E++){m++;var A=g[b][E];A&&(C.util.hasStyleChanged(_,A,!0)?w.push({start:m,end:m+1,style:A}):w[w.length-1].end++),_=A||{}}else m+=l[b].length;return w},stylesFromArray:function(o,c){if(!Array.isArray(o))return o;for(var g=c.split("\n"),l=-1,m=0,_={},w=0;w<g.length;w++)for(var b=0;b<g[w].length;b++)l++,o[m]&&o[m].start<=l&&l<o[m].end&&(_[w]=_[w]||{},_[w][b]=Object.assign({},o[m].style),l===o[m].end-1&&m++);return _}},function(){var y=Array.prototype.join,f={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},p={m:"l",M:"L"};function h(M,k,L,R,W,P,I,j,H,q,$){var ne=C.util.cos(M),oe=C.util.sin(M),de=C.util.cos(k),Y=C.util.sin(k),V=L*W*de-R*P*Y+I,Z=R*W*de+L*P*Y+j;return["C",q+H*(-L*W*oe-R*P*ne),$+H*(-R*W*oe+L*P*ne),V+H*(L*W*Y+R*P*de),Z+H*(R*W*Y-L*P*de),V,Z]}function u(M,k,L,R){var W=Math.atan2(k,M),P=Math.atan2(R,L);return P>=W?P-W:2*Math.PI-(W-P)}function c(M,k,L){for(var $=function a(M,k,L,R,W,P,I){var j=Math.PI,H=I*j/180,q=C.util.sin(H),$=C.util.cos(H),ne=0,oe=0,de=-$*M*.5-q*k*.5,Y=-$*k*.5+q*M*.5,V=(L=Math.abs(L))*L,Z=(R=Math.abs(R))*R,J=Y*Y,X=de*de,te=V*Z-V*J-Z*X,ge=0;if(te<0){var Fe=Math.sqrt(1-te/(V*Z));L*=Fe,R*=Fe}else ge=(W===P?-1:1)*Math.sqrt(te/(V*J+Z*X));var we=ge*L*Y/R,K=-ge*R*de/L,Se=$*we-q*K+.5*M,je=q*we+$*K+.5*k,He=u(1,0,(de-we)/L,(Y-K)/R),st=u((de-we)/L,(Y-K)/R,(-de-we)/L,(-Y-K)/R);0===P&&st>0?st-=2*j:1===P&&st<0&&(st+=2*j);for(var Ze=Math.ceil(Math.abs(st/j*2)),Mt=[],yt=st/Ze,Vn=8/3*Math.sin(yt/4)*Math.sin(yt/4)/Math.sin(yt/2),ki=He+yt,pn=0;pn<Ze;pn++)Mt[pn]=h(He,ki,$,q,L,R,Se,je,Vn,ne,oe),ne=Mt[pn][5],oe=Mt[pn][6],He=ki,ki+=yt;return Mt}(L[6]-M,L[7]-k,L[1],L[2],L[4],L[5],L[3]),ne=0,oe=$.length;ne<oe;ne++)$[ne][1]+=M,$[ne][2]+=k,$[ne][3]+=M,$[ne][4]+=k,$[ne][5]+=M,$[ne][6]+=k;return $}function l(M,k,L,R){return Math.sqrt((L-M)*(L-M)+(R-k)*(R-k))}function E(M,k,L,R,W,P,I,j){return function(H){var q=function m(M){return M*M*M}(H),$=function _(M){return 3*M*M*(1-M)}(H),ne=function w(M){return 3*M*(1-M)*(1-M)}(H),oe=function b(M){return(1-M)*(1-M)*(1-M)}(H);return{x:I*q+W*$+L*ne+M*oe,y:j*q+P*$+R*ne+k*oe}}}function A(M,k,L,R,W,P,I,j){return function(H){var q=1-H;return Math.atan2(3*q*q*(R-k)+6*q*H*(P-R)+3*H*H*(j-P),3*q*q*(L-M)+6*q*H*(W-L)+3*H*H*(I-W))}}function ie(M,k,L,R,W,P){return function(I){var j=function F(M){return M*M}(I),H=function B(M){return 2*M*(1-M)}(I),q=function z(M){return(1-M)*(1-M)}(I);return{x:W*j+L*H+M*q,y:P*j+R*H+k*q}}}function ue(M,k,L,R,W,P){return function(I){var j=1-I;return Math.atan2(2*j*(R-k)+2*I*(P-R),2*j*(L-M)+2*I*(W-L))}}function he(M,k,L){var W,I,R={x:k,y:L},P=0;for(I=1;I<=100;I+=1)W=M(I/100),P+=l(R.x,R.y,W.x,W.y),R=W;return P}function ce(M){for(var R,q,$,ne,k=0,L=M.length,W=0,P=0,I=0,j=0,H=[],oe=0;oe<L;oe++){switch($={x:W,y:P,command:(R=M[oe])[0]},R[0]){case"M":$.length=0,I=W=R[1],j=P=R[2];break;case"L":$.length=l(W,P,R[1],R[2]),W=R[1],P=R[2];break;case"C":q=E(W,P,R[1],R[2],R[3],R[4],R[5],R[6]),ne=A(W,P,R[1],R[2],R[3],R[4],R[5],R[6]),$.iterator=q,$.angleFinder=ne,$.length=he(q,W,P),W=R[5],P=R[6];break;case"Q":q=ie(W,P,R[1],R[2],R[3],R[4]),ne=ue(W,P,R[1],R[2],R[3],R[4]),$.iterator=q,$.angleFinder=ne,$.length=he(q,W,P),W=R[3],P=R[4];break;case"Z":case"z":$.destX=I,$.destY=j,$.length=l(W,P,I,j),W=I,P=j}k+=$.length,H.push($)}return H.push({length:k,x:W,y:P}),H}C.util.joinPath=function(M){return M.map(function(k){return k.join(" ")}).join(" ")},C.util.parsePath=function xe(M){var R,W,ne,oe,de,k=[],L=[],P=C.rePathCommand,I="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",j="("+I+")"+C.commaWsp,H="([01])"+C.commaWsp+"?",$=new RegExp(j+"?"+j+"?"+j+H+H+j+"?("+I+")","g");if(!M||!M.match)return k;for(var V,Y=0,Z=(de=M.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;Y<Z;Y++){oe=(R=de[Y]).slice(1).trim(),L.length=0;var J=R.charAt(0);if(V=[J],"a"===J.toLowerCase())for(var X;X=$.exec(oe);)for(var te=1;te<X.length;te++)L.push(X[te]);else for(;ne=P.exec(oe);)L.push(ne[0]);te=0;for(var ge=L.length;te<ge;te++)W=parseFloat(L[te]),isNaN(W)||V.push(W);var Fe=f[J.toLowerCase()],we=p[J]||J;if(V.length-1>Fe)for(var K=1,Se=V.length;K<Se;K+=Fe)k.push([J].concat(V.slice(K,K+Fe))),J=we;else k.push(V)}return k},C.util.makePathSimpler=function g(M){var I,j,H,$,ne,oe,k=0,L=0,R=M.length,W=0,P=0,q=[];for(j=0;j<R;++j){switch(H=!1,(I=M[j].slice(0))[0]){case"l":I[0]="L",I[1]+=k,I[2]+=L;case"L":k=I[1],L=I[2];break;case"h":I[1]+=k;case"H":I[0]="L",I[2]=L,k=I[1];break;case"v":I[1]+=L;case"V":I[0]="L",L=I[1],I[1]=k,I[2]=L;break;case"m":I[0]="M",I[1]+=k,I[2]+=L;case"M":k=I[1],L=I[2],W=I[1],P=I[2];break;case"c":I[0]="C",I[1]+=k,I[2]+=L,I[3]+=k,I[4]+=L,I[5]+=k,I[6]+=L;case"C":ne=I[3],oe=I[4],k=I[5],L=I[6];break;case"s":I[0]="S",I[1]+=k,I[2]+=L,I[3]+=k,I[4]+=L;case"S":"C"===$?(ne=2*k-ne,oe=2*L-oe):(ne=k,oe=L),k=I[3],L=I[4],I[0]="C",I[5]=I[3],I[6]=I[4],I[3]=I[1],I[4]=I[2],I[1]=ne,I[2]=oe,ne=I[3],oe=I[4];break;case"q":I[0]="Q",I[1]+=k,I[2]+=L,I[3]+=k,I[4]+=L;case"Q":ne=I[1],oe=I[2],k=I[3],L=I[4];break;case"t":I[0]="T",I[1]+=k,I[2]+=L;case"T":"Q"===$?(ne=2*k-ne,oe=2*L-oe):(ne=k,oe=L),I[0]="Q",k=I[1],L=I[2],I[1]=ne,I[2]=oe,I[3]=k,I[4]=L;break;case"a":I[0]="A",I[6]+=k,I[7]+=L;case"A":H=!0,q=q.concat(c(k,L,I)),k=I[6],L=I[7];break;case"z":case"Z":k=W,L=P}H||q.push(I),$=I[0]}return q},C.util.getSmoothPathFromPoints=function ve(M,k){var R,L=[],W=new C.Point(M[0].x,M[0].y),P=new C.Point(M[1].x,M[1].y),I=M.length,j=1,H=0,q=I>2;for(q&&(j=M[2].x<P.x?-1:M[2].x===P.x?0:1,H=M[2].y<P.y?-1:M[2].y===P.y?0:1),L.push(["M",W.x-j*(k=k||0),W.y-H*k]),R=1;R<I;R++){if(!W.eq(P)){var $=W.midPointFrom(P);L.push(["Q",W.x,W.y,$.x,$.y])}W=M[R],R+1<M.length&&(P=M[R+1])}return q&&(j=W.x>M[R-2].x?1:W.x===M[R-2].x?0:-1,H=W.y>M[R-2].y?1:W.y===M[R-2].y?0:-1),L.push(["L",W.x+j*k,W.y+H*k]),L},C.util.getPathSegmentsInfo=ce,C.util.getBoundsOfCurve=function o(M,k,L,R,W,P,I,j){var H;if(C.cachesBoundsOfCurve&&(H=y.call(arguments),C.boundsOfCurveCache[H]))return C.boundsOfCurveCache[H];var V,Z,J,X,te,ge,Fe,we,q=Math.sqrt,$=Math.min,ne=Math.max,oe=Math.abs,de=[],Y=[[],[]];Z=6*M-12*L+6*W,V=-3*M+9*L-9*W+3*I,J=3*L-3*M;for(var K=0;K<2;++K)if(K>0&&(Z=6*k-12*R+6*P,V=-3*k+9*R-9*P+3*j,J=3*R-3*k),oe(V)<1e-12){if(oe(Z)<1e-12)continue;0<(X=-J/Z)&&X<1&&de.push(X)}else!((Fe=Z*Z-4*J*V)<0)&&(0<(te=(-Z+(we=q(Fe)))/(2*V))&&te<1&&de.push(te),0<(ge=(-Z-we)/(2*V))&&ge<1&&de.push(ge));for(var Ze,He=de.length,st=He;He--;)Y[0][He]=(Ze=1-(X=de[He]))*Ze*Ze*M+3*Ze*Ze*X*L+3*Ze*X*X*W+X*X*X*I,Y[1][He]=Ze*Ze*Ze*k+3*Ze*Ze*X*R+3*Ze*X*X*P+X*X*X*j;Y[0][st]=M,Y[1][st]=k,Y[0][st+1]=I,Y[1][st+1]=j;var Mt=[{x:$.apply(null,Y[0]),y:$.apply(null,Y[1])},{x:ne.apply(null,Y[0]),y:ne.apply(null,Y[1])}];return C.cachesBoundsOfCurve&&(C.boundsOfCurveCache[H]=Mt),Mt},C.util.getPointOnPath=function fe(M,k,L){L||(L=ce(M));for(var R=0;k-L[R].length>0&&R<L.length-2;)k-=L[R].length,R++;var H,W=L[R],P=k/W.length,j=M[R];switch(W.command){case"M":return{x:W.x,y:W.y,angle:0};case"Z":case"z":return(H=new C.Point(W.x,W.y).lerp(new C.Point(W.destX,W.destY),P)).angle=Math.atan2(W.destY-W.y,W.destX-W.x),H;case"L":return(H=new C.Point(W.x,W.y).lerp(new C.Point(j[1],j[2]),P)).angle=Math.atan2(j[2]-W.y,j[1]-W.x),H;case"C":case"Q":return function pe(M,k){for(var I,j,$,L=0,R=0,W=M.iterator,P={x:M.x,y:M.y},H=.01,q=M.angleFinder;R<k&&H>1e-4;)I=W(L),$=L,(j=l(P.x,P.y,I.x,I.y))+R>k?(L-=H,H/=2):(P=I,L+=H,R+=j);return I.angle=q($),I}(W,k)}},C.util.transformPath=function Ce(M,k,L){return L&&(k=C.util.multiplyTransformMatrices(k,[1,0,0,1,-L.x,-L.y])),M.map(function(R){for(var W=R.slice(0),P={},I=1;I<R.length-1;I+=2)P.x=R[I],P.y=R[I+1],P=C.util.transformPoint(P,k),W[I]=P.x,W[I+1]=P.y;return W})}}(),function(){var y=Array.prototype.slice;function u(o,c,g){if(o&&0!==o.length){var l=o.length-1,m=c?o[l][c]:o[l];if(c)for(;l--;)g(o[l][c],m)&&(m=o[l][c]);else for(;l--;)g(o[l],m)&&(m=o[l]);return m}}C.util.array={fill:function a(o,c){for(var g=o.length;g--;)o[g]=c;return o},invoke:function f(o,c){for(var g=y.call(arguments,2),l=[],m=0,_=o.length;m<_;m++)l[m]=g.length?o[m][c].apply(o[m],g):o[m][c].call(o[m]);return l},min:function h(o,c){return u(o,c,function(g,l){return g<l})},max:function p(o,c){return u(o,c,function(g,l){return g>=l})}}}(),function(){function y(p,h,a){if(a)if(!C.isLikelyNode&&h instanceof Element)p=h;else if(h instanceof Array){p=[];for(var u=0,o=h.length;u<o;u++)p[u]=y({},h[u],a)}else if(h&&"object"==typeof h)for(var c in h)"canvas"===c||"group"===c?p[c]=null:h.hasOwnProperty(c)&&(p[c]=y({},h[c],a));else p=h;else for(var c in h)p[c]=h[c];return p}C.util.object={extend:y,clone:function f(p,h){return y({},p,h)}},C.util.object.extend(C.util,C.Observable)}(),function(){function a(u,o){var c=u.charCodeAt(o);if(isNaN(c))return"";if(c<55296||c>57343)return u.charAt(o);if(55296<=c&&c<=56319){if(u.length<=o+1)throw"High surrogate without following low surrogate";var g=u.charCodeAt(o+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return u.charAt(o)+u.charAt(o+1)}if(0===o)throw"Low surrogate without preceding high surrogate";var l=u.charCodeAt(o-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}C.util.string={camelize:function y(u){return u.replace(/-+(.)?/g,function(o,c){return c?c.toUpperCase():""})},capitalize:function f(u,o){return u.charAt(0).toUpperCase()+(o?u.slice(1):u.slice(1).toLowerCase())},escapeXml:function p(u){return u.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function h(u){var c,o=0,g=[];for(o=0;o<u.length;o++)!1!==(c=a(u,o))&&g.push(c);return g}}}(),function(){var y=Array.prototype.slice,f=function(){},p=function(){for(var c in{toString:1})if("toString"===c)return!1;return!0}(),h=function(c,g,l){for(var m in g)c.prototype[m]=m in c.prototype&&"function"==typeof c.prototype[m]&&(g[m]+"").indexOf("callSuper")>-1?function(_){return function(){var w=this.constructor.superclass;this.constructor.superclass=l;var b=g[_].apply(this,arguments);if(this.constructor.superclass=w,"initialize"!==_)return b}}(m):g[m],p&&(g.toString!==Object.prototype.toString&&(c.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(c.prototype.valueOf=g.valueOf))};function a(){}function u(c){for(var g=null,l=this;l.constructor.superclass;){var m=l.constructor.superclass.prototype[c];if(l[c]!==m){g=m;break}l=l.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,y.call(arguments,1)):g.call(this):console.log("tried to callSuper "+c+", method not found in prototype chain",this)}C.util.createClass=function o(){var c=null,g=y.call(arguments,0);function l(){this.initialize.apply(this,arguments)}"function"==typeof g[0]&&(c=g.shift()),l.superclass=c,l.subclasses=[],c&&(a.prototype=c.prototype,l.prototype=new a,c.subclasses.push(l));for(var m=0,_=g.length;m<_;m++)h(l,g[m],c);return l.prototype.initialize||(l.prototype.initialize=f),l.prototype.constructor=l,l.prototype.callSuper=u,l}}(),function(){var y=!!C.document.createElement("div").attachEvent,f=["touchstart","touchmove","touchend"];C.util.addListener=function(h,a,u,o){h&&h.addEventListener(a,u,!y&&o)},C.util.removeListener=function(h,a,u,o){h&&h.removeEventListener(a,u,!y&&o)},C.util.getPointer=function(h){var u=C.util.getScrollLeftTop(h.target),o=function p(h){var a=h.changedTouches;return a&&a[0]?a[0]:h}(h);return{x:o.clientX+u.left,y:o.clientY+u.top}},C.util.isTouchEvent=function(h){return f.indexOf(h.type)>-1||"touch"===h.pointerType}}(),function(){var f=C.document.createElement("div"),a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,u=function(o){return o};"string"==typeof f.style.opacity?u=function(o,c){return o.style.opacity=c,o}:"string"==typeof f.style.filter&&(u=function(o,c){var g=o.style;return o.currentStyle&&!o.currentStyle.hasLayout&&(g.zoom=1),a.test(g.filter)?g.filter=g.filter.replace(a,c=c>=.9999?"":"alpha(opacity="+100*c+")"):g.filter+=" alpha(opacity="+100*c+")",o}),C.util.setStyle=function y(o,c){var g=o.style;if(!g)return o;if("string"==typeof c)return o.style.cssText+=";"+c,c.indexOf("opacity")>-1?u(o,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):o;for(var l in c)"opacity"===l?u(o,c[l]):g.setProperty("float"===l||"cssFloat"===l?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":l,c[l]);return o}}(),function(){var p,l,b,E,y=Array.prototype.slice,h=function(b){return y.call(b,0)};try{p=h(C.document.childNodes)instanceof Array}catch{}function a(b,E){var A=C.document.createElement(b);for(var F in E)"class"===F?A.className=E[F]:"for"===F?A.htmlFor=E[F]:A.setAttribute(F,E[F]);return A}function c(b){for(var E=0,A=0,F=C.document.documentElement,B=C.document.body||{scrollLeft:0,scrollTop:0};b&&(b.parentNode||b.host)&&((b=b.parentNode||b.host)===C.document?(E=B.scrollLeft||F.scrollLeft||0,A=B.scrollTop||F.scrollTop||0):(E+=b.scrollLeft||0,A+=b.scrollTop||0),1!==b.nodeType||"fixed"!==b.style.position););return{left:E,top:A}}p||(h=function(b){for(var E=new Array(b.length),A=b.length;A--;)E[A]=b[A];return E}),l=C.document.defaultView&&C.document.defaultView.getComputedStyle?function(b,E){var A=C.document.defaultView.getComputedStyle(b,null);return A?A[E]:void 0}:function(b,E){var A=b.style[E];return!A&&b.currentStyle&&(A=b.currentStyle[E]),A},E="userSelect"in(b=C.document.documentElement.style)?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"",C.util.makeElementUnselectable=function A(B){return typeof B.onselectstart<"u"&&(B.onselectstart=C.util.falseFunction),E?B.style[E]="none":"string"==typeof B.unselectable&&(B.unselectable="on"),B},C.util.makeElementSelectable=function F(B){return typeof B.onselectstart<"u"&&(B.onselectstart=null),E?B.style[E]="":"string"==typeof B.unselectable&&(B.unselectable=""),B},C.util.setImageSmoothing=function w(b,E){b.imageSmoothingEnabled=b.imageSmoothingEnabled||b.webkitImageSmoothingEnabled||b.mozImageSmoothingEnabled||b.msImageSmoothingEnabled||b.oImageSmoothingEnabled,b.imageSmoothingEnabled=E},C.util.getById=function f(b){return"string"==typeof b?C.document.getElementById(b):b},C.util.toArray=h,C.util.addClass=function u(b,E){b&&-1===(" "+b.className+" ").indexOf(" "+E+" ")&&(b.className+=(b.className?" ":"")+E)},C.util.makeElement=a,C.util.wrapElement=function o(b,E,A){return"string"==typeof E&&(E=a(E,A)),b.parentNode&&b.parentNode.replaceChild(E,b),E.appendChild(b),E},C.util.getScrollLeftTop=c,C.util.getElementOffset=function g(b){var E,z,A=b&&b.ownerDocument,F={left:0,top:0},B={left:0,top:0},ie={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!A)return B;for(var ue in ie)B[ie[ue]]+=parseInt(l(b,ue),10)||0;return E=A.documentElement,typeof b.getBoundingClientRect<"u"&&(F=b.getBoundingClientRect()),z=c(b),{left:F.left+z.left-(E.clientLeft||0)+B.left,top:F.top+z.top-(E.clientTop||0)+B.top}},C.util.getNodeCanvas=function m(b){var E=C.jsdomImplForWrapper(b);return E._canvas||E._image},C.util.cleanUpJsdomNode=function _(b){if(C.isLikelyNode){var E=C.jsdomImplForWrapper(b);E&&(E._image=null,E._canvas=null,E._currentSrc=null,E._attributes=null,E._classList=null)}}}(),function(){function f(){}C.util.request=function p(h,a){a||(a={});var u=a.method?a.method.toUpperCase():"GET",o=a.onComplete||function(){},c=new C.window.XMLHttpRequest,g=a.body||a.parameters;return c.onreadystatechange=function(){4===c.readyState&&(o(c),c.onreadystatechange=f)},"GET"===u&&(g=null,"string"==typeof a.parameters&&(h=function y(h,a){return h+(/\?/.test(h)?"&":"?")+a}(h,a.parameters))),c.open(u,h,!0),("POST"===u||"PUT"===u)&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(g),c}}(),C.log=console.log,C.warn=console.warn,function(){var y=C.util.object.extend,f=C.util.object.clone,p=[];function h(){return!1}function a(m,_,w,b){return-w*Math.cos(m/b*(Math.PI/2))+w+_}C.util.object.extend(p,{cancelAll:function(){var m=this.splice(0);return m.forEach(function(_){_.cancel()}),m},cancelByCanvas:function(m){if(!m)return[];var _=this.filter(function(w){return"object"==typeof w.target&&w.target.canvas===m});return _.forEach(function(w){w.cancel()}),_},cancelByTarget:function(m){var _=this.findAnimationsByTarget(m);return _.forEach(function(w){w.cancel()}),_},findAnimationIndex:function(m){return this.indexOf(this.findAnimation(m))},findAnimation:function(m){return this.find(function(_){return _.cancel===m})},findAnimationsByTarget:function(m){return m?this.filter(function(_){return _.target===m}):[]}});var o=C.window.requestAnimationFrame||C.window.webkitRequestAnimationFrame||C.window.mozRequestAnimationFrame||C.window.oRequestAnimationFrame||C.window.msRequestAnimationFrame||function(m){return C.window.setTimeout(m,1e3/60)},c=C.window.cancelAnimationFrame||C.window.clearTimeout;function g(){return o.apply(C.window,arguments)}C.util.animate=function u(m){m||(m={});var w,_=!1,b=function(){var E=C.runningAnimations.indexOf(w);return E>-1&&C.runningAnimations.splice(E,1)[0]};return w=y(f(m),{cancel:function(){return _=!0,b()},currentValue:"startValue"in m?m.startValue:0,completionRate:0,durationRate:0}),C.runningAnimations.push(w),g(function(E){var z,A=E||+new Date,F=m.duration||500,B=A+F,ie=m.onChange||h,ue=m.abort||h,he=m.onComplete||h,pe=m.easing||a,ce="startValue"in m&&m.startValue.length>0,fe="startValue"in m?m.startValue:0,xe="endValue"in m?m.endValue:100,ve=m.byValue||(ce?fe.map(function(Ce,M){return xe[M]-fe[M]}):xe-fe);m.onStart&&m.onStart(),function Ce(M){var k=(z=M||+new Date)>B?F:z-A,L=k/F,R=ce?fe.map(function(P,I){return pe(k,fe[I],ve[I],F)}):pe(k,fe,ve,F),W=Math.abs(ce?(R[0]-fe[0])/ve[0]:(R-fe)/ve);if(w.currentValue=ce?R.slice():R,w.completionRate=W,w.durationRate=L,!_){if(ue(R,W,L))return void b();if(z>B)return w.currentValue=ce?xe.slice():xe,w.completionRate=1,w.durationRate=1,ie(ce?xe.slice():xe,1,1),he(xe,1,1),void b();ie(R,W,L),g(Ce)}}(A)}),w.cancel},C.util.requestAnimFrame=g,C.util.cancelAnimFrame=function l(){return c.apply(C.window,arguments)},C.runningAnimations=p}(),function(){function y(p,h,a){var u="rgba("+parseInt(p[0]+a*(h[0]-p[0]),10)+","+parseInt(p[1]+a*(h[1]-p[1]),10)+","+parseInt(p[2]+a*(h[2]-p[2]),10);return(u+=","+(p&&h?parseFloat(p[3]+a*(h[3]-p[3])):1))+")"}C.util.animateColor=function f(p,h,a,u){var o=new C.Color(p).getSource(),c=new C.Color(h).getSource(),g=u.onComplete,l=u.onChange;return C.util.animate(C.util.object.extend(u=u||{},{duration:a||500,startValue:o,endValue:c,byValue:c,easing:function(m,_,w,b){return y(_,w,u.colorEasing?u.colorEasing(m,b):1-Math.cos(m/b*(Math.PI/2)))},onComplete:function(m,_,w){if(g)return g(y(c,c,0),_,w)},onChange:function(m,_,w){if(l){if(Array.isArray(m))return l(y(m,m,0),_,w);l(m,_,w)}}}))}}(),function(){function y(M,k,L,R){return M<Math.abs(k)?(M=k,R=L/4):R=0===k&&0===M?L/(2*Math.PI)*Math.asin(1):L/(2*Math.PI)*Math.asin(k/M),{a:M,c:k,p:L,s:R}}function f(M,k,L){return M.a*Math.pow(2,10*(k-=1))*Math.sin((k*L-M.s)*(2*Math.PI)/M.p)}function xe(M,k,L,R){return L-ve(R-M,0,L,R)+k}function ve(M,k,L,R){return(M/=R)<1/2.75?L*(7.5625*M*M)+k:M<2/2.75?L*(7.5625*(M-=1.5/2.75)*M+.75)+k:M<2.5/2.75?L*(7.5625*(M-=2.25/2.75)*M+.9375)+k:L*(7.5625*(M-=2.625/2.75)*M+.984375)+k}C.util.ease={easeInQuad:function(M,k,L,R){return L*(M/=R)*M+k},easeOutQuad:function(M,k,L,R){return-L*(M/=R)*(M-2)+k},easeInOutQuad:function(M,k,L,R){return(M/=R/2)<1?L/2*M*M+k:-L/2*(--M*(M-2)-1)+k},easeInCubic:function(M,k,L,R){return L*(M/=R)*M*M+k},easeOutCubic:function p(M,k,L,R){return L*((M=M/R-1)*M*M+1)+k},easeInOutCubic:function h(M,k,L,R){return(M/=R/2)<1?L/2*M*M*M+k:L/2*((M-=2)*M*M+2)+k},easeInQuart:function a(M,k,L,R){return L*(M/=R)*M*M*M+k},easeOutQuart:function u(M,k,L,R){return-L*((M=M/R-1)*M*M*M-1)+k},easeInOutQuart:function o(M,k,L,R){return(M/=R/2)<1?L/2*M*M*M*M+k:-L/2*((M-=2)*M*M*M-2)+k},easeInQuint:function c(M,k,L,R){return L*(M/=R)*M*M*M*M+k},easeOutQuint:function g(M,k,L,R){return L*((M=M/R-1)*M*M*M*M+1)+k},easeInOutQuint:function l(M,k,L,R){return(M/=R/2)<1?L/2*M*M*M*M*M+k:L/2*((M-=2)*M*M*M*M+2)+k},easeInSine:function m(M,k,L,R){return-L*Math.cos(M/R*(Math.PI/2))+L+k},easeOutSine:function _(M,k,L,R){return L*Math.sin(M/R*(Math.PI/2))+k},easeInOutSine:function w(M,k,L,R){return-L/2*(Math.cos(Math.PI*M/R)-1)+k},easeInExpo:function b(M,k,L,R){return 0===M?k:L*Math.pow(2,10*(M/R-1))+k},easeOutExpo:function E(M,k,L,R){return M===R?k+L:L*(1-Math.pow(2,-10*M/R))+k},easeInOutExpo:function A(M,k,L,R){return 0===M?k:M===R?k+L:(M/=R/2)<1?L/2*Math.pow(2,10*(M-1))+k:L/2*(2-Math.pow(2,-10*--M))+k},easeInCirc:function F(M,k,L,R){return-L*(Math.sqrt(1-(M/=R)*M)-1)+k},easeOutCirc:function B(M,k,L,R){return L*Math.sqrt(1-(M=M/R-1)*M)+k},easeInOutCirc:function z(M,k,L,R){return(M/=R/2)<1?-L/2*(Math.sqrt(1-M*M)-1)+k:L/2*(Math.sqrt(1-(M-=2)*M)+1)+k},easeInElastic:function ie(M,k,L,R){var P=0;return 0===M?k:1==(M/=R)?k+L:(P||(P=.3*R),-f(y(L,L,P,1.70158),M,R)+k)},easeOutElastic:function ue(M,k,L,R){var P=0;if(0===M)return k;if(1==(M/=R))return k+L;P||(P=.3*R);var j=y(L,L,P,1.70158);return j.a*Math.pow(2,-10*M)*Math.sin((M*R-j.s)*(2*Math.PI)/j.p)+j.c+k},easeInOutElastic:function he(M,k,L,R){var P=0;if(0===M)return k;if(2==(M/=R/2))return k+L;P||(P=R*(.3*1.5));var j=y(L,L,P,1.70158);return M<1?-.5*f(j,M,R)+k:j.a*Math.pow(2,-10*(M-=1))*Math.sin((M*R-j.s)*(2*Math.PI)/j.p)*.5+j.c+k},easeInBack:function pe(M,k,L,R,W){return void 0===W&&(W=1.70158),L*(M/=R)*M*((W+1)*M-W)+k},easeOutBack:function ce(M,k,L,R,W){return void 0===W&&(W=1.70158),L*((M=M/R-1)*M*((W+1)*M+W)+1)+k},easeInOutBack:function fe(M,k,L,R,W){return void 0===W&&(W=1.70158),(M/=R/2)<1?L/2*(M*M*((1+(W*=1.525))*M-W))+k:L/2*((M-=2)*M*((1+(W*=1.525))*M+W)+2)+k},easeInBounce:xe,easeOutBounce:ve,easeInOutBounce:function Ce(M,k,L,R){return M<R/2?.5*xe(2*M,0,L,R)+k:.5*ve(2*M-R,0,L,R)+.5*L+k}}}(),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,h=f.util.object.clone,a=f.util.toFixed,u=f.util.parseUnit,o=f.util.multiplyTransformMatrices,_={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},w={stroke:"strokeOpacity",fill:"fillOpacity"},b="font-size",E="clip-path";function A(P){return P in _?_[P]:P}function F(P,I,j,H){var $,q=Array.isArray(I);if("fill"!==P&&"stroke"!==P||"none"!==I){if("strokeUniform"===P)return"non-scaling-stroke"===I;if("strokeDashArray"===P)I="none"===I?null:I.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===P)I=j&&j.transformMatrix?o(j.transformMatrix,f.parseTransformAttribute(I)):f.parseTransformAttribute(I);else if("visible"===P)I="none"!==I&&"hidden"!==I,j&&!1===j.visible&&(I=!1);else if("opacity"===P)I=parseFloat(I),j&&typeof j.opacity<"u"&&(I*=j.opacity);else if("textAnchor"===P)I="start"===I?"left":"end"===I?"right":"center";else if("charSpacing"===P)$=u(I,H)/H*1e3;else if("paintFirst"===P){var ne=I.indexOf("fill"),oe=I.indexOf("stroke");I="fill",(ne>-1&&oe>-1&&oe<ne||-1===ne&&oe>-1)&&(I="stroke")}else{if("href"===P||"xlink:href"===P||"font"===P)return I;if("imageSmoothing"===P)return"optimizeQuality"===I;$=q?I.map(u):u(I,H)}}else I="";return!q&&isNaN($)?I:$}function B(P){return new RegExp("^("+P.join("|")+")\\b","i")}function ie(P,I){var q,$,ne,H=[];for($=0,ne=I.length;$<ne;$++)q=P.getElementsByTagName(I[$]),H=H.concat(Array.prototype.slice.call(q));return H}function ce(P,I){var j,H=!0;return(j=xe(P,I.pop()))&&I.length&&(H=function fe(P,I){for(var j,H=!0;P.parentNode&&1===P.parentNode.nodeType&&I.length;)H&&(j=I.pop()),H=xe(P=P.parentNode,j);return 0===I.length}(P,I)),j&&H&&0===I.length}function xe(P,I){var $,ne,j=P.nodeName,H=P.getAttribute("class"),q=P.getAttribute("id");if($=new RegExp("^"+j,"i"),I=I.replace($,""),q&&I.length&&($=new RegExp("#"+q+"(?![a-zA-Z\\-]+)","i"),I=I.replace($,"")),H&&I.length)for(ne=(H=H.split(" ")).length;ne--;)$=new RegExp("\\."+H[ne]+"(?![a-zA-Z\\-]+)","i"),I=I.replace($,"");return 0===I.length}function ve(P,I){var j;if(P.getElementById&&(j=P.getElementById(I)),j)return j;var H,q,$,ne=P.getElementsByTagName("*");for(q=0,$=ne.length;q<$;q++)if(I===(H=ne[q]).getAttribute("id"))return H}f.svgValidTagNamesRegEx=B(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),f.svgViewBoxElementsRegEx=B(["symbol","image","marker","pattern","view","svg"]),f.svgInvalidAncestorsRegEx=B(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),f.svgValidParentsRegEx=B(["symbol","g","a","svg","clipPath","defs"]),f.cssRules={},f.gradientDefs={},f.clipPaths={},f.parseTransformAttribute=function(){function j(K,Se,je){K[je]=Math.tan(f.util.degreesToRadians(Se[0]))}var q=f.iMatrix,$=f.reNum,ne=f.commaWsp,X="(?:(?:(matrix)\\s*\\(\\s*("+$+")"+ne+"("+$+")"+ne+"("+$+")"+ne+"("+$+")"+ne+"("+$+")"+ne+"("+$+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+$+")(?:"+ne+"("+$+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+$+")(?:"+ne+"("+$+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+$+")(?:"+ne+"("+$+")"+ne+"("+$+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+$+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+$+")\\s*\\)))",Fe=new RegExp("^\\s*(?:(?:"+X+"(?:"+ne+"*"+X+")*)?)\\s*$"),we=new RegExp(X,"g");return function(K){var Se=q.concat(),je=[];if(!K||K&&!Fe.test(K))return Se;K.replace(we,function(st){var Ze=new RegExp(X).exec(st).filter(function(Vn){return!!Vn}),Mt=Ze[1],yt=Ze.slice(2).map(parseFloat);switch(Mt){case"translate":!function H(K,Se){K[4]=Se[0],2===Se.length&&(K[5]=Se[1])}(Se,yt);break;case"rotate":yt[0]=f.util.degreesToRadians(yt[0]),function P(K,Se){var je=f.util.cos(Se[0]),He=f.util.sin(Se[0]),st=0,Ze=0;3===Se.length&&(st=Se[1],Ze=Se[2]),K[0]=je,K[1]=He,K[2]=-He,K[3]=je,K[4]=st-(je*st-He*Ze),K[5]=Ze-(He*st+je*Ze)}(Se,yt);break;case"scale":!function I(K,Se){var He=2===Se.length?Se[1]:Se[0];K[0]=Se[0],K[3]=He}(Se,yt);break;case"skewX":j(Se,yt,2);break;case"skewY":j(Se,yt,1);break;case"matrix":Se=yt}je.push(Se.concat()),Se=q.concat()});for(var He=je[0];je.length>1;)je.shift(),He=f.util.multiplyTransformMatrices(He,je[0]);return He}}();var M=new RegExp("^\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*,?\\s*("+f.reNum+"+)\\s*$");function k(P){if(!f.svgViewBoxElementsRegEx.test(P.nodeName))return{};var q,$,ne,oe,de,Y,I=P.getAttribute("viewBox"),j=1,H=1,V=P.getAttribute("width"),Z=P.getAttribute("height"),J=P.getAttribute("x")||0,X=P.getAttribute("y")||0,te=P.getAttribute("preserveAspectRatio")||"",ge=!I||!(I=I.match(M)),Fe=!V||!Z||"100%"===V||"100%"===Z,we=ge&&Fe,K={},Se="",je=0,He=0;if(K.width=0,K.height=0,K.toBeParsed=we,ge&&(J||X)&&P.parentNode&&"#document"!==P.parentNode.nodeName&&(Se=" translate("+u(J)+" "+u(X)+") ",de=(P.getAttribute("transform")||"")+Se,P.setAttribute("transform",de),P.removeAttribute("x"),P.removeAttribute("y")),we)return K;if(ge)return K.width=u(V),K.height=u(Z),K;if(q=-parseFloat(I[1]),$=-parseFloat(I[2]),ne=parseFloat(I[3]),oe=parseFloat(I[4]),K.minX=q,K.minY=$,K.viewBoxWidth=ne,K.viewBoxHeight=oe,Fe?(K.width=ne,K.height=oe):(K.width=u(V),K.height=u(Z),j=K.width/ne,H=K.height/oe),"none"!==(te=f.util.parsePreserveAspectRatioAttribute(te)).alignX&&("meet"===te.meetOrSlice&&(H=j=j>H?H:j),"slice"===te.meetOrSlice&&(H=j=j>H?j:H),je=K.width-ne*j,He=K.height-oe*j,"Mid"===te.alignX&&(je/=2),"Mid"===te.alignY&&(He/=2),"Min"===te.alignX&&(je=0),"Min"===te.alignY&&(He=0)),1===j&&1===H&&0===q&&0===$&&0===J&&0===X)return K;if((J||X)&&"#document"!==P.parentNode.nodeName&&(Se=" translate("+u(J)+" "+u(X)+") "),de=Se+" matrix("+j+" 0 0 "+H+" "+(q*j+je)+" "+($*H+He)+") ","svg"===P.nodeName){for(Y=P.ownerDocument.createElementNS(f.svgNS,"g");P.firstChild;)Y.appendChild(P.firstChild);P.appendChild(Y)}else(Y=P).removeAttribute("x"),Y.removeAttribute("y"),de=Y.getAttribute("transform")+de;return Y.setAttribute("transform",de),K}function R(P,I){var H="xlink:href",$=ve(P,I.getAttribute(H).slice(1));if($&&$.getAttribute(H)&&R(P,$),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(oe){$&&!I.hasAttribute(oe)&&$.hasAttribute(oe)&&I.setAttribute(oe,$.getAttribute(oe))}),!I.children.length)for(var ne=$.cloneNode(!0);ne.firstChild;)I.appendChild(ne.firstChild);I.removeAttribute(H)}f.parseSVGDocument=function(P,I,j,H){if(P){!function Ce(P){for(var I=ie(P,["use","svg:use"]),j=0;I.length&&j<I.length;){var H=I[j],q=H.getAttribute("xlink:href")||H.getAttribute("href");if(null===q)return;var J,X,te,ge,$=q.slice(1),ne=H.getAttribute("x")||0,oe=H.getAttribute("y")||0,de=ve(P,$).cloneNode(!0),Y=(de.getAttribute("transform")||"")+" translate("+ne+", "+oe+")",Z=I.length,Fe=f.svgNS;if(k(de),/^svg$/i.test(de.nodeName)){var we=de.ownerDocument.createElementNS(Fe,"g");for(X=0,ge=(te=de.attributes).length;X<ge;X++)J=te.item(X),we.setAttributeNS(Fe,J.nodeName,J.nodeValue);for(;de.firstChild;)we.appendChild(de.firstChild);de=we}for(X=0,ge=(te=H.attributes).length;X<ge;X++)"x"!==(J=te.item(X)).nodeName&&"y"!==J.nodeName&&"xlink:href"!==J.nodeName&&"href"!==J.nodeName&&("transform"===J.nodeName?Y=J.nodeValue+" "+Y:de.setAttribute(J.nodeName,J.nodeValue));de.setAttribute("transform",Y),de.setAttribute("instantiated_by_use","1"),de.removeAttribute("id"),H.parentNode.replaceChild(de,H),I.length===Z&&j++}}(P);var $,ne,q=f.Object.__uid++,oe=k(P),de=f.util.toArray(P.getElementsByTagName("*"));if(oe.crossOrigin=H&&H.crossOrigin,oe.svgUid=q,0===de.length&&f.isLikelyNode){var Y=[];for($=0,ne=(de=P.selectNodes('//*[name(.)!="svg"]')).length;$<ne;$++)Y[$]=de[$];de=Y}var V=de.filter(function(J){return k(J),f.svgValidTagNamesRegEx.test(J.nodeName.replace("svg:",""))&&!function L(P,I){for(;P&&(P=P.parentNode);)if(P.nodeName&&I.test(P.nodeName.replace("svg:",""))&&!P.getAttribute("instantiated_by_use"))return!0;return!1}(J,f.svgInvalidAncestorsRegEx)});if(!V||V&&!V.length)return void(I&&I([],{}));var Z={};de.filter(function(J){return"clipPath"===J.nodeName.replace("svg:","")}).forEach(function(J){var X=J.getAttribute("id");Z[X]=f.util.toArray(J.getElementsByTagName("*")).filter(function(te){return f.svgValidTagNamesRegEx.test(te.nodeName.replace("svg:",""))})}),f.gradientDefs[q]=f.getGradientDefs(P),f.cssRules[q]=f.getCSSRules(P),f.clipPaths[q]=Z,f.parseElements(V,function(J,X){I&&(I(J,oe,X,de),delete f.gradientDefs[q],delete f.cssRules[q],delete f.clipPaths[q])},h(oe),j,H)}};var W=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+f.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+f.reNum+"))?\\s+(.*)");p(f,{parseFontDeclaration:function(P,I){var j=P.match(W);if(j){var H=j[1],q=j[3],$=j[4],ne=j[5],oe=j[6];H&&(I.fontStyle=H),q&&(I.fontWeight=isNaN(parseFloat(q))?q:parseFloat(q)),$&&(I.fontSize=u($)),oe&&(I.fontFamily=oe),ne&&(I.lineHeight="normal"===ne?1:ne)}},getGradientDefs:function(P){var H,j=ie(P,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),q=0,$={};for(q=j.length;q--;)(H=j[q]).getAttribute("xlink:href")&&R(P,H),$[H.getAttribute("id")]=H;return $},parseAttributes:function(P,I,j){if(P){var H,$,ne,q={};typeof j>"u"&&(j=P.getAttribute("svgUid")),P.parentNode&&f.svgValidParentsRegEx.test(P.parentNode.nodeName)&&(q=f.parseAttributes(P.parentNode,I,j));var oe=I.reduce(function(te,ge){return(H=P.getAttribute(ge))&&(te[ge]=H),te},{}),de=p(function pe(P,I){var j={};for(var H in f.cssRules[I])if(ce(P,H.split(" ")))for(var q in f.cssRules[I][H])j[q]=f.cssRules[I][H][q];return j}(P,j),f.parseStyleAttribute(P));oe=p(oe,de),de[E]&&P.setAttribute(E,de[E]),$=ne=q.fontSize||f.Text.DEFAULT_SVG_FONT_SIZE,oe[b]&&(oe[b]=$=u(oe[b],ne));var Y,V,Z={};for(var J in oe)V=F(Y=A(J),oe[J],q,$),Z[Y]=V;Z&&Z.font&&f.parseFontDeclaration(Z.font,Z);var X=p(q,Z);return f.svgValidParentsRegEx.test(P.nodeName)?X:function z(P){for(var I in w)if(!(typeof P[w[I]]>"u"||""===P[I])){if(typeof P[I]>"u"){if(!f.Object.prototype[I])continue;P[I]=f.Object.prototype[I]}if(0!==P[I].indexOf("url(")){var j=new f.Color(P[I]);P[I]=j.setAlpha(a(j.getAlpha()*P[w[I]],2)).toRgba()}}return P}(X)}},parseElements:function(P,I,j,H,q){new f.ElementsParser(P,I,j,H,q).parse()},parseStyleAttribute:function(P){var I={},j=P.getAttribute("style");return j&&("string"==typeof j?function ue(P,I){var j,H;P.replace(/;\s*$/,"").split(";").forEach(function(q){var $=q.split(":");j=$[0].trim().toLowerCase(),H=$[1].trim(),I[j]=H})}(j,I):function he(P,I){for(var q in P)typeof P[q]>"u"||(I[q.toLowerCase()]=P[q])}(j,I)),I},parsePointsAttribute:function(P){if(!P)return null;var j,H,I=[];for(j=0,H=(P=(P=P.replace(/,/g," ").trim()).split(/\s+/)).length;j<H;j+=2)I.push({x:parseFloat(P[j]),y:parseFloat(P[j+1])});return I},getCSSRules:function(P){var j,H,I=P.getElementsByTagName("style"),q={};for(j=0,H=I.length;j<H;j++){var ne=I[j].textContent;""!==(ne=ne.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&ne.split("}").filter(function(oe){return oe.trim()}).forEach(function(oe){var de=oe.split("{"),Y={},Z=de[1].trim().split(";").filter(function(ge){return ge.trim()});for(j=0,H=Z.length;j<H;j++){var J=Z[j].split(":"),X=J[0].trim(),te=J[1].trim();Y[X]=te}(oe=de[0].trim()).split(",").forEach(function(ge){""!==(ge=ge.replace(/^svg/i,"").trim())&&(q[ge]?f.util.object.extend(q[ge],Y):q[ge]=f.util.object.clone(Y))})})}return q},loadSVGFromURL:function(P,I,j,H){P=P.replace(/^\n\s*/,"").trim(),new f.util.request(P,{method:"get",onComplete:function q($){var ne=$.responseXML;if(!ne||!ne.documentElement)return I&&I(null),!1;f.parseSVGDocument(ne.documentElement,function(oe,de,Y,V){I&&I(oe,de,Y,V)},j,H)}})},loadSVGFromString:function(P,I,j,H){var $=(new f.window.DOMParser).parseFromString(P.trim(),"text/xml");f.parseSVGDocument($.documentElement,function(ne,oe,de,Y){I(ne,oe,de,Y)},j,H)}})}(Re),C.ElementsParser=function(y,f,p,h,a,u){this.elements=y,this.callback=f,this.options=p,this.reviver=h,this.svgUid=p&&p.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=u},function(y){y.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},y.createObjects=function(){var f=this;this.elements.forEach(function(p,h){p.setAttribute("svgUid",f.svgUid),f.createObject(p,h)})},y.findTag=function(f){return C[C.util.string.capitalize(f.tagName.replace("svg:",""))]},y.createObject=function(f,p){var h=this.findTag(f);if(h&&h.fromElement)try{h.fromElement(f,this.createCallback(p,f),this.options)}catch(a){C.log(a)}else this.checkIfDone()},y.createCallback=function(f,p){var h=this;return function(a){var u;h.resolveGradient(a,p,"fill"),h.resolveGradient(a,p,"stroke"),a instanceof C.Image&&a._originalElement&&(u=a.parsePreserveAspectRatioAttribute(p)),a._removeTransformMatrix(u),h.resolveClipPath(a,p),h.reviver&&h.reviver(p,a),h.instances[f]=a,h.checkIfDone()}},y.extractPropertyDefinition=function(f,p,h){var a=f[p],u=this.regexUrl;if(u.test(a)){u.lastIndex=0;var o=u.exec(a)[1];return u.lastIndex=0,C[h][this.svgUid][o]}},y.resolveGradient=function(f,p,h){var a=this.extractPropertyDefinition(f,h,"gradientDefs");if(a){var u=p.getAttribute(h+"-opacity"),o=C.Gradient.fromElement(a,f,u,this.options);f.set(h,o)}},y.createClipPathCallback=function(f,p){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,p.push(h)}},y.resolveClipPath=function(f,p){var a,o,c,g,h=this.extractPropertyDefinition(f,"clipPath","clipPaths");if(h){c=[],o=C.util.invertTransform(f.calcTransformMatrix());for(var m=h[0].parentNode,_=p;_.parentNode&&_.getAttribute("clip-path")!==f.clipPath;)_=_.parentNode;_.parentNode.appendChild(m);for(var w=0;w<h.length;w++)this.findTag(a=h[w]).fromElement(a,this.createClipPathCallback(f,c),this.options);h=1===c.length?c[0]:new C.Group(c),g=C.util.multiplyTransformMatrices(o,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,_);var l=C.util.qrDecompose(g);h.flipX=!1,h.flipY=!1,h.set("scaleX",l.scaleX),h.set("scaleY",l.scaleY),h.angle=l.angle,h.skewX=l.skewX,h.skewY=0,h.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),f.clipPath=h}else delete f.clipPath},y.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(f){return null!=f}),this.callback(this.instances,this.elements))}}(C.ElementsParser.prototype),function(y){"use strict";var f=y.fabric||(y.fabric={});function p(h,a){this.x=h,this.y=a}f.Point?f.warn("fabric.Point is already defined"):(f.Point=p,p.prototype={type:"point",constructor:p,add:function(h){return new p(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new p(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new p(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new p(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new p(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new p(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new p(this.x+(h.x-this.x)*a,this.y+(h.y-this.y)*a)},distanceFrom:function(h){var a=this.x-h.x,u=this.y-h.y;return Math.sqrt(a*a+u*u)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new p(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new p(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,a){return this.x=h,this.y=a,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var a=this.x,u=this.y;this.x=h.x,this.y=h.y,h.x=a,h.y=u},clone:function(){return new p(this.x,this.y)}})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={});function p(h){this.status=h,this.points=[]}f.Intersection?f.warn("fabric.Intersection is already defined"):(f.Intersection=p,f.Intersection.prototype={constructor:p,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},f.Intersection.intersectLineLine=function(h,a,u,o){var c,g=(o.x-u.x)*(h.y-u.y)-(o.y-u.y)*(h.x-u.x),l=(a.x-h.x)*(h.y-u.y)-(a.y-h.y)*(h.x-u.x),m=(o.y-u.y)*(a.x-h.x)-(o.x-u.x)*(a.y-h.y);if(0!==m){var _=g/m,w=l/m;0<=_&&_<=1&&0<=w&&w<=1?(c=new p("Intersection")).appendPoint(new f.Point(h.x+_*(a.x-h.x),h.y+_*(a.y-h.y))):c=new p}else c=new p(0===g||0===l?"Coincident":"Parallel");return c},f.Intersection.intersectLinePolygon=function(h,a,u){var m,_,o=new p,c=u.length;for(_=0;_<c;_++)m=p.intersectLineLine(h,a,u[_],u[(_+1)%c]),o.appendPoints(m.points);return o.points.length>0&&(o.status="Intersection"),o},f.Intersection.intersectPolygonPolygon=function(h,a){var c,u=new p,o=h.length;for(c=0;c<o;c++){var m=p.intersectLinePolygon(h[c],h[(c+1)%o],a);u.appendPoints(m.points)}return u.points.length>0&&(u.status="Intersection"),u},f.Intersection.intersectPolygonRectangle=function(h,a,u){var o=a.min(u),c=a.max(u),g=new f.Point(c.x,o.y),l=new f.Point(o.x,c.y),m=p.intersectLinePolygon(o,g,h),_=p.intersectLinePolygon(g,c,h),w=p.intersectLinePolygon(c,l,h),b=p.intersectLinePolygon(l,o,h),E=new p;return E.appendPoints(m.points),E.appendPoints(_.points),E.appendPoints(w.points),E.appendPoints(b.points),E.points.length>0&&(E.status="Intersection"),E})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={});function p(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}function h(a,u,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?a+6*(u-a)*o:o<.5?u:o<2/3?a+(u-a)*(2/3-o)*6:a}f.Color?f.warn("fabric.Color is already defined."):(f.Color=p,f.Color.prototype={_tryParsingColor:function(a){var u;a in p.colorNameMap&&(a=p.colorNameMap[a]),"transparent"===a&&(u=[255,255,255,0]),u||(u=p.sourceFromHex(a)),u||(u=p.sourceFromRgb(a)),u||(u=p.sourceFromHsl(a)),u||(u=[0,0,0,1]),u&&this.setSource(u)},_rgbToHsl:function(a,u,o){var c,g,l,m=f.util.array.max([a/=255,u/=255,o/=255]),_=f.util.array.min([a,u,o]);if(l=(m+_)/2,m===_)c=g=0;else{var w=m-_;switch(g=l>.5?w/(2-m-_):w/(m+_),m){case a:c=(u-o)/w+(u<o?6:0);break;case u:c=(o-a)/w+2;break;case o:c=(a-u)/w+4}c/=6}return[Math.round(360*c),Math.round(100*g),Math.round(100*l)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),u=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+u[0]+","+u[1]+"%,"+u[2]+"%)"},toHsla:function(){var a=this.getSource(),u=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+u[0]+","+u[1]+"%,"+u[2]+"%,"+a[3]+")"},toHex:function(){var u,o,c,a=this.getSource();return u=1===(u=a[0].toString(16)).length?"0"+u:u,o=1===(o=a[1].toString(16)).length?"0"+o:o,c=1===(c=a[2].toString(16)).length?"0"+c:c,u.toUpperCase()+o.toUpperCase()+c.toUpperCase()},toHexa:function(){var u,a=this.getSource();return u=1===(u=(u=Math.round(255*a[3])).toString(16)).length?"0"+u:u,this.toHex()+u.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var u=this.getSource();return u[3]=a,this.setSource(u),this},toGrayscale:function(){var a=this.getSource(),u=parseInt((.3*a[0]+.59*a[1]+.11*a[2]).toFixed(0),10);return this.setSource([u,u,u,a[3]]),this},toBlackWhite:function(a){var u=this.getSource(),o=(.3*u[0]+.59*u[1]+.11*u[2]).toFixed(0),c=u[3];return a=a||127,o=Number(o)<Number(a)?0:255,this.setSource([o,o,o,c]),this},overlayWith:function(a){a instanceof p||(a=new p(a));var m,u=[],o=this.getAlpha(),g=this.getSource(),l=a.getSource();for(m=0;m<3;m++)u.push(Math.round(.5*g[m]+.5*l[m]));return u[3]=o,this.setSource(u),this}},f.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,f.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,f.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,f.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},f.Color.fromRgb=function(a){return p.fromSource(p.sourceFromRgb(a))},f.Color.sourceFromRgb=function(a){var u=a.match(p.reRGBa);if(u){var o=parseInt(u[1],10)/(/%$/.test(u[1])?100:1)*(/%$/.test(u[1])?255:1),c=parseInt(u[2],10)/(/%$/.test(u[2])?100:1)*(/%$/.test(u[2])?255:1),g=parseInt(u[3],10)/(/%$/.test(u[3])?100:1)*(/%$/.test(u[3])?255:1);return[parseInt(o,10),parseInt(c,10),parseInt(g,10),u[4]?parseFloat(u[4]):1]}},f.Color.fromRgba=p.fromRgb,f.Color.fromHsl=function(a){return p.fromSource(p.sourceFromHsl(a))},f.Color.sourceFromHsl=function(a){var u=a.match(p.reHSLa);if(u){var l,m,_,o=(parseFloat(u[1])%360+360)%360/360,c=parseFloat(u[2])/(/%$/.test(u[2])?100:1),g=parseFloat(u[3])/(/%$/.test(u[3])?100:1);if(0===c)l=m=_=g;else{var w=g<=.5?g*(c+1):g+c-g*c,b=2*g-w;l=h(b,w,o+1/3),m=h(b,w,o),_=h(b,w,o-1/3)}return[Math.round(255*l),Math.round(255*m),Math.round(255*_),u[4]?parseFloat(u[4]):1]}},f.Color.fromHsla=p.fromHsl,f.Color.fromHex=function(a){return p.fromSource(p.sourceFromHex(a))},f.Color.sourceFromHex=function(a){if(a.match(p.reHex)){var u=a.slice(a.indexOf("#")+1),o=3===u.length||4===u.length,c=8===u.length||4===u.length,g=o?u.charAt(0)+u.charAt(0):u.substring(0,2),l=o?u.charAt(1)+u.charAt(1):u.substring(2,4),m=o?u.charAt(2)+u.charAt(2):u.substring(4,6),_=c?o?u.charAt(3)+u.charAt(3):u.substring(6,8):"FF";return[parseInt(g,16),parseInt(l,16),parseInt(m,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},f.Color.fromSource=function(a){var u=new p;return u.setSource(a),u})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],a={},u="left",o="top",c="right",g="bottom",l="center",m={top:g,bottom:o,left:c,right:u,center:l},_=f.util.radiansToDegrees,w=Math.sign||function(Y){return(Y>0)-(Y<0)||+Y};function b(Y,V){var Z=Y.angle+_(Math.atan2(V.y,V.x))+360;return Math.round(Z%360/45)}function E(Y,V){var Z=V.transform.target,J=Z.canvas,X=f.util.object.clone(V);X.target=Z,J&&J.fire("object:"+Y,X),Z.fire(Y,V)}function A(Y,V){var Z=V.canvas,X=Y[Z.uniScaleKey];return Z.uniformScaling&&!X||!Z.uniformScaling&&X}function F(Y){return Y.originX===l&&Y.originY===l}function B(Y,V,Z){var J=Y.lockScalingX,X=Y.lockScalingY;return!!(J&&X||!V&&(J||X)&&Z||J&&"x"===V||X&&"y"===V)}function ce(Y,V,Z,J){return{e:Y,transform:V,pointer:{x:Z,y:J}}}function fe(Y){return function(V,Z,J,X){var te=Z.target,ge=te.getCenterPoint(),Fe=te.translateToOriginPoint(ge,Z.originX,Z.originY),we=Y(V,Z,J,X);return te.setPositionByOrigin(Fe,Z.originX,Z.originY),we}}function xe(Y,V){return function(Z,J,X,te){var ge=V(Z,J,X,te);return ge&&E(Y,ce(Z,J,X,te)),ge}}function ve(Y,V,Z,J,X){var te=Y.target,ge=te.controls[Y.corner],Fe=te.canvas.getZoom(),we=te.padding/Fe,K=te.toLocalPoint(new f.Point(J,X),V,Z);return K.x>=we&&(K.x-=we),K.x<=-we&&(K.x+=we),K.y>=we&&(K.y-=we),K.y<=we&&(K.y+=we),K.x-=ge.offsetX,K.y-=ge.offsetY,K}function Ce(Y){return Y.flipX!==Y.flipY}function M(Y,V,Z,J,X){if(0!==Y[V]){var te=Y._getTransformedDimensions()[J];Y.set(Z,X/te*Y[Z])}}function k(Y,V,Z,J){var K,X=V.target,te=X._getTransformedDimensions(0,X.skewY),ge=ve(V,V.originX,V.originY,Z,J),Fe=Math.abs(2*ge.x)-te.x,we=X.skewX;Fe<2?K=0:(K=_(Math.atan2(Fe/X.scaleX,te.y/X.scaleY)),V.originX===u&&V.originY===g&&(K=-K),V.originX===c&&V.originY===o&&(K=-K),Ce(X)&&(K=-K));var Se=we!==K;if(Se){var je=X._getTransformedDimensions().y;X.set("skewX",K),M(X,"skewY","scaleY","y",je)}return Se}function L(Y,V,Z,J){var K,X=V.target,te=X._getTransformedDimensions(X.skewX,0),ge=ve(V,V.originX,V.originY,Z,J),Fe=Math.abs(2*ge.y)-te.y,we=X.skewY;Fe<2?K=0:(K=_(Math.atan2(Fe/X.scaleY,te.x/X.scaleX)),V.originX===u&&V.originY===g&&(K=-K),V.originX===c&&V.originY===o&&(K=-K),Ce(X)&&(K=-K));var Se=we!==K;if(Se){var je=X._getTransformedDimensions().x;X.set("skewY",K),M(X,"skewX","scaleX","x",je)}return Se}function I(Y,V,Z,J,X){var K,Se,je,He,Mt,yt,te=V.target,ge=te.lockScalingX,Fe=te.lockScalingY,we=(X=X||{}).by,st=A(Y,te),Ze=B(te,we,st),Vn=V.gestureScale;if(Ze)return!1;if(Vn)Se=V.scaleX*Vn,je=V.scaleY*Vn;else{if(K=ve(V,V.originX,V.originY,Z,J),Mt="y"!==we?w(K.x):1,yt="x"!==we?w(K.y):1,V.signX||(V.signX=Mt),V.signY||(V.signY=yt),te.lockScalingFlip&&(V.signX!==Mt||V.signY!==yt))return!1;if(He=te._getTransformedDimensions(),st&&!we){var ki=Math.abs(K.x)+Math.abs(K.y),pn=V.original,pa=ki/(Math.abs(He.x*pn.scaleX/te.scaleX)+Math.abs(He.y*pn.scaleY/te.scaleY));Se=pn.scaleX*pa,je=pn.scaleY*pa}else Se=Math.abs(K.x*te.scaleX/He.x),je=Math.abs(K.y*te.scaleY/He.y);F(V)&&(Se*=2,je*=2),V.signX!==Mt&&"y"!==we&&(V.originX=m[V.originX],Se*=-1,V.signX=Mt),V.signY!==yt&&"x"!==we&&(V.originY=m[V.originY],je*=-1,V.signY=yt)}var $c=te.scaleX,Ms=te.scaleY;return we?("x"===we&&te.set("scaleX",Se),"y"===we&&te.set("scaleY",je)):(!ge&&te.set("scaleX",Se),!Fe&&te.set("scaleY",je)),$c!==te.scaleX||Ms!==te.scaleY}a.scaleCursorStyleHandler=function z(Y,V,Z){var X=A(Y,Z),te="";if(0!==V.x&&0===V.y?te="x":0===V.x&&0!==V.y&&(te="y"),B(Z,te,X))return"not-allowed";var ge=b(Z,V);return p[ge]+"-resize"},a.skewCursorStyleHandler=function ie(Y,V,Z){if(0!==V.x&&Z.lockSkewingY||0!==V.y&&Z.lockSkewingX)return"not-allowed";var X=b(Z,V)%4;return h[X]+"-resize"},a.scaleSkewCursorStyleHandler=function ue(Y,V,Z){return Y[Z.canvas.altActionKey]?a.skewCursorStyleHandler(Y,V,Z):a.scaleCursorStyleHandler(Y,V,Z)},a.rotationWithSnapping=xe("rotating",fe(function P(Y,V,Z,J){var X=V,te=X.target,ge=te.translateToOriginPoint(te.getCenterPoint(),X.originX,X.originY);if(te.lockRotation)return!1;var Se,Fe=Math.atan2(X.ey-ge.y,X.ex-ge.x),we=Math.atan2(J-ge.y,Z-ge.x),K=_(we-Fe+X.theta);if(te.snapAngle>0){var je=te.snapAngle,He=te.snapThreshold||je,st=Math.ceil(K/je)*je,Ze=Math.floor(K/je)*je;Math.abs(K-Ze)<He?K=Ze:Math.abs(K-st)<He&&(K=st)}return K<0&&(K=360+K),Se=te.angle!==(K%=360),te.angle=K,Se})),a.scalingEqually=xe("scaling",fe(function j(Y,V,Z,J){return I(Y,V,Z,J)})),a.scalingX=xe("scaling",fe(function H(Y,V,Z,J){return I(Y,V,Z,J,{by:"x"})})),a.scalingY=xe("scaling",fe(function q(Y,V,Z,J){return I(Y,V,Z,J,{by:"y"})})),a.scalingYOrSkewingX=function $(Y,V,Z,J){return Y[V.target.canvas.altActionKey]?a.skewHandlerX(Y,V,Z,J):a.scalingY(Y,V,Z,J)},a.scalingXOrSkewingY=function ne(Y,V,Z,J){return Y[V.target.canvas.altActionKey]?a.skewHandlerY(Y,V,Z,J):a.scalingX(Y,V,Z,J)},a.changeWidth=xe("resizing",fe(function oe(Y,V,Z,J){var X=V.target,te=ve(V,V.originX,V.originY,Z,J),ge=X.strokeWidth/(X.strokeUniform?X.scaleX:1),Fe=F(V)?2:1,we=X.width,K=Math.abs(te.x*Fe/X.scaleX)-ge;return X.set("width",Math.max(K,0)),we!==K})),a.skewHandlerX=function R(Y,V,Z,J){var ge,X=V.target,te=X.skewX,Fe=V.originY;return!X.lockSkewingX&&(0===te?ge=ve(V,l,l,Z,J).x>0?u:c:(te>0&&(ge=Fe===o?u:c),te<0&&(ge=Fe===o?c:u),Ce(X)&&(ge=ge===u?c:u)),V.originX=ge,xe("skewing",fe(k))(Y,V,Z,J))},a.skewHandlerY=function W(Y,V,Z,J){var ge,X=V.target,te=X.skewY,Fe=V.originX;return!X.lockSkewingY&&(0===te?ge=ve(V,l,l,Z,J).y>0?o:g:(te>0&&(ge=Fe===u?o:g),te<0&&(ge=Fe===u?g:o),Ce(X)&&(ge=ge===o?g:o)),V.originY=ge,xe("skewing",fe(L))(Y,V,Z,J))},a.dragHandler=function de(Y,V,Z,J){var X=V.target,te=Z-V.offsetX,ge=J-V.offsetY,Fe=!X.get("lockMovementX")&&X.left!==te,we=!X.get("lockMovementY")&&X.top!==ge;return Fe&&X.set("left",te),we&&X.set("top",ge),(Fe||we)&&E("moving",ce(Y,V,Z,J)),Fe||we},a.scaleOrSkewActionName=function he(Y,V,Z){var J=Y[Z.canvas.altActionKey];return 0===V.x?J?"skewX":"scaleY":0===V.y?J?"skewY":"scaleX":void 0},a.rotationStyleHandler=function pe(Y,V,Z){return Z.lockRotation?"not-allowed":V.cursorStyle},a.fireEvent=E,a.wrapWithFixedAnchor=fe,a.wrapWithFireEvent=xe,a.getLocalPoint=ve,f.controlsUtils=a}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.degreesToRadians,h=f.controlsUtils;h.renderCircleControl=function a(o,c,g,l,m){l=l||{};var z,_=this.sizeX||l.cornerSize||m.cornerSize,w=this.sizeY||l.cornerSize||m.cornerSize,b=typeof l.transparentCorners<"u"?l.transparentCorners:m.transparentCorners,E=b?"stroke":"fill",A=!b&&(l.cornerStrokeColor||m.cornerStrokeColor),F=c,B=g;o.save(),o.fillStyle=l.cornerColor||m.cornerColor,o.strokeStyle=l.cornerStrokeColor||m.cornerStrokeColor,_>w?(z=_,o.scale(1,w/_),B=g*_/w):w>_?(z=w,o.scale(_/w,1),F=c*w/_):z=_,o.lineWidth=1,o.beginPath(),o.arc(F,B,z/2,0,2*Math.PI,!1),o[E](),A&&o.stroke(),o.restore()},h.renderSquareControl=function u(o,c,g,l,m){l=l||{};var _=this.sizeX||l.cornerSize||m.cornerSize,w=this.sizeY||l.cornerSize||m.cornerSize,b=typeof l.transparentCorners<"u"?l.transparentCorners:m.transparentCorners,E=b?"stroke":"fill",A=!b&&(l.cornerStrokeColor||m.cornerStrokeColor),F=_/2,B=w/2;o.save(),o.fillStyle=l.cornerColor||m.cornerColor,o.strokeStyle=l.cornerStrokeColor||m.cornerStrokeColor,o.lineWidth=1,o.translate(c,g),o.rotate(p(m.angle)),o[E+"Rect"](-F,-B,_,w),A&&o.strokeRect(-F,-B,_,w),o.restore()}}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Control=function p(h){for(var a in h)this[a]=h[a]},f.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,a){return a.cursorStyle},getActionName:function(h,a){return a.actionName},getVisibility:function(h,a){var u=h._controlsVisibility;return u&&typeof u[a]<"u"?u[a]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,a){return f.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},a)},calcCornerCoords:function(h,a,u,o,c){var g,l,m,_,w=c?this.touchSizeX:this.sizeX,b=c?this.touchSizeY:this.sizeY;if(w&&b&&w!==b){var E=Math.atan2(b,w),A=Math.sqrt(w*w+b*b)/2,F=E-f.util.degreesToRadians(h),B=Math.PI/2-E-f.util.degreesToRadians(h);g=A*f.util.cos(F),l=A*f.util.sin(F),m=A*f.util.cos(B),_=A*f.util.sin(B)}else A=.7071067812*(w&&b?w:a),F=f.util.degreesToRadians(45-h),g=m=A*f.util.cos(F),l=_=A*f.util.sin(F);return{tl:{x:u-_,y:o-m},tr:{x:u+g,y:o-l},bl:{x:u-g,y:o+l},br:{x:u+_,y:o+m}}},render:function(h,a,u,o,c){"circle"===((o=o||{}).cornerStyle||c.cornerStyle)?f.controlsUtils.renderCircleControl.call(this,h,a,u,o,c):f.controlsUtils.renderSquareControl.call(this,h,a,u,o,c)}}}(Re),function(){function y(u,o){var l,m,_,w,c=u.getAttribute("style"),g=u.getAttribute("offset")||0;if(g=(g=parseFloat(g)/(/%$/.test(g)?100:1))<0?0:g>1?1:g,c){var b=c.split(/\s*;\s*/);for(""===b[b.length-1]&&b.pop(),w=b.length;w--;){var E=b[w].split(/\s*:\s*/),A=E[0].trim(),F=E[1].trim();"stop-color"===A?l=F:"stop-opacity"===A&&(_=F)}}return l||(l=u.getAttribute("stop-color")||"rgb(0,0,0)"),_||(_=u.getAttribute("stop-opacity")),m=(l=new C.Color(l)).getAlpha(),_=isNaN(parseFloat(_))?1:parseFloat(_),_*=m*o,{offset:g,color:l.toRgb(),opacity:_}}var h=C.util.object.clone;C.Gradient=C.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var o,c=this;Object.keys(u).forEach(function(g){c[g]=u[g]}),this.id?this.id+="_"+C.Object.__uid++:this.id=C.Object.__uid++,o={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},"radial"===this.type&&(o.r1=u.coords.r1||0,o.r2=u.coords.r2||0),this.coords=o,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var o in u){var c=new C.Color(u[o]);this.colorStops.push({offset:parseFloat(o),color:c.toRgb(),opacity:c.getAlpha()})}return this},toObject:function(u){var o={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return C.util.populateWithProperties(this,o,u),o},toSVG:function(u,m){var g,l,_,w,c=h(this.coords,!0),b=(m=m||{},h(this.colorStops,!0)),E=c.r1>c.r2,A=this.gradientTransform?this.gradientTransform.concat():C.iMatrix.concat(),F=-this.offsetX,B=-this.offsetY,z=!!m.additionalTransform,ie="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(b.sort(function(fe,xe){return fe.offset-xe.offset}),"objectBoundingBox"===ie?(F/=u.width,B/=u.height):(F+=u.width/2,B+=u.height/2),"path"===u.type&&"percentage"!==this.gradientUnits&&(F-=u.pathOffset.x,B-=u.pathOffset.y),A[4]-=F,A[5]-=B,w='id="SVGID_'+this.id+'" gradientUnits="'+ie+'"',w+=' gradientTransform="'+(z?m.additionalTransform+" ":"")+C.util.matrixToSVG(A)+'" ',"linear"===this.type?_=["<linearGradient ",w,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,'">\n']:"radial"===this.type&&(_=["<radialGradient ",w,' cx="',E?c.x1:c.x2,'" cy="',E?c.y1:c.y2,'" r="',E?c.r1:c.r2,'" fx="',E?c.x2:c.x1,'" fy="',E?c.y2:c.y1,'">\n']),"radial"===this.type){if(E)for((b=b.concat()).reverse(),g=0,l=b.length;g<l;g++)b[g].offset=1-b[g].offset;var ue=Math.min(c.r1,c.r2);if(ue>0){var pe=ue/Math.max(c.r1,c.r2);for(g=0,l=b.length;g<l;g++)b[g].offset+=pe*(1-b[g].offset)}}for(g=0,l=b.length;g<l;g++){var ce=b[g];_.push("<stop ",'offset="',100*ce.offset+"%",'" style="stop-color:',ce.color,typeof ce.opacity<"u"?";stop-opacity: "+ce.opacity:";",'"/>\n')}return _.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),_.join("")},toLive:function(u){var o,g,l,c=C.util.object.clone(this.coords);if(this.type){for("linear"===this.type?o=u.createLinearGradient(c.x1,c.y1,c.x2,c.y2):"radial"===this.type&&(o=u.createRadialGradient(c.x1,c.y1,c.r1,c.x2,c.y2,c.r2)),g=0,l=this.colorStops.length;g<l;g++){var m=this.colorStops[g].color,_=this.colorStops[g].opacity,w=this.colorStops[g].offset;typeof _<"u"&&(m=new C.Color(m).setAlpha(_).toRgba()),o.addColorStop(w,m)}return o}}}),C.util.object.extend(C.Gradient,{fromElement:function(u,o,c,g){var l=parseFloat(c)/(/%$/.test(c)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var _,A,F,ie,m=u.getElementsByTagName("stop"),w="userSpaceOnUse"===u.getAttribute("gradientUnits")?"pixels":"percentage",b=u.getAttribute("gradientTransform")||"",E=[],B=0,z=0;for("linearGradient"===u.nodeName||"LINEARGRADIENT"===u.nodeName?(_="linear",A=function f(u){return{x1:u.getAttribute("x1")||0,y1:u.getAttribute("y1")||0,x2:u.getAttribute("x2")||"100%",y2:u.getAttribute("y2")||0}}(u)):(_="radial",A=function p(u){return{x1:u.getAttribute("fx")||u.getAttribute("cx")||"50%",y1:u.getAttribute("fy")||u.getAttribute("cy")||"50%",r1:0,x2:u.getAttribute("cx")||"50%",y2:u.getAttribute("cy")||"50%",r2:u.getAttribute("r")||"50%"}}(u)),F=m.length;F--;)E.push(y(m[F],l));return ie=C.parseTransformAttribute(b),function a(u,o,c,g){var l,m;Object.keys(o).forEach(function(_){"Infinity"===(l=o[_])?m=1:"-Infinity"===l?m=0:(m=parseFloat(o[_],10),"string"==typeof l&&/^(\d+\.\d+)%|(\d+)%$/.test(l)&&(m*=.01,"pixels"===g&&(("x1"===_||"x2"===_||"r2"===_)&&(m*=c.viewBoxWidth||c.width),("y1"===_||"y2"===_)&&(m*=c.viewBoxHeight||c.height)))),o[_]=m})}(0,A,g,w),"pixels"===w&&(B=-o.left,z=-o.top),new C.Gradient({id:u.getAttribute("id"),type:_,coords:A,colorStops:E,gradientUnits:w,gradientTransform:ie,offsetX:B,offsetY:z})}})}(),function(){"use strict";var y=C.util.toFixed;C.Pattern=C.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(f,p){if(f||(f={}),this.id=C.Object.__uid++,this.setOptions(f),!f.source||f.source&&"string"!=typeof f.source)p&&p(this);else{var h=this;this.source=C.util.createImage(),C.util.loadImage(f.source,function(a,u){h.source=a,p&&p(h,u)},null,this.crossOrigin)}},toObject:function(f){var h,a,p=C.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?h=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(h=this.source.toDataURL()),a={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:y(this.offsetX,p),offsetY:y(this.offsetY,p),patternTransform:this.patternTransform?this.patternTransform.concat():null},C.util.populateWithProperties(this,a,f),a},toSVG:function(f){var p="function"==typeof this.source?this.source():this.source,h=p.width/f.width,a=p.height/f.height,u=this.offsetX/f.width,o=this.offsetY/f.height,c="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(a=1,o&&(a+=Math.abs(o))),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(h=1,u&&(h+=Math.abs(u))),p.src?c=p.src:p.toDataURL&&(c=p.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+u+'" y="'+o+'" width="'+h+'" height="'+a+'">\n<image x="0" y="0" width="'+p.width+'" height="'+p.height+'" xlink:href="'+c+'"></image>\n</pattern>\n'},setOptions:function(f){for(var p in f)this[p]=f[p]},toLive:function(f){var p=this.source;return!p||typeof p.src<"u"&&(!p.complete||0===p.naturalWidth||0===p.naturalHeight)?"":f.createPattern(p,this.repeat)}})}(),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.toFixed;f.Shadow?f.warn("fabric.Shadow is already defined."):(f.Shadow=f.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){for(var a in"string"==typeof h&&(h=this._parseShadow(h)),h)this[a]=h[a];this.id=f.Object.__uid++},_parseShadow:function(h){var a=h.trim(),u=f.Shadow.reOffsetsAndBlur.exec(a)||[];return{color:(a.replace(f.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(u[1],10)||0,offsetY:parseFloat(u[2],10)||0,blur:parseFloat(u[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var a=40,u=40,o=f.Object.NUM_FRACTION_DIGITS,c=f.util.rotateVector({x:this.offsetX,y:this.offsetY},f.util.degreesToRadians(-h.angle)),l=new f.Color(this.color);return h.width&&h.height&&(a=100*p((Math.abs(c.x)+this.blur)/h.width,o)+20,u=100*p((Math.abs(c.y)+this.blur)/h.height,o)+20),h.flipX&&(c.x*=-1),h.flipY&&(c.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+u+'%" height="'+(100+2*u)+'%" x="-'+a+'%" width="'+(100+2*a)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+p(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+p(c.x,o)+'" dy="'+p(c.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+l.toRgb()+'" flood-opacity="'+l.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},a=f.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(u){this[u]!==a[u]&&(h[u]=this[u])},this),h}}),f.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(Re),function(){"use strict";if(C.StaticCanvas)C.warn("fabric.StaticCanvas is already defined.");else{var y=C.util.object.extend,f=C.util.getElementOffset,p=C.util.removeFromArray,h=C.util.toFixed,a=C.util.transformPoint,u=C.util.invertTransform,o=C.util.getNodeCanvas,c=C.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");C.StaticCanvas=C.util.createClass(C.CommonMethods,{initialize:function(l,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:C.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(l,m){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(l),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,_),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,_),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,_),m.overlayColor&&this.setOverlayColor(m.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return C.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,C.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var l=C.devicePixelRatio;this.__initRetinaScaling(l,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(l,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(l,m,_){m.setAttribute("width",this.width*l),m.setAttribute("height",this.height*l),_.scale(l,l)},calcOffset:function(){return this._offset=f(this.lowerCanvasEl),this},setOverlayImage:function(l,m,_){return this.__setBgOverlayImage("overlayImage",l,m,_)},setBackgroundImage:function(l,m,_){return this.__setBgOverlayImage("backgroundImage",l,m,_)},setOverlayColor:function(l,m){return this.__setBgOverlayColor("overlayColor",l,m)},setBackgroundColor:function(l,m){return this.__setBgOverlayColor("backgroundColor",l,m)},__setBgOverlayImage:function(l,m,_,w){return"string"==typeof m?C.util.loadImage(m,function(b,E){if(b){var A=new C.Image(b,w);this[l]=A,A.canvas=this}_&&_(b,E)},this,w&&w.crossOrigin):(w&&m.setOptions(w),this[l]=m,m&&(m.canvas=this),_&&_(m,!1)),this},__setBgOverlayColor:function(l,m,_){return this[l]=m,this._initGradient(m,l),this._initPattern(m,l,_),this},_createCanvasElement:function(){var l=c();if(!l||(l.style||(l.style={}),typeof l.getContext>"u"))throw g;return l},_initOptions:function(l){var m=this.lowerCanvasEl;this._setOptions(l),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(l){this.lowerCanvasEl=l&&l.getContext?l:C.util.getById(l)||this._createCanvasElement(),C.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(l,m){return this.setDimensions({width:l},m)},setHeight:function(l,m){return this.setDimensions({height:l},m)},setDimensions:function(l,m){var _;for(var w in m=m||{},l)_=l[w],m.cssOnly||(this._setBackstoreDimension(w,l[w]),_+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(w,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(l,m){return this.lowerCanvasEl[l]=m,this.upperCanvasEl&&(this.upperCanvasEl[l]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[l]=m),this[l]=m,this},_setCssDimension:function(l,m){return this.lowerCanvasEl.style[l]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[l]=m),this.wrapperEl&&(this.wrapperEl.style[l]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(l){var b,E,A,m=this._activeObject,_=this.backgroundImage,w=this.overlayImage;for(this.viewportTransform=l,E=0,A=this._objects.length;E<A;E++)(b=this._objects[E]).group||b.setCoords(!0);return m&&m.setCoords(),_&&_.setCoords(!0),w&&w.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(l,m){var _=l,w=this.viewportTransform.slice(0);l=a(l,u(this.viewportTransform)),w[0]=m,w[3]=m;var b=a(l,w);return w[4]+=_.x-b.x,w[5]+=_.y-b.y,this.setViewportTransform(w)},setZoom:function(l){return this.zoomToPoint(new C.Point(0,0),l),this},absolutePan:function(l){var m=this.viewportTransform.slice(0);return m[4]=-l.x,m[5]=-l.y,this.setViewportTransform(m)},relativePan:function(l){return this.absolutePan(new C.Point(-l.x-this.viewportTransform[4],-l.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(l){this.stateful&&l.setupState(),l._set("canvas",this),l.setCoords(),this.fire("object:added",{target:l}),l.fire("added")},_onObjectRemoved:function(l){this.fire("object:removed",{target:l}),l.fire("removed"),delete l.canvas},clearContext:function(l){return l.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=C.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var l={},m=this.width,_=this.height,w=u(this.viewportTransform);return l.tl=a({x:0,y:0},w),l.br=a({x:m,y:_},w),l.tr=new C.Point(l.br.x,l.tl.y),l.bl=new C.Point(l.tl.x,l.br.y),this.vptCoords=l,l},cancelRequestedRender:function(){this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(l,m){var _=this.viewportTransform,w=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(l),C.util.setImageSmoothing(l,this.imageSmoothingEnabled),this.fire("before:render",{ctx:l}),this._renderBackground(l),l.save(),l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(l,m),l.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),w&&(w.canvas=this,w.shouldCache(),w._transformDone=!0,w.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(l)),this._renderOverlay(l),this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),this.fire("after:render",{ctx:l})},drawClipPathOnCanvas:function(l){var m=this.viewportTransform,_=this.clipPath;l.save(),l.transform(m[0],m[1],m[2],m[3],m[4],m[5]),l.globalCompositeOperation="destination-in",_.transform(l),l.scale(1/_.zoomX,1/_.zoomY),l.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),l.restore()},_renderObjects:function(l,m){var _,w;for(_=0,w=m.length;_<w;++_)m[_]&&m[_].render(l)},_renderBackgroundOrOverlay:function(l,m){var _=this[m+"Color"],w=this[m+"Image"],b=this.viewportTransform,E=this[m+"Vpt"];if(_||w){if(_){l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(this.width,0),l.lineTo(this.width,this.height),l.lineTo(0,this.height),l.closePath(),l.fillStyle=_.toLive?_.toLive(l,this):_,E&&l.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var A=_.gradientTransform||_.patternTransform;A&&l.transform(A[0],A[1],A[2],A[3],A[4],A[5]),l.fill(),l.restore()}w&&(l.save(),E&&l.transform(b[0],b[1],b[2],b[3],b[4],b[5]),w.render(l),l.restore())}},_renderBackground:function(l){this._renderBackgroundOrOverlay(l,"background")},_renderOverlay:function(l){this._renderBackgroundOrOverlay(l,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new C.Point(this.width/2,this.height/2)},centerObjectH:function(l){return this._centerObject(l,new C.Point(this.getCenterPoint().x,l.getCenterPoint().y))},centerObjectV:function(l){return this._centerObject(l,new C.Point(l.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(l){var m=this.getCenterPoint();return this._centerObject(l,m)},viewportCenterObject:function(l){var m=this.getVpCenter();return this._centerObject(l,m)},viewportCenterObjectH:function(l){var m=this.getVpCenter();return this._centerObject(l,new C.Point(m.x,l.getCenterPoint().y)),this},viewportCenterObjectV:function(l){var m=this.getVpCenter();return this._centerObject(l,new C.Point(l.getCenterPoint().x,m.y))},getVpCenter:function(){var l=this.getCenterPoint(),m=u(this.viewportTransform);return a(l,m)},_centerObject:function(l,m){return l.setPositionByOrigin(m,"center","center"),l.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(l){return this.toDatalessObject(l)},toObject:function(l){return this._toObjectMethod("toObject",l)},toDatalessObject:function(l){return this._toObjectMethod("toDatalessObject",l)},_toObjectMethod:function(l,m){var _=this.clipPath,w={version:C.version,objects:this._toObjects(l,m)};return _&&!_.excludeFromExport&&(w.clipPath=this._toObject(this.clipPath,l,m)),y(w,this.__serializeBgOverlay(l,m)),C.util.populateWithProperties(this,w,m),w},_toObjects:function(l,m){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,l,m)},this)},_toObject:function(l,m,_){var w;this.includeDefaultValues||(w=l.includeDefaultValues,l.includeDefaultValues=!1);var b=l[m](_);return this.includeDefaultValues||(l.includeDefaultValues=w),b},__serializeBgOverlay:function(l,m){var _={},w=this.backgroundImage,b=this.overlayImage,E=this.backgroundColor,A=this.overlayColor;return E&&E.toObject?E.excludeFromExport||(_.background=E.toObject(m)):E&&(_.background=E),A&&A.toObject?A.excludeFromExport||(_.overlay=A.toObject(m)):A&&(_.overlay=A),w&&!w.excludeFromExport&&(_.backgroundImage=this._toObject(w,l,m)),b&&!b.excludeFromExport&&(_.overlayImage=this._toObject(b,l,m)),_},svgViewportTransformation:!0,toSVG:function(l,m){l||(l={}),l.reviver=m;var _=[];return this._setSVGPreamble(_,l),this._setSVGHeader(_,l),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",m),this._setSVGObjects(_,m),this.clipPath&&_.push("</g>\n"),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",m),_.push("</svg>"),_.join("")},_setSVGPreamble:function(l,m){m.suppressPreamble||l.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(l,m){var b,_=m.width||this.width,w=m.height||this.height,E='viewBox="0 0 '+this.width+" "+this.height+'" ',A=C.Object.NUM_FRACTION_DIGITS;m.viewBox?E='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(E='viewBox="'+h(-(b=this.viewportTransform)[4]/b[0],A)+" "+h(-b[5]/b[3],A)+" "+h(this.width/b[0],A)+" "+h(this.height/b[3],A)+'" '),l.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',_,'" ','height="',w,'" ',E,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",C.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),"</defs>\n")},createSVGClipPathMarkup:function(l){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+C.Object.__uid++,'<clipPath id="'+m.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(l.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var l=this;return["background","overlay"].map(function(_){var w=l[_+"Color"];if(w&&w.toLive){var b=l[_+"Vpt"],E=l.viewportTransform;return w.toSVG({width:l.width/(b?E[0]:1),height:l.height/(b?E[3]:1)},{additionalTransform:b?C.util.matrixToSVG(E):""})}}).join("")},createSVGFontFacesMarkup:function(){var _,w,b,E,A,B,z,ie,l="",m={},ue=C.fontPaths,he=[];for(this._objects.forEach(function ce(fe){he.push(fe),fe._objects&&fe._objects.forEach(ce)}),z=0,ie=he.length;z<ie;z++)if(w=(_=he[z]).fontFamily,-1!==_.type.indexOf("text")&&!m[w]&&ue[w]&&(m[w]=!0,_.styles))for(A in b=_.styles)for(B in E=b[A])!m[w=E[B].fontFamily]&&ue[w]&&(m[w]=!0);for(var pe in m)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",pe,"';\n","\t\t\tsrc: url('",ue[pe],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},_setSVGObjects:function(l,m){var _,w,b,E=this._objects;for(w=0,b=E.length;w<b;w++)!(_=E[w]).excludeFromExport&&this._setSVGObject(l,_,m)},_setSVGObject:function(l,m,_){l.push(m.toSVG(_))},_setSVGBgOverlayImage:function(l,m,_){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&l.push(this[m].toSVG(_))},_setSVGBgOverlayColor:function(l,m){var _=this[m+"Color"],b=this.width,E=this.height;if(_)if(_.toLive){var A=_.repeat,F=C.util.invertTransform(this.viewportTransform),z=this[m+"Vpt"]?C.util.matrixToSVG(F):"";l.push('<rect transform="'+z+" translate(",b/2,",",E/2,')"',' x="',_.offsetX-b/2,'" y="',_.offsetY-E/2,'" ','width="',"repeat-y"===A||"no-repeat"===A?_.source.width:b,'" height="',"repeat-x"===A||"no-repeat"===A?_.source.height:E,'" fill="url(#SVGID_'+_.id+')"',"></rect>\n")}else l.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',"></rect>\n")},sendToBack:function(l){if(!l)return this;var _,w,b,m=this._activeObject;if(l===m&&"activeSelection"===l.type)for(_=(b=m._objects).length;_--;)p(this._objects,w=b[_]),this._objects.unshift(w);else p(this._objects,l),this._objects.unshift(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(l){if(!l)return this;var _,w,b,m=this._activeObject;if(l===m&&"activeSelection"===l.type)for(b=m._objects,_=0;_<b.length;_++)p(this._objects,w=b[_]),this._objects.push(w);else p(this._objects,l),this._objects.push(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(l,m){if(!l)return this;var w,b,E,A,F,_=this._activeObject,B=0;if(l===_&&"activeSelection"===l.type)for(F=_._objects,w=0;w<F.length;w++)(E=this._objects.indexOf(b=F[w]))>0+B&&(A=E-1,p(this._objects,b),this._objects.splice(A,0,b)),B++;else 0!==(E=this._objects.indexOf(l))&&(A=this._findNewLowerIndex(l,E,m),p(this._objects,l),this._objects.splice(A,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(l,m,_){var w,b;if(_){for(w=m,b=m-1;b>=0;--b)if(l.intersectsWithObject(this._objects[b])||l.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(l)){w=b;break}}else w=m-1;return w},bringForward:function(l,m){if(!l)return this;var w,b,E,A,F,_=this._activeObject,B=0;if(l===_&&"activeSelection"===l.type)for(w=(F=_._objects).length;w--;)(E=this._objects.indexOf(b=F[w]))<this._objects.length-1-B&&(A=E+1,p(this._objects,b),this._objects.splice(A,0,b)),B++;else(E=this._objects.indexOf(l))!==this._objects.length-1&&(A=this._findNewUpperIndex(l,E,m),p(this._objects,l),this._objects.splice(A,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(l,m,_){var w,b,E;if(_){for(w=m,b=m+1,E=this._objects.length;b<E;++b)if(l.intersectsWithObject(this._objects[b])||l.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(l)){w=b;break}}else w=m+1;return w},moveTo:function(l,m){return p(this._objects,l),this._objects.splice(m,0,l),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(C.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),C.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),C.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),y(C.StaticCanvas.prototype,C.Observable),y(C.StaticCanvas.prototype,C.Collection),y(C.StaticCanvas.prototype,C.DataURLExporter),y(C.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(l){var m=c();if(!m||!m.getContext)return null;var _=m.getContext("2d");return _&&"setLineDash"===l?typeof _.setLineDash<"u":null}}),C.StaticCanvas.prototype.toJSON=C.StaticCanvas.prototype.toObject,C.isLikelyNode&&(C.StaticCanvas.prototype.createPNGStream=function(){var l=o(this.lowerCanvasEl);return l&&l.createPNGStream()},C.StaticCanvas.prototype.createJPEGStream=function(l){var m=o(this.lowerCanvasEl);return m&&m.createJPEGStream(l)})}}(),C.BaseBrush=C.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(y){y.strokeStyle=this.color,y.lineWidth=this.width,y.lineCap=this.strokeLineCap,y.miterLimit=this.strokeMiterLimit,y.lineJoin=this.strokeLineJoin,y.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(y){var f=this.canvas.viewportTransform;y.save(),y.transform(f[0],f[1],f[2],f[3],f[4],f[5])},_setShadow:function(){if(this.shadow){var y=this.canvas,f=this.shadow,p=y.contextTop,h=y.getZoom();y&&y._isRetinaScaling()&&(h*=C.devicePixelRatio),p.shadowColor=f.color,p.shadowBlur=f.blur*h,p.shadowOffsetX=f.offsetX*h,p.shadowOffsetY=f.offsetY*h}},needsFullRender:function(){return new C.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var y=this.canvas.contextTop;y.shadowColor="",y.shadowBlur=y.shadowOffsetX=y.shadowOffsetY=0},_isOutSideCanvas:function(y){return y.x<0||y.x>this.canvas.getWidth()||y.y<0||y.y>this.canvas.getHeight()}}),C.PencilBrush=C.util.createClass(C.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(y){this.canvas=y,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(y,f,p){var h=f.midPointFrom(p);return y.quadraticCurveTo(f.x,f.y,h.x,h.y),h},onMouseDown:function(y,f){!this.canvas._isMainEvent(f.e)||(this.drawStraightLine=f.e[this.straightLineKey],this._prepareForDrawing(y),this._captureDrawingPath(y),this._render())},onMouseMove:function(y,f){if(this.canvas._isMainEvent(f.e)&&(this.drawStraightLine=f.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(y))&&this._captureDrawingPath(y)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var p=this._points,h=p.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,p[h-2],p[h-1],!0),a.stroke(),a.restore()}},onMouseUp:function(y){return!this.canvas._isMainEvent(y.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(y){var f=new C.Point(y.x,y.y);this._reset(),this._addPoint(f),this.canvas.contextTop.moveTo(f.x,f.y)},_addPoint:function(y){return!(this._points.length>1&&y.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(y),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(y){var f=new C.Point(y.x,y.y);return this._addPoint(f)},_render:function(y){var f,p,h=this._points[0],a=this._points[1];if(this._saveAndTransform(y=y||this.canvas.contextTop),y.beginPath(),2===this._points.length&&h.x===a.x&&h.y===a.y){var u=this.width/1e3;h=new C.Point(h.x,h.y),a=new C.Point(a.x,a.y),h.x-=u,a.x+=u}for(y.moveTo(h.x,h.y),f=1,p=this._points.length;f<p;f++)this._drawSegment(y,h,a),h=this._points[f],a=this._points[f+1];y.lineTo(h.x,h.y),y.stroke(),y.restore()},convertPointsToSVGPath:function(y){return C.util.getSmoothPathFromPoints(y,this.width/1e3)},_isEmptySVGPath:function(y){return"M 0 0 Q 0 0 0 0 L 0 0"===C.util.joinPath(y)},createPath:function(y){var f=new C.Path(y,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,f.shadow=new C.Shadow(this.shadow)),f},decimatePoints:function(y,f){if(y.length<=2)return y;var a,p=this.canvas.getZoom(),h=Math.pow(f/p,2),u=y.length-1,o=y[0],c=[o];for(a=1;a<u-1;a++)Math.pow(o.x-y[a].x,2)+Math.pow(o.y-y[a].y,2)>=h&&c.push(o=y[a]);return c.push(y[u]),c},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var f=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(f))this.canvas.requestRenderAll();else{var p=this.createPath(f);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.requestRenderAll(),p.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:p})}}}),C.CircleBrush=C.util.createClass(C.BaseBrush,{width:10,initialize:function(y){this.canvas=y,this.points=[]},drawDot:function(y){var f=this.addPoint(y),p=this.canvas.contextTop;this._saveAndTransform(p),this.dot(p,f),p.restore()},dot:function(y,f){y.fillStyle=f.fill,y.beginPath(),y.arc(f.x,f.y,f.radius,0,2*Math.PI,!1),y.closePath(),y.fill()},onMouseDown:function(y){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(y)},_render:function(){var f,p,y=this.canvas.contextTop,h=this.points;for(this._saveAndTransform(y),f=0,p=h.length;f<p;f++)this.dot(y,h[f]);y.restore()},onMouseMove:function(y){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(y)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(y),this._render()):this.drawDot(y))},onMouseUp:function(){var f,p,y=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var h=[];for(f=0,p=this.points.length;f<p;f++){var a=this.points[f],u=new C.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(u.shadow=new C.Shadow(this.shadow)),h.push(u)}var o=new C.Group(h);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=y,this.canvas.requestRenderAll()},addPoint:function(y){var f=new C.Point(y.x,y.y),p=C.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new C.Color(this.color).setAlpha(C.util.getRandomInt(0,100)/100).toRgba();return f.radius=p,f.fill=h,this.points.push(f),f}}),C.SprayBrush=C.util.createClass(C.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(y){this.canvas=y,this.sprayChunks=[]},onMouseDown:function(y){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(y),this.render(this.sprayChunkPoints)},onMouseMove:function(y){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(y)||(this.addSprayChunk(y),this.render(this.sprayChunkPoints))},onMouseUp:function(){var y=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var f=[],p=0,h=this.sprayChunks.length;p<h;p++)for(var a=this.sprayChunks[p],u=0,o=a.length;u<o;u++){var c=new C.Rect({width:a[u].width,height:a[u].width,left:a[u].x+1,top:a[u].y+1,originX:"center",originY:"center",fill:this.color});f.push(c)}this.optimizeOverlapping&&(f=this._getOptimizedRects(f));var g=new C.Group(f);this.shadow&&g.set("shadow",new C.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=y,this.canvas.requestRenderAll()},_getOptimizedRects:function(y){var p,h,a,f={};for(h=0,a=y.length;h<a;h++)f[p=y[h].left+""+y[h].top]||(f[p]=y[h]);var u=[];for(p in f)u.push(f[p]);return u},render:function(y){var p,h,f=this.canvas.contextTop;for(f.fillStyle=this.color,this._saveAndTransform(f),p=0,h=y.length;p<h;p++){var a=y[p];typeof a.opacity<"u"&&(f.globalAlpha=a.opacity),f.fillRect(a.x,a.y,a.width,a.width)}f.restore()},_render:function(){var f,p,y=this.canvas.contextTop;for(y.fillStyle=this.color,this._saveAndTransform(y),f=0,p=this.sprayChunks.length;f<p;f++)this.render(this.sprayChunks[f]);y.restore()},addSprayChunk:function(y){this.sprayChunkPoints=[];var f,p,h,u,a=this.width/2;for(u=0;u<this.density;u++){f=C.util.getRandomInt(y.x-a,y.x+a),p=C.util.getRandomInt(y.y-a,y.y+a),h=this.dotWidthVariance?C.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var o=new C.Point(f,p);o.width=h,this.randomOpacity&&(o.opacity=C.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),C.PatternBrush=C.util.createClass(C.PencilBrush,{getPatternSrc:function(){var p=C.util.createCanvasElement(),h=p.getContext("2d");return p.width=p.height=25,h.fillStyle=this.color,h.beginPath(),h.arc(10,10,10,0,2*Math.PI,!1),h.closePath(),h.fill(),p},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(y){return y.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(y){this.callSuper("_setBrushStyles",y),y.strokeStyle=this.getPattern(y)},createPath:function(y){var f=this.callSuper("createPath",y),p=f._getLeftTopCoords().scalarAdd(f.strokeWidth/2);return f.stroke=new C.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-p.x,offsetY:-p.y}),f}}),function(){var y=C.util.getPointer,f=C.util.degreesToRadians,p=C.util.isTouchEvent;for(var h in C.Canvas=C.util.createClass(C.StaticCanvas,{initialize:function(a,u){u||(u={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,u),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=C.PencilBrush&&new C.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var u,o,c,a=this.getActiveObjects();if(a.length>0&&!this.preserveObjectStacking){o=[],c=[];for(var g=0,l=this._objects.length;g<l;g++)-1===a.indexOf(u=this._objects[g])?o.push(u):c.push(u);a.length>1&&(this._activeObject._objects=c),o.push.apply(o,c)}else o=this._objects;return o},renderAll:function(){return this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,u){var o=a.calcTransformMatrix(),c=C.util.invertTransform(o),g=this.restorePointerVpt(u);return C.util.transformPoint(g,c)},isTargetTransparent:function(a,u,o){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var c=this._normalizePointer(a,{x:u,y:o}),g=Math.max(a.cacheTranslationX+c.x*a.zoomX,0),l=Math.max(a.cacheTranslationY+c.y*a.zoomY,0);return C.util.isTransparent(a._cacheContext,Math.round(g),Math.round(l),this.targetFindTolerance)}var m=this.contextCache,_=a.selectionBackgroundColor,w=this.viewportTransform;return a.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(w[0],w[1],w[2],w[3],w[4],w[5]),a.render(m),m.restore(),a.selectionBackgroundColor=_,C.util.isTransparent(m,u,o,this.targetFindTolerance)},_isSelectionKeyPressed:function(a){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(o){return!0===a[o]}):a[this.selectionKey]},_shouldClearSelection:function(a,u){var o=this.getActiveObjects(),c=this._activeObject;return!u||u&&c&&o.length>1&&-1===o.indexOf(u)&&c!==u&&!this._isSelectionKeyPressed(a)||u&&!u.evented||u&&!u.selectable&&c&&c!==u},_shouldCenterTransform:function(a,u,o){var c;if(a)return"scale"===u||"scaleX"===u||"scaleY"===u||"resizing"===u?c=this.centeredScaling||a.centeredScaling:"rotate"===u&&(c=this.centeredRotation||a.centeredRotation),c?!o:o},_getOriginFromCorner:function(a,u){var o={x:a.originX,y:a.originY};return"ml"===u||"tl"===u||"bl"===u?o.x="right":("mr"===u||"tr"===u||"br"===u)&&(o.x="left"),"tl"===u||"mt"===u||"tr"===u?o.y="bottom":("bl"===u||"mb"===u||"br"===u)&&(o.y="top"),o},_getActionFromCorner:function(a,u,o,c){if(!u||!a)return"drag";var g=c.controls[u];return g.getActionName(o,g,c)},_setupCurrentTransform:function(a,u,o){if(u){var c=this.getPointer(a),g=u.__corner,l=u.controls[g],m=o&&g?l.getActionHandler(a,u,l):C.controlsUtils.dragHandler,_=this._getActionFromCorner(o,g,a,u),w=this._getOriginFromCorner(u,g),b=a[this.centeredKey],E={target:u,action:_,actionHandler:m,corner:g,scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,offsetX:c.x-u.left,offsetY:c.y-u.top,originX:w.x,originY:w.y,ex:c.x,ey:c.y,lastX:c.x,lastY:c.y,theta:f(u.angle),width:u.width*u.scaleX,shiftKey:a.shiftKey,altKey:b,original:C.util.saveObjectTransform(u)};this._shouldCenterTransform(u,_,b)&&(E.originX="center",E.originY="center"),E.original.originX=w.x,E.original.originY=w.y,this._currentTransform=E,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var u=this._groupSelector,o=new C.Point(u.ex,u.ey),c=C.util.transformPoint(o,this.viewportTransform),g=new C.Point(u.ex+u.left,u.ey+u.top),l=C.util.transformPoint(g,this.viewportTransform),m=Math.min(c.x,l.x),_=Math.min(c.y,l.y),w=Math.max(c.x,l.x),b=Math.max(c.y,l.y),E=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(m,_,w-m,b-_)),this.selectionLineWidth&&this.selectionBorderColor&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,m+=E,_+=E,w-=E,b-=E,C.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(m,_,w-m,b-_))},findTarget:function(a,u){if(!this.skipTargetFind){var m,_,c=this.getPointer(a,!0),g=this._activeObject,l=this.getActiveObjects(),w=p(a),b=l.length>1&&!u||1===l.length;if(this.targets=[],b&&g._findTargetCorner(c,w)||l.length>1&&!u&&g===this._searchPossibleTargets([g],c))return g;if(1===l.length&&g===this._searchPossibleTargets([g],c)){if(!this.preserveObjectStacking)return g;m=g,_=this.targets,this.targets=[]}var E=this._searchPossibleTargets(this._objects,c);return a[this.altSelectionKey]&&E&&m&&E!==m&&(E=m,this.targets=_),E}},_checkTarget:function(a,u,o){if(u&&u.visible&&u.evented&&u.containsPoint(a)){if(!this.perPixelTargetFind&&!u.perPixelTargetFind||u.isEditing)return!0;if(!this.isTargetTransparent(u,o.x,o.y))return!0}},_searchPossibleTargets:function(a,u){for(var o,g,c=a.length;c--;){var l=a[c],m=l.group?this._normalizePointer(l.group,u):u;if(this._checkTarget(m,l,u)){(o=a[c]).subTargetCheck&&o instanceof C.Group&&(g=this._searchPossibleTargets(o._objects,u))&&this.targets.push(g);break}}return o},restorePointerVpt:function(a){return C.util.transformPoint(a,C.util.invertTransform(this.viewportTransform))},getPointer:function(a,u){if(this._absolutePointer&&!u)return this._absolutePointer;if(this._pointer&&u)return this._pointer;var _,o=y(a),c=this.upperCanvasEl,g=c.getBoundingClientRect(),l=g.width||0,m=g.height||0;(!l||!m)&&("top"in g&&"bottom"in g&&(m=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(l=Math.abs(g.right-g.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,u||(o=this.restorePointerVpt(o));var w=this.getRetinaScaling();return 1!==w&&(o.x/=w,o.y/=w),{x:o.x*(_=0===l||0===m?{width:1,height:1}:{width:c.width/l,height:c.height/m}).width,y:o.y*_.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),u=this.lowerCanvasEl,o=this.upperCanvasEl;o?o.className="":(o=this._createCanvasElement(),this.upperCanvasEl=o),C.util.addClass(o,"upper-canvas "+a),this.wrapperEl.appendChild(o),this._copyCanvasStyle(u,o),this._applyCanvasStyle(o),this.contextTop=o.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=C.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),C.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),C.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var u=this.width||a.width,o=this.height||a.height;C.util.setStyle(a,{position:"absolute",width:u+"px",height:o+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=u,a.height=o,C.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,u){u.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?"activeSelection"===a.type&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,u){var o=!1,c=this.getActiveObjects(),g=[],l=[];a.forEach(function(m){-1===c.indexOf(m)&&(o=!0,m.fire("deselected",{e:u,target:m}),l.push(m))}),c.forEach(function(m){-1===a.indexOf(m)&&(o=!0,m.fire("selected",{e:u,target:m}),g.push(m))}),a.length>0&&c.length>0?o&&this.fire("selection:updated",{e:u,selected:g,deselected:l}):c.length>0?this.fire("selection:created",{e:u,selected:g}):a.length>0&&this.fire("selection:cleared",{e:u,deselected:l})},setActiveObject:function(a,u){var o=this.getActiveObjects();return this._setActiveObject(a,u),this._fireSelectionEvents(o,u),this},_setActiveObject:function(a,u){return!(this._activeObject===a||!this._discardActiveObject(u,a)||a.onSelect({e:u})||(this._activeObject=a,0))},_discardActiveObject:function(a,u){var o=this._activeObject;if(o){if(o.onDeselect({e:a,object:u}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var u=this.getActiveObjects(),o=this.getActiveObject();return u.length&&this.fire("before:selection:cleared",{target:o,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(u,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(u){C.util.cleanUpJsdomNode(this[u]),this[u]=void 0}.bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,C.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var u=this._activeObject;u&&u._renderControls(a)},_toObject:function(a,u,o){var c=this._realizeGroupTransformOnObject(a),g=this.callSuper("_toObject",a,u,o);return this._unwindGroupTransformOnObject(a,c),g},_realizeGroupTransformOnObject:function(a){if(a.group&&"activeSelection"===a.group.type&&this._activeObject===a.group){var o={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(c){o[c]=a[c]}),C.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),o}return null},_unwindGroupTransformOnObject:function(a,u){u&&a.set(u)},_setSVGObject:function(a,u,o){var c=this._realizeGroupTransformOnObject(u);this.callSuper("_setSVGObject",a,u,o),this._unwindGroupTransformOnObject(u,c)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),C.StaticCanvas.prototype.setViewportTransform.call(this,a)}}),C.StaticCanvas)"prototype"!==h&&(C.Canvas[h]=C.StaticCanvas[h])}(),function(){var y=C.util.addListener,f=C.util.removeListener,u={passive:!1};function o(c,g){return c.button&&c.button===g-1}C.util.object.extend(C.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(y,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(c,g){var l=this.upperCanvasEl,m=this._getEventPrefix();c(C.window,"resize",this._onResize),c(l,m+"down",this._onMouseDown),c(l,m+"move",this._onMouseMove,u),c(l,m+"out",this._onMouseOut),c(l,m+"enter",this._onMouseEnter),c(l,"wheel",this._onMouseWheel),c(l,"contextmenu",this._onContextMenu),c(l,"dblclick",this._onDoubleClick),c(l,"dragover",this._onDragOver),c(l,"dragenter",this._onDragEnter),c(l,"dragleave",this._onDragLeave),c(l,"drop",this._onDrop),this.enablePointerEvents||c(l,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](l,"gesture",this._onGesture),eventjs[g](l,"drag",this._onDrag),eventjs[g](l,"orientation",this._onOrientationChange),eventjs[g](l,"shake",this._onShake),eventjs[g](l,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(f,"remove");var c=this._getEventPrefix();f(C.document,c+"up",this._onMouseUp),f(C.document,"touchend",this._onTouchEnd,u),f(C.document,c+"move",this._onMouseMove,u),f(C.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(c,g){this.__onTransformGesture&&this.__onTransformGesture(c,g)},_onDrag:function(c,g){this.__onDrag&&this.__onDrag(c,g)},_onMouseWheel:function(c){this.__onMouseWheel(c)},_onMouseOut:function(c){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:c}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:c});var l=this;this._hoveredTargets.forEach(function(m){l.fire("mouse:out",{target:g,e:c}),m&&g.fire("mouseout",{e:c})}),this._hoveredTargets=[]},_onMouseEnter:function(c){!this._currentTransform&&!this.findTarget(c)&&(this.fire("mouse:over",{target:null,e:c}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(c,g){this.__onOrientationChange&&this.__onOrientationChange(c,g)},_onShake:function(c,g){this.__onShake&&this.__onShake(c,g)},_onLongPress:function(c,g){this.__onLongPress&&this.__onLongPress(c,g)},_onDragOver:function(c){c.preventDefault();var g=this._simpleEventHandler("dragover",c);this._fireEnterLeaveEvents(g,c)},_onDrop:function(c){return this._simpleEventHandler("drop:before",c),this._simpleEventHandler("drop",c)},_onContextMenu:function(c){return this.stopContextMenu&&(c.stopPropagation(),c.preventDefault()),!1},_onDoubleClick:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"dblclick"),this._resetTransformEventData(c)},getPointerId:function(c){var g=c.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?c.pointerId:-1},_isMainEvent:function(c){return!0===c.isPrimary||!1!==c.isPrimary&&("touchend"===c.type&&0===c.touches.length||!c.changedTouches||c.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(c){c.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(c)),this.__onMouseDown(c),this._resetTransformEventData();var g=this.upperCanvasEl,l=this._getEventPrefix();y(C.document,"touchend",this._onTouchEnd,u),y(C.document,"touchmove",this._onMouseMove,u),f(g,l+"down",this._onMouseDown)},_onMouseDown:function(c){this.__onMouseDown(c),this._resetTransformEventData();var g=this.upperCanvasEl,l=this._getEventPrefix();f(g,l+"move",this._onMouseMove,u),y(C.document,l+"up",this._onMouseUp),y(C.document,l+"move",this._onMouseMove,u)},_onTouchEnd:function(c){if(!(c.touches.length>0)){this.__onMouseUp(c),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();f(C.document,"touchend",this._onTouchEnd,u),f(C.document,"touchmove",this._onMouseMove,u);var l=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){y(l.upperCanvasEl,g+"down",l._onMouseDown),l._willAddMouseDown=0},400)}},_onMouseUp:function(c){this.__onMouseUp(c),this._resetTransformEventData();var g=this.upperCanvasEl,l=this._getEventPrefix();this._isMainEvent(c)&&(f(C.document,l+"up",this._onMouseUp),f(C.document,l+"move",this._onMouseMove,u),y(g,l+"move",this._onMouseMove,u))},_onMouseMove:function(c){!this.allowTouchScrolling&&c.preventDefault&&c.preventDefault(),this.__onMouseMove(c)},_onResize:function(){this.calcOffset()},_shouldRender:function(c){var g=this._activeObject;return!!(!!g!=!!c||g&&c&&g!==c)},__onMouseUp:function(c){var g,l=this._currentTransform,m=this._groupSelector,_=!1,w=!m||0===m.left&&0===m.top;if(this._cacheTransformEventData(c),g=this._target,this._handleEvent(c,"up:before"),o(c,3))this.fireRightClick&&this._handleEvent(c,"up",3,w);else{if(o(c,2))return this.fireMiddleClick&&this._handleEvent(c,"up",2,w),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(c);else if(this._isMainEvent(c)){if(l&&(this._finalizeCurrentTransform(c),_=l.actionPerformed),!w){var b=g===this._activeObject;this._maybeGroupObjects(c),_||(_=this._shouldRender(g)||!b&&g===this._activeObject)}var E,A;if(g){if(E=g._findTargetCorner(this.getPointer(c,!0),C.util.isTouchEvent(c)),g.selectable&&g!==this._activeObject&&"up"===g.activeOn)this.setActiveObject(g,c),_=!0;else{var F=g.controls[E],B=F&&F.getMouseUpHandler(c,g,F);B&&B(c,l,(A=this.getPointer(c)).x,A.y)}g.isMoving=!1}if(l&&(l.target!==g||l.corner!==E)){var z=l.target&&l.target.controls[l.corner],ie=z&&z.getMouseUpHandler(c,g,F);A=A||this.getPointer(c),ie&&ie(c,l,A.x,A.y)}this._setCursorFromEvent(c,g),this._handleEvent(c,"up",1,w),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),_?this.requestRenderAll():w||this.renderTop()}}},_simpleEventHandler:function(c,g){var l=this.findTarget(g),m=this.targets,_={e:g,target:l,subTargets:m};if(this.fire(c,_),l&&l.fire(c,_),!m)return l;for(var w=0;w<m.length;w++)m[w].fire(c,_);return l},_handleEvent:function(c,g,l,m){var _=this._target,w=this.targets||[],b={e:c,target:_,subTargets:w,button:l||1,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===g&&(b.currentTarget=this.findTarget(c),b.currentSubTargets=this.targets),this.fire("mouse:"+g,b),_&&_.fire("mouse"+g,b);for(var E=0;E<w.length;E++)w[E].fire("mouse"+g,b)},_finalizeCurrentTransform:function(c){var g=this._currentTransform,l=g.target,m={e:c,target:l,transform:g,action:g.action};l._scaling&&(l._scaling=!1),l.setCoords(),(g.actionPerformed||this.stateful&&l.hasStateChanged())&&this._fire("modified",m)},_onMouseDownInDrawingMode:function(c){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(c).requestRenderAll();var g=this.getPointer(c);this.freeDrawingBrush.onMouseDown(g,{e:c,pointer:g}),this._handleEvent(c,"down")},_onMouseMoveInDrawingMode:function(c){if(this._isCurrentlyDrawing){var g=this.getPointer(c);this.freeDrawingBrush.onMouseMove(g,{e:c,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(c,"move")},_onMouseUpInDrawingMode:function(c){var g=this.getPointer(c);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:c,pointer:g}),this._handleEvent(c,"up")},__onMouseDown:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"down:before");var g=this._target;if(o(c,3))this.fireRightClick&&this._handleEvent(c,"down",3);else if(o(c,2))this.fireMiddleClick&&this._handleEvent(c,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(c);else if(this._isMainEvent(c)&&!this._currentTransform){this._previousPointer=l=this._pointer;var m=this._shouldRender(g),_=this._shouldGroup(c,g);if(this._shouldClearSelection(c,g)?this.discardActiveObject(c):_&&(this._handleGrouping(c,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var w=g===this._activeObject;g.selectable&&"down"===g.activeOn&&this.setActiveObject(g,c);var b=g._findTargetCorner(this.getPointer(c,!0),C.util.isTouchEvent(c));if(g.__corner=b,g===this._activeObject&&(b||!_)){this._setupCurrentTransform(c,g,w);var E=g.controls[b],l=this.getPointer(c),A=E&&E.getMouseDownHandler(c,g,E);A&&A(c,this._currentTransform,l.x,l.y)}}this._handleEvent(c,"down"),(m||_)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(c){this._resetTransformEventData(),this._pointer=this.getPointer(c,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(c)||null},_beforeTransform:function(c){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:c,transform:g})},__onMouseMove:function(c){var g,l;if(this._handleEvent(c,"move:before"),this._cacheTransformEventData(c),this.isDrawingMode)this._onMouseMoveInDrawingMode(c);else if(this._isMainEvent(c)){var m=this._groupSelector;m?(m.left=(l=this._absolutePointer).x-m.ex,m.top=l.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(c):(g=this.findTarget(c)||null,this._setCursorFromEvent(c,g),this._fireOverOutEvents(g,c)),this._handleEvent(c,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(c,g){var l=this._hoveredTarget,m=this._hoveredTargets,_=this.targets,w=Math.max(m.length,_.length);this.fireSyntheticInOutEvents(c,g,{oldTarget:l,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<w;b++)this.fireSyntheticInOutEvents(_[b],g,{oldTarget:m[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=c,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(c,g){var l=this._draggedoverTarget,m=this._hoveredTargets,_=this.targets,w=Math.max(m.length,_.length);this.fireSyntheticInOutEvents(c,g,{oldTarget:l,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<w;b++)this.fireSyntheticInOutEvents(_[b],g,{oldTarget:m[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=c},fireSyntheticInOutEvents:function(c,g,l){var m,_,E,w=l.oldTarget,A=w!==c,F=l.canvasEvtIn,B=l.canvasEvtOut;A&&(m={e:g,target:c,previousTarget:w},_={e:g,target:w,nextTarget:c}),E=c&&A,w&&A&&(B&&this.fire(B,_),w.fire(l.evtOut,_)),E&&(F&&this.fire(F,m),c.fire(l.evtIn,m))},__onMouseWheel:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"wheel"),this._resetTransformEventData()},_transformObject:function(c){var g=this.getPointer(c),l=this._currentTransform;l.reset=!1,l.shiftKey=c.shiftKey,l.altKey=c[this.centeredKey],this._performTransformAction(c,l,g),l.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(c,g,l){var w=g.action,b=!1,E=g.actionHandler;E&&(b=E(c,g,l.x,l.y)),"drag"===w&&b&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||b},_fire:C.controlsUtils.fireEvent,_setCursorFromEvent:function(c,g){if(!g)return this.setCursor(this.defaultCursor),!1;var l=g.hoverCursor||this.hoverCursor,m=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,_=(!m||!m.contains(g))&&g._findTargetCorner(this.getPointer(c,!0));_?this.setCursor(this.getCornerCursor(_,g,c)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(w){l=w.hoverCursor||l}),this.setCursor(l))},getCornerCursor:function(c,g,l){var m=g.controls[c];return m.cursorStyleHandler(l,m,g)}})}(),function(){var y=Math.min,f=Math.max;C.util.object.extend(C.Canvas.prototype,{_shouldGroup:function(p,h){var a=this._activeObject;return a&&this._isSelectionKeyPressed(p)&&h&&h.selectable&&this.selection&&(a!==h||"activeSelection"===a.type)&&!h.onSelect({e:p})},_handleGrouping:function(p,h){var a=this._activeObject;a.__corner||h===a&&(!(h=this.findTarget(p,!0))||!h.selectable)||(a&&"activeSelection"===a.type?this._updateActiveSelection(h,p):this._createActiveSelection(h,p))},_updateActiveSelection:function(p,h){var a=this._activeObject,u=a._objects.slice(0);a.contains(p)?(a.removeWithUpdate(p),this._hoveredTarget=p,this._hoveredTargets=this.targets.concat(),1===a.size()&&this._setActiveObject(a.item(0),h)):(a.addWithUpdate(p),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(u,h)},_createActiveSelection:function(p,h){var a=this.getActiveObjects(),u=this._createGroup(p);this._hoveredTarget=u,this._setActiveObject(u,h),this._fireSelectionEvents(a,h)},_createGroup:function(p){var h=this._objects,u=h.indexOf(this._activeObject)<h.indexOf(p)?[this._activeObject,p]:[p,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new C.ActiveSelection(u,{canvas:this})},_groupSelectedObjects:function(p){var a,h=this._collectObjects(p);1===h.length?this.setActiveObject(h[0],p):h.length>1&&(a=new C.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(a,p))},_collectObjects:function(p){for(var a,h=[],u=this._groupSelector.ex,o=this._groupSelector.ey,c=u+this._groupSelector.left,g=o+this._groupSelector.top,l=new C.Point(y(u,c),y(o,g)),m=new C.Point(f(u,c),f(o,g)),_=!this.selectionFullyContained,w=u===c&&o===g,b=this._objects.length;b--&&!((a=this._objects[b])&&a.selectable&&a.visible&&(_&&a.intersectsWithRect(l,m,!0)||a.isContainedWithinRect(l,m,!0)||_&&a.containsPoint(l,null,!0)||_&&a.containsPoint(m,null,!0))&&(h.push(a),w)););return h.length>1&&(h=h.filter(function(E){return!E.onSelect({e:p})})),h},_maybeGroupObjects:function(p){this.selection&&this._groupSelector&&this._groupSelectedObjects(p),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),C.util.object.extend(C.StaticCanvas.prototype,{toDataURL:function(y){y||(y={});var f=y.format||"png",p=y.quality||1,h=(y.multiplier||1)*(y.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(h,y);return C.util.toDataURL(a,f,p)},toCanvasElement:function(y,f){var p=((f=f||{}).width||this.width)*(y=y||1),h=(f.height||this.height)*y,a=this.getZoom(),u=this.width,o=this.height,c=a*y,g=this.viewportTransform,_=this.interactive,w=[c,0,0,c,(g[4]-(f.left||0))*y,(g[5]-(f.top||0))*y],b=this.enableRetinaScaling,E=C.util.createCanvasElement(),A=this.contextTop;return E.width=p,E.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=w,this.width=p,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(E.getContext("2d"),this._objects),this.viewportTransform=g,this.width=u,this.height=o,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=b,this.contextTop=A,E}}),C.util.object.extend(C.StaticCanvas.prototype,{loadFromJSON:function(y,f,p){if(y){var h="string"==typeof y?JSON.parse(y):C.util.object.clone(y),a=this,u=h.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(c){a.clear(),a._setBgOverlay(h,function(){u?a._enlivenObjects([u],function(g){a.clipPath=g[0],a.__setupCanvas.call(a,h,c,o,f)}):a.__setupCanvas.call(a,h,c,o,f)})},p),this}},__setupCanvas:function(y,f,p,h){var a=this;f.forEach(function(u,o){a.insertAt(u,o)}),this.renderOnAddRemove=p,delete y.objects,delete y.backgroundImage,delete y.overlayImage,delete y.background,delete y.overlay,this._setOptions(y),this.renderAll(),h&&h()},_setBgOverlay:function(y,f){var p={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(y.backgroundImage||y.overlayImage||y.background||y.overlay){var h=function(){p.backgroundImage&&p.overlayImage&&p.backgroundColor&&p.overlayColor&&f&&f()};this.__setBgOverlay("backgroundImage",y.backgroundImage,p,h),this.__setBgOverlay("overlayImage",y.overlayImage,p,h),this.__setBgOverlay("backgroundColor",y.background,p,h),this.__setBgOverlay("overlayColor",y.overlay,p,h)}else f&&f()},__setBgOverlay:function(y,f,p,h){var a=this;if(!f)return p[y]=!0,void(h&&h());"backgroundImage"===y||"overlayImage"===y?C.util.enlivenObjects([f],function(u){a[y]=u[0],p[y]=!0,h&&h()}):this["set"+C.util.string.capitalize(y,!0)](f,function(){p[y]=!0,h&&h()})},_enlivenObjects:function(y,f,p){y&&0!==y.length?C.util.enlivenObjects(y,function(h){f&&f(h)},null,p):f&&f([])},_toDataURL:function(y,f){this.clone(function(p){f(p.toDataURL(y))})},_toDataURLWithMultiplier:function(y,f,p){this.clone(function(h){p(h.toDataURLWithMultiplier(y,f))})},clone:function(y,f){var p=JSON.stringify(this.toJSON(f));this.cloneWithoutData(function(h){h.loadFromJSON(p,function(){y&&y(h)})})},cloneWithoutData:function(y){var f=C.util.createCanvasElement();f.width=this.width,f.height=this.height;var p=new C.Canvas(f);this.backgroundImage?(p.setBackgroundImage(this.backgroundImage.src,function(){p.renderAll(),y&&y(p)}),p.backgroundImageOpacity=this.backgroundImageOpacity,p.backgroundImageStretch=this.backgroundImageStretch):y&&y(p)}}),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,h=f.util.object.clone,a=f.util.toFixed,u=f.util.string.capitalize,o=f.util.degreesToRadians;f.Object||(f.Object=f.util.createClass(f.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!f.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(l){l&&this.setOptions(l)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=f.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(l){var m=f.perfLimitSizeTotal,_=l.width,w=l.height,b=f.maxCacheSideLimit,E=f.minCacheSideLimit;if(_<=b&&w<=b&&_*w<=m)return _<E&&(l.width=E),w<E&&(l.height=E),l;var F=f.util.limitDimsByArea(_/w,m),B=f.util.capValue,z=B(E,F.x,b),ie=B(E,F.y,b);return _>z&&(l.zoomX/=_/z,l.width=z,l.capped=!0),w>ie&&(l.zoomY/=w/ie,l.height=ie,l.capped=!0),l},_getCacheCanvasDimensions:function(){var l=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),_=m.x*l.scaleX/this.scaleX,w=m.y*l.scaleY/this.scaleY;return{width:_+2,height:w+2,zoomX:l.scaleX,zoomY:l.scaleY,x:_,y:w}},_updateCacheCanvas:function(){var l=this.canvas;if(this.noScaleCache&&l&&l._currentTransform){var _=l._currentTransform.action;if(this===l._currentTransform.target&&_.slice&&"scale"===_.slice(0,5))return!1}var B,z,w=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),E=f.minCacheSideLimit,A=b.width,F=b.height,ie=b.zoomX,ue=b.zoomY,he=A!==this.cacheWidth||F!==this.cacheHeight,ce=he||this.zoomX!==ie||this.zoomY!==ue,fe=0,xe=0,ve=!1;if(he){var Ce=this._cacheCanvas.width,M=this._cacheCanvas.height,k=A>Ce||F>M;ve=k||(A<.9*Ce||F<.9*M)&&Ce>E&&M>E,k&&!b.capped&&(A>E||F>E)&&(fe=.1*A,xe=.1*F)}return this instanceof f.Text&&this.path&&(ce=!0,ve=!0,fe+=this.getHeightOfLine(0)*this.zoomX,xe+=this.getHeightOfLine(0)*this.zoomY),!!ce&&(ve?(w.width=Math.ceil(A+fe),w.height=Math.ceil(F+xe)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,w.width,w.height)),B=b.x/2,z=b.y/2,this.cacheTranslationX=Math.round(w.width/2-B)+B,this.cacheTranslationY=Math.round(w.height/2-z)+z,this.cacheWidth=A,this.cacheHeight=F,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ie,ue),this.zoomX=ie,this.zoomY=ue,!0)},setOptions:function(l){this._setOptions(l),this._initGradient(l.fill,"fill"),this._initGradient(l.stroke,"stroke"),this._initPattern(l.fill,"fill"),this._initPattern(l.stroke,"stroke")},transform:function(l){var _=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&l===this.canvas.contextTop));l.transform(_[0],_[1],_[2],_[3],_[4],_[5])},toObject:function(l){var m=f.Object.NUM_FRACTION_DIGITS,_={type:this.type,version:f.version,originX:this.originX,originY:this.originY,left:a(this.left,m),top:a(this.top,m),width:a(this.width,m),height:a(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,m),scaleX:a(this.scaleX,m),scaleY:a(this.scaleY,m),angle:a(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,m),skewY:a(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(_.clipPath=this.clipPath.toObject(l),_.clipPath.inverted=this.clipPath.inverted,_.clipPath.absolutePositioned=this.clipPath.absolutePositioned),f.util.populateWithProperties(this,_,l),this.includeDefaultValues||(_=this._removeDefaultValues(_)),_},toDatalessObject:function(l){return this.toObject(l)},_removeDefaultValues:function(l){var m=f.util.getKlass(l.type).prototype;return m.stateProperties.forEach(function(w){"left"===w||"top"===w||(l[w]===m[w]&&delete l[w],Array.isArray(l[w])&&Array.isArray(m[w])&&0===l[w].length&&0===m[w].length&&delete l[w])}),l},toString:function(){return"#<fabric."+u(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var l=f.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(l.scaleX),scaleY:Math.abs(l.scaleY)}},getTotalObjectScaling:function(){var l=this.getObjectScaling(),m=l.scaleX,_=l.scaleY;if(this.canvas){var w=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();m*=w*b,_*=w*b}return{scaleX:m,scaleY:_}},getObjectOpacity:function(){var l=this.opacity;return this.group&&(l*=this.group.getObjectOpacity()),l},_set:function(l,m){var w=this[l]!==m,b=!1;return("scaleX"===l||"scaleY"===l)&&(m=this._constrainScale(m)),"scaleX"===l&&m<0?(this.flipX=!this.flipX,m*=-1):"scaleY"===l&&m<0?(this.flipY=!this.flipY,m*=-1):"shadow"!==l||!m||m instanceof f.Shadow?"dirty"===l&&this.group&&this.group.set("dirty",m):m=new f.Shadow(m),this[l]=m,w&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(l)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(l)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:f.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(l){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(l.save(),this._setupCompositeOperation(l),this.drawSelectionBackground(l),this.transform(l),this._setOpacity(l),this._setShadow(l,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(l)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(l),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),l.restore())},renderCache:function(l){l=l||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,l.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!!("stroke"===this.paintFirst&&this.hasFill()&&this.hasStroke()&&"object"==typeof this.shadow||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(l,m){if(l.save(),l.globalCompositeOperation=m.inverted?"destination-out":"destination-in",m.absolutePositioned){var _=f.util.invertTransform(this.calcTransformMatrix());l.transform(_[0],_[1],_[2],_[3],_[4],_[5])}m.transform(l),l.scale(1/m.zoomX,1/m.zoomY),l.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),l.restore()},drawObject:function(l,m){var _=this.fill,w=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(l)):this._renderBackground(l),this._render(l),this._drawClipPath(l,this.clipPath),this.fill=_,this.stroke=w},_drawClipPath:function(l,m){!m||(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(l,m))},drawCacheOnCanvas:function(l){l.scale(1/this.zoomX,1/this.zoomY),l.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(l){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!l&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!l){var m=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-_/2,m,_)}return!0}return!1},_renderBackground:function(l){if(this.backgroundColor){var m=this._getNonTransformedDimensions();l.fillStyle=this.backgroundColor,l.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(l)}},_setOpacity:function(l){this.group&&!this.group._transformDone?l.globalAlpha=this.getObjectOpacity():l.globalAlpha*=this.opacity},_setStrokeStyles:function(l,m){var _=m.stroke;_&&(l.lineWidth=m.strokeWidth,l.lineCap=m.strokeLineCap,l.lineDashOffset=m.strokeDashOffset,l.lineJoin=m.strokeLineJoin,l.miterLimit=m.strokeMiterLimit,_.toLive?"percentage"===_.gradientUnits||_.gradientTransform||_.patternTransform?this._applyPatternForTransformedGradient(l,_):(l.strokeStyle=_.toLive(l,this),this._applyPatternGradientTransform(l,_)):l.strokeStyle=m.stroke)},_setFillStyles:function(l,m){var _=m.fill;_&&(_.toLive?(l.fillStyle=_.toLive(l,this),this._applyPatternGradientTransform(l,m.fill)):l.fillStyle=_)},_setClippingProperties:function(l){l.globalAlpha=1,l.strokeStyle="transparent",l.fillStyle="#000000"},_setLineDash:function(l,m){!m||0===m.length||(1&m.length&&m.push.apply(m,m),l.setLineDash(m))},_renderControls:function(l,m){var b,E,A,_=this.getViewportTransform(),w=this.calcTransformMatrix();E=typeof(m=m||{}).hasBorders<"u"?m.hasBorders:this.hasBorders,A=typeof m.hasControls<"u"?m.hasControls:this.hasControls,w=f.util.multiplyTransformMatrices(_,w),b=f.util.qrDecompose(w),l.save(),l.translate(b.translateX,b.translateY),l.lineWidth=1*this.borderScaleFactor,this.group||(l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),l.rotate(o(this.group?b.angle:this.angle)),m.forActiveSelection||this.group?E&&this.drawBordersInGroup(l,b,m):E&&this.drawBorders(l,m),A&&this.drawControls(l,m),l.restore()},_setShadow:function(l){if(this.shadow){var w,m=this.shadow,_=this.canvas,b=_&&_.viewportTransform[0]||1,E=_&&_.viewportTransform[3]||1;w=m.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),_&&_._isRetinaScaling()&&(b*=f.devicePixelRatio,E*=f.devicePixelRatio),l.shadowColor=m.color,l.shadowBlur=m.blur*f.browserShadowBlurConstant*(b+E)*(w.scaleX+w.scaleY)/4,l.shadowOffsetX=m.offsetX*b*w.scaleX,l.shadowOffsetY=m.offsetY*E*w.scaleY}},_removeShadow:function(l){!this.shadow||(l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0)},_applyPatternGradientTransform:function(l,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var _=m.gradientTransform||m.patternTransform,w=-this.width/2+m.offsetX||0,b=-this.height/2+m.offsetY||0;return"percentage"===m.gradientUnits?l.transform(this.width,0,0,this.height,w,b):l.transform(1,0,0,1,w,b),_&&l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),{offsetX:w,offsetY:b}},_renderPaintInOrder:function(l){"stroke"===this.paintFirst?(this._renderStroke(l),this._renderFill(l)):(this._renderFill(l),this._renderStroke(l))},_render:function(){},_renderFill:function(l){!this.fill||(l.save(),this._setFillStyles(l,this),"evenodd"===this.fillRule?l.fill("evenodd"):l.fill(),l.restore())},_renderStroke:function(l){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();l.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&l.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(l,this.strokeDashArray),this._setStrokeStyles(l,this),l.stroke(),l.restore()}},_applyPatternForTransformedGradient:function(l,m){var b,_=this._limitCacheSize(this._getCacheCanvasDimensions()),w=f.util.createCanvasElement(),E=this.canvas.getRetinaScaling(),A=_.x/this.scaleX/E,F=_.y/this.scaleY/E;w.width=A,w.height=F,(b=w.getContext("2d")).beginPath(),b.moveTo(0,0),b.lineTo(A,0),b.lineTo(A,F),b.lineTo(0,F),b.closePath(),b.translate(A/2,F/2),b.scale(_.zoomX/this.scaleX/E,_.zoomY/this.scaleY/E),this._applyPatternGradientTransform(b,m),b.fillStyle=m.toLive(l),b.fill(),l.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),l.scale(E*this.scaleX/_.zoomX,E*this.scaleY/_.zoomY),l.strokeStyle=b.createPattern(w,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var l=f.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",l.scaleX),this.set("scaleY",l.scaleY),this.angle=l.angle,this.skewX=l.skewX,this.skewY=0}},_removeTransformMatrix:function(l){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=f.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,l&&(this.scaleX*=l.scaleX,this.scaleY*=l.scaleY,this.cropX=l.cropX,this.cropY=l.cropY,m.x+=l.offsetLeft,m.y+=l.offsetTop,this.width=l.width,this.height=l.height),this.setPositionByOrigin(m,"center","center")},clone:function(l,m){var _=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(_,l):f.Object._fromObject("Object",_,l)},cloneAsImage:function(l,m){var _=this.toCanvasElement(m);return l&&l(new f.Image(_)),this},toCanvasElement:function(l){l||(l={});var m=f.util,_=m.saveObjectTransform(this),w=this.group,b=this.shadow,E=Math.abs,A=(l.multiplier||1)*(l.enableRetinaScaling?f.devicePixelRatio:1);delete this.group,l.withoutTransform&&m.resetObjectTransform(this),l.withoutShadow&&(this.shadow=null);var ie,he,ce,F=f.util.createCanvasElement(),B=this.getBoundingRect(!0,!0),z=this.shadow,ue={x:0,y:0};z&&(he=z.blur,ie=z.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),ue.x=2*Math.round(E(z.offsetX)+he)*E(ie.scaleX),ue.y=2*Math.round(E(z.offsetY)+he)*E(ie.scaleY)),ce=B.height+ue.y,F.width=Math.ceil(B.width+ue.x),F.height=Math.ceil(ce);var fe=new f.StaticCanvas(F,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===l.format&&(fe.backgroundColor="#fff"),this.setPositionByOrigin(new f.Point(fe.width/2,fe.height/2),"center","center");var xe=this.canvas;fe.add(this);var ve=fe.toCanvasElement(A||1,l);return this.shadow=b,this.set("canvas",xe),w&&(this.group=w),this.set(_).setCoords(),fe._objects=[],fe.dispose(),fe=null,ve},toDataURL:function(l){return l||(l={}),f.util.toDataURL(this.toCanvasElement(l),l.format||"png",l.quality||1)},isType:function(l){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===l},complexity:function(){return 1},toJSON:function(l){return this.toObject(l)},rotate:function(l){var m=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",l),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(l,m){m=m||this.canvas.getPointer(l);var _=new f.Point(m.x,m.y),w=this._getLeftTopCoords();return this.angle&&(_=f.util.rotatePoint(_,w,o(-this.angle))),{x:_.x-w.x,y:_.y-w.y}},_setupCompositeOperation:function(l){this.globalCompositeOperation&&(l.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){f.runningAnimations&&f.runningAnimations.cancelByTarget(this)}}),f.util.createAccessors&&f.util.createAccessors(f.Object),p(f.Object.prototype,f.Observable),f.Object.NUM_FRACTION_DIGITS=2,f.Object.ENLIVEN_PROPS=["clipPath"],f.Object._fromObject=function(l,m,_,w){var b=f[l];m=h(m,!0),f.util.enlivenPatterns([m.fill,m.stroke],function(E){typeof E[0]<"u"&&(m.fill=E[0]),typeof E[1]<"u"&&(m.stroke=E[1]),f.util.enlivenObjectEnlivables(m,m,function(){var A=w?new b(m[w],m):new b(m);_&&_(A)})})},f.Object.__uid=0)}(Re),function(){var y=C.util.degreesToRadians,f={left:-.5,center:0,right:.5},p={top:-.5,center:0,bottom:.5};C.util.object.extend(C.Object.prototype,{translateToGivenOrigin:function(h,a,u,o,c){var m,_,w,g=h.x,l=h.y;return"string"==typeof a?a=f[a]:a-=.5,"string"==typeof o?o=f[o]:o-=.5,"string"==typeof u?u=p[u]:u-=.5,"string"==typeof c?c=p[c]:c-=.5,_=c-u,((m=o-a)||_)&&(w=this._getTransformedDimensions(),g=h.x+m*w.x,l=h.y+_*w.y),new C.Point(g,l)},translateToCenterPoint:function(h,a,u){var o=this.translateToGivenOrigin(h,a,u,"center","center");return this.angle?C.util.rotatePoint(o,h,y(this.angle)):o},translateToOriginPoint:function(h,a,u){var o=this.translateToGivenOrigin(h,"center","center",a,u);return this.angle?C.util.rotatePoint(o,h,y(this.angle)):o},getCenterPoint:function(){var h=new C.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,a){var u=this.getCenterPoint();return this.translateToOriginPoint(u,h,a)},toLocalPoint:function(h,a,u){var c,g,o=this.getCenterPoint();return c=typeof a<"u"&&typeof u<"u"?this.translateToGivenOrigin(o,"center","center",a,u):new C.Point(this.left,this.top),g=new C.Point(h.x,h.y),this.angle&&(g=C.util.rotatePoint(g,o,-y(this.angle))),g.subtractEquals(c)},setPositionByOrigin:function(h,a,u){var o=this.translateToCenterPoint(h,a,u),c=this.translateToOriginPoint(o,this.originX,this.originY);this.set("left",c.x),this.set("top",c.y)},adjustPosition:function(h){var g,l,a=y(this.angle),u=this.getScaledWidth(),o=C.util.cos(a)*u,c=C.util.sin(a)*u;this.left+=o*((l="string"==typeof h?f[h]:h-.5)-(g="string"==typeof this.originX?f[this.originX]:this.originX-.5)),this.top+=c*(l-g),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var f=C.util,p=f.degreesToRadians,h=f.multiplyTransformMatrices,a=f.transformPoint;f.object.extend(C.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(u,o){return o?u?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),u?this.aCoords:this.lineCoords)},getCoords:function(u,o){return function y(u){return[new C.Point(u.tl.x,u.tl.y),new C.Point(u.tr.x,u.tr.y),new C.Point(u.br.x,u.br.y),new C.Point(u.bl.x,u.bl.y)]}(this._getCoords(u,o))},intersectsWithRect:function(u,o,c,g){var l=this.getCoords(c,g);return"Intersection"===C.Intersection.intersectPolygonRectangle(l,u,o).status},intersectsWithObject:function(u,o,c){return"Intersection"===C.Intersection.intersectPolygonPolygon(this.getCoords(o,c),u.getCoords(o,c)).status||u.isContainedWithinObject(this,o,c)||this.isContainedWithinObject(u,o,c)},isContainedWithinObject:function(u,o,c){for(var g=this.getCoords(o,c),m=0,_=u._getImageLines(o?u.aCoords:u.lineCoords);m<4;m++)if(!u.containsPoint(g[m],_))return!1;return!0},isContainedWithinRect:function(u,o,c,g){var l=this.getBoundingRect(c,g);return l.left>=u.x&&l.left+l.width<=o.x&&l.top>=u.y&&l.top+l.height<=o.y},containsPoint:function(u,m,c,g){var l=this._getCoords(c,g),_=(m=m||this._getImageLines(l),this._findCrossPoints(u,m));return 0!==_&&_%2==1},isOnScreen:function(u){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;return!(!this.getCoords(!0,u).some(function(l){return l.x<=c.x&&l.x>=o.x&&l.y<=c.y&&l.y>=o.y})&&!this.intersectsWithRect(o,c,!0,u))||this._containsCenterOfCanvas(o,c,u)},_containsCenterOfCanvas:function(u,o,c){return!!this.containsPoint({x:(u.x+o.x)/2,y:(u.y+o.y)/2},null,!0,c)},isPartiallyOnScreen:function(u){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;return!!this.intersectsWithRect(o,c,!0,u)||this.getCoords(!0,u).every(function(l){return(l.x>=c.x||l.x<=o.x)&&(l.y>=c.y||l.y<=o.y)})&&this._containsCenterOfCanvas(o,c,u)},_getImageLines:function(u){return{topline:{o:u.tl,d:u.tr},rightline:{o:u.tr,d:u.br},bottomline:{o:u.br,d:u.bl},leftline:{o:u.bl,d:u.tl}}},_findCrossPoints:function(u,o){var g,l,m,_,b,w=0;for(var E in o)if(!((b=o[E]).o.y<u.y&&b.d.y<u.y||b.o.y>=u.y&&b.d.y>=u.y||(b.o.x===b.d.x&&b.o.x>=u.x?_=b.o.x:(g=(b.d.y-b.o.y)/(b.d.x-b.o.x),l=u.y-0*u.x,m=b.o.y-g*b.o.x,_=-(l-m)/(0-g)),_>=u.x&&(w+=1),2!==w)))break;return w},getBoundingRect:function(u,o){var c=this.getCoords(u,o);return f.makeBoundingBoxFromPoints(c)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(u){return Math.abs(u)<this.minScaleLimit?u<0?-this.minScaleLimit:this.minScaleLimit:0===u?1e-4:u},scale:function(u){return this._set("scaleX",u),this._set("scaleY",u),this.setCoords()},scaleToWidth:function(u,o){var c=this.getBoundingRect(o).width/this.getScaledWidth();return this.scale(u/this.width/c)},scaleToHeight:function(u,o){var c=this.getBoundingRect(o).height/this.getScaledHeight();return this.scale(u/this.height/c)},calcLineCoords:function(){var u=this.getViewportTransform(),o=this.padding,c=p(this.angle),m=f.cos(c)*o,_=f.sin(c)*o,w=m+_,b=m-_,E=this.calcACoords(),A={tl:a(E.tl,u),tr:a(E.tr,u),bl:a(E.bl,u),br:a(E.br,u)};return o&&(A.tl.x-=b,A.tl.y-=w,A.tr.x+=w,A.tr.y-=b,A.bl.x-=w,A.bl.y+=b,A.br.x+=b,A.br.y+=w),A},calcOCoords:function(){var u=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),c=this.getViewportTransform(),g=h(c,o),l=h(g,u),m=(l=h(l,[1/c[0],0,0,1/c[3],0,0]),this._calculateCurrentDimensions()),_={};return this.forEachControl(function(w,b,E){_[b]=w.positionHandler(m,l,E)}),_},calcACoords:function(){var u=this._calcRotateMatrix(),o=this._calcTranslateMatrix(),c=h(o,u),g=this._getTransformedDimensions(),l=g.x/2,m=g.y/2;return{tl:a({x:-l,y:-m},c),tr:a({x:l,y:-m},c),bl:a({x:-l,y:m},c),br:a({x:l,y:m},c)}},setCoords:function(u){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),u||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return f.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var u=this.getCenterPoint();return[1,0,0,1,u.x,u.y]},transformMatrixKey:function(u){var o="_",c="";return!u&&this.group&&(c=this.group.transformMatrixKey(u)+o),c+this.top+o+this.left+o+this.scaleX+o+this.scaleY+o+this.skewX+o+this.skewY+o+this.angle+o+this.originX+o+this.originY+o+this.width+o+this.height+o+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(u){var o=this.calcOwnMatrix();if(u||!this.group)return o;var c=this.transformMatrixKey(u),g=this.matrixCache||(this.matrixCache={});return g.key===c?g.value:(this.group&&(o=h(this.group.calcTransformMatrix(!1),o)),g.key=c,g.value=o,o)},calcOwnMatrix:function(){var u=this.transformMatrixKey(!0),o=this.ownMatrixCache||(this.ownMatrixCache={});if(o.key===u)return o.value;var c=this._calcTranslateMatrix(),g={angle:this.angle,translateX:c[4],translateY:c[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return o.key=u,o.value=f.composeMatrix(g),o.value},_getNonTransformedDimensions:function(){var u=this.strokeWidth;return{x:this.width+u,y:this.height+u}},_getTransformedDimensions:function(u,o){typeof u>"u"&&(u=this.skewX),typeof o>"u"&&(o=this.skewY);var c,g,l,m=0===u&&0===o;if(this.strokeUniform?(g=this.width,l=this.height):(g=(c=this._getNonTransformedDimensions()).x,l=c.y),m)return this._finalizeDimensions(g*this.scaleX,l*this.scaleY);var _=f.sizeAfterTransform(g,l,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:u,skewY:o});return this._finalizeDimensions(_.x,_.y)},_finalizeDimensions:function(u,o){return this.strokeUniform?{x:u+this.strokeWidth,y:o+this.strokeWidth}:{x:u,y:o}},_calculateCurrentDimensions:function(){var u=this.getViewportTransform(),o=this._getTransformedDimensions();return a(o,u,!0).scalarAdd(2*this.padding)}})}(),C.util.object.extend(C.Object.prototype,{sendToBack:function(){return this.group?C.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?C.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(y){return this.group?C.StaticCanvas.prototype.sendBackwards.call(this.group,this,y):this.canvas&&this.canvas.sendBackwards(this,y),this},bringForward:function(y){return this.group?C.StaticCanvas.prototype.bringForward.call(this.group,this,y):this.canvas&&this.canvas.bringForward(this,y),this},moveTo:function(y){return this.group&&"activeSelection"!==this.group.type?C.StaticCanvas.prototype.moveTo.call(this.group,this,y):this.canvas&&this.canvas.moveTo(this,y),this}}),function(){function y(p,h){if(h){if(h.toLive)return p+": url(#SVGID_"+h.id+"); ";var a=new C.Color(h),u=p+": "+a.toRgb()+"; ",o=a.getAlpha();return 1!==o&&(u+=p+"-opacity: "+o.toString()+"; "),u}return p+": none; "}var f=C.util.toFixed;C.util.object.extend(C.Object.prototype,{getSvgStyles:function(p){var h=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",u=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",_=this.visible?"":" visibility: hidden;",w=p?"":this.getSvgFilter(),b=y("fill",this.fill);return[y("stroke",this.stroke),"stroke-width: ",a,"; ","stroke-dasharray: ",u,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",l,"; ",b,"fill-rule: ",h,"; ","opacity: ",m,";",w,_].join("")},getSvgSpanStyles:function(p,h){var a="; ",o=p.fontFamily?"font-family: "+(-1===p.fontFamily.indexOf("'")&&-1===p.fontFamily.indexOf('"')?"'"+p.fontFamily+"'":p.fontFamily)+a:"",u=p.strokeWidth?"stroke-width: "+p.strokeWidth+a:"",c=p.fontSize?"font-size: "+p.fontSize+"px"+a:"",g=p.fontStyle?"font-style: "+p.fontStyle+a:"",l=p.fontWeight?"font-weight: "+p.fontWeight+a:"",m=p.fill?y("fill",p.fill):"",_=p.stroke?y("stroke",p.stroke):"",w=this.getSvgTextDecoration(p);return w&&(w="text-decoration: "+w+a),[_,u,o,c,g,l,w,m,p.deltaY?"baseline-shift: "+-p.deltaY+"; ":"",h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(p){return["overline","underline","line-through"].filter(function(h){return p[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(p,h){var a=p?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+C.util.matrixToSVG(a)+(h||"")+'" '},_setSVGBg:function(p){if(this.backgroundColor){var h=C.Object.NUM_FRACTION_DIGITS;p.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',f(-this.width/2,h),'" y="',f(-this.height/2,h),'" width="',f(this.width,h),'" height="',f(this.height,h),'"></rect>\n')}},toSVG:function(p){return this._createBaseSVGMarkup(this._toSVG(p),{reviver:p})},toClipPathSVG:function(p){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(p),{reviver:p})},_createBaseClipPathSVGMarkup:function(p,h){var a=(h=h||{}).reviver,o=[this.getSvgTransform(!0,h.additionalTransform||""),this.getSvgCommons()].join(""),c=p.indexOf("COMMON_PARTS");return p[c]=o,a?a(p.join("")):p.join("")},_createBaseSVGMarkup:function(p,h){var E,F,a=(h=h||{}).noStyle,u=h.reviver,o=a?"":'style="'+this.getSvgStyles()+'" ',c=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=g&&g.absolutePositioned,_=this.stroke,w=this.fill,b=this.shadow,A=[],B=p.indexOf("COMMON_PARTS"),z=h.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+C.Object.__uid++,F='<clipPath id="'+g.clipPathId+'" >\n'+g.toClipPathSVG(u)+"</clipPath>\n"),m&&A.push("<g ",c,this.getSvgCommons()," >\n"),A.push("<g ",this.getSvgTransform(!1),m?"":c+this.getSvgCommons()," >\n"),E=[o,l,a?"":this.addPaintOrder()," ",z?'transform="'+z+'" ':""].join(""),p[B]=E,w&&w.toLive&&A.push(w.toSVG(this)),_&&_.toLive&&A.push(_.toSVG(this)),b&&A.push(b.toSVG(this)),g&&A.push(F),A.push(p.join("")),A.push("</g>\n"),m&&A.push("</g>\n"),u?u(A.join("")):A.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var y=C.util.object.extend,f="stateProperties";function p(a,u,o){var c={};o.forEach(function(l){c[l]=a[l]}),y(a[u],c,!0)}function h(a,u,o){if(a===u)return!0;if(Array.isArray(a)){if(!Array.isArray(u)||a.length!==u.length)return!1;for(var c=0,g=a.length;c<g;c++)if(!h(a[c],u[c]))return!1;return!0}if(a&&"object"==typeof a){var m,l=Object.keys(a);if(!u||"object"!=typeof u||!o&&l.length!==Object.keys(u).length)return!1;for(c=0,g=l.length;c<g;c++)if("canvas"!==(m=l[c])&&"group"!==m&&!h(a[m],u[m]))return!1;return!0}}C.util.object.extend(C.Object.prototype,{hasStateChanged:function(a){var u="_"+(a=a||f);return Object.keys(this[u]).length<this[a].length||!h(this[u],this,!0)},saveState:function(a){var u=a&&a.propertySet||f,o="_"+u;return this[o]?(p(this,o,this[u]),a&&a.stateProperties&&p(this,o,a.stateProperties),this):this.setupState(a)},setupState:function(a){var u=(a=a||{}).propertySet||f;return a.propertySet=u,this["_"+u]={},this.saveState(a),this}})}(),function(){var y=C.util.degreesToRadians;C.util.object.extend(C.Object.prototype,{_findTargetCorner:function(f,p){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u,o,l,h=f.x,a=f.y,c=Object.keys(this.oCoords),g=c.length-1;for(this.__corner=0;g>=0;g--)if(this.isControlVisible(l=c[g])&&(o=this._getImageLines(p?this.oCoords[l].touchCorner:this.oCoords[l].corner),0!==(u=this._findCrossPoints({x:h,y:a},o))&&u%2==1))return this.__corner=l,l;return!1},forEachControl:function(f){for(var p in this.controls)f(this.controls[p],p,this)},_setCornerCoords:function(){var f=this.oCoords;for(var p in f){var h=this.controls[p];f[p].corner=h.calcCornerCoords(this.angle,this.cornerSize,f[p].x,f[p].y,!1),f[p].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,f[p].x,f[p].y,!0)}},drawSelectionBackground:function(f){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;f.save();var p=this.getCenterPoint(),h=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return f.translate(p.x,p.y),f.scale(1/a[0],1/a[3]),f.rotate(y(this.angle)),f.fillStyle=this.selectionBackgroundColor,f.fillRect(-h.x/2,-h.y/2,h.x,h.y),f.restore(),this},drawBorders:function(f,p){p=p||{};var h=this._calculateCurrentDimensions(),a=this.borderScaleFactor,u=h.x+a,o=h.y+a,c=typeof p.hasControls<"u"?p.hasControls:this.hasControls,g=!1;return f.save(),f.strokeStyle=p.borderColor||this.borderColor,this._setLineDash(f,p.borderDashArray||this.borderDashArray),f.strokeRect(-u/2,-o/2,u,o),c&&(f.beginPath(),this.forEachControl(function(l,m,_){l.withConnection&&l.getVisibility(_,m)&&(g=!0,f.moveTo(l.x*u,l.y*o),f.lineTo(l.x*u+l.offsetX,l.y*o+l.offsetY))}),g&&f.stroke()),f.restore(),this},drawBordersInGroup:function(f,p,h){h=h||{};var a=C.util.sizeAfterTransform(this.width,this.height,p),u=this.strokeWidth,o=this.strokeUniform,c=this.borderScaleFactor,g=a.x+u*(o?this.canvas.getZoom():p.scaleX)+c,l=a.y+u*(o?this.canvas.getZoom():p.scaleY)+c;return f.save(),this._setLineDash(f,h.borderDashArray||this.borderDashArray),f.strokeStyle=h.borderColor||this.borderColor,f.strokeRect(-g/2,-l/2,g,l),f.restore(),this},drawControls:function(f,p){p=p||{},f.save();var a,u,h=this.canvas.getRetinaScaling();return f.setTransform(h,0,0,h,0,0),f.strokeStyle=f.fillStyle=p.cornerColor||this.cornerColor,this.transparentCorners||(f.strokeStyle=p.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(f,p.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(o,c,g){u=g.oCoords[c],o.getVisibility(g,c)&&(a&&(u=C.util.transformPoint(u,a)),o.render(f,u.x,u.y,p,g))}),f.restore(),this},isControlVisible:function(f){return this.controls[f]&&this.controls[f].getVisibility(this,f)},setControlVisible:function(f,p){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[f]=p,this},setControlsVisibility:function(f){for(var p in f||(f={}),f)this.setControlVisible(p,f[p]);return this},onDeselect:function(){},onSelect:function(){}})}(),C.util.object.extend(C.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(y,f){var p=function(){},h=(f=f||{}).onComplete||p,a=f.onChange||p,u=this;return C.util.animate({target:this,startValue:y.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(o){y.set("left",o),u.requestRenderAll(),a()},onComplete:function(){y.setCoords(),h()}})},fxCenterObjectV:function(y,f){var p=function(){},h=(f=f||{}).onComplete||p,a=f.onChange||p,u=this;return C.util.animate({target:this,startValue:y.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(o){y.set("top",o),u.requestRenderAll(),a()},onComplete:function(){y.setCoords(),h()}})},fxRemove:function(y,f){var p=function(){},h=(f=f||{}).onComplete||p,a=f.onChange||p,u=this;return C.util.animate({target:this,startValue:y.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(o){y.set("opacity",o),u.requestRenderAll(),a()},onComplete:function(){u.remove(y),h()}})}}),C.util.object.extend(C.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var f,y=[],h=[];for(f in arguments[0])y.push(f);for(var a=0,u=y.length;a<u;a++)h.push(this._animate(f=y[a],arguments[0][f],arguments[1],a!==u-1));return h}return this._animate.apply(this,arguments)},_animate:function(y,f,p,h){var u,a=this;f=f.toString(),p=p?C.util.object.clone(p):{},~y.indexOf(".")&&(u=y.split("."));var o=a.colorProperties.indexOf(y)>-1||u&&a.colorProperties.indexOf(u[1])>-1,c=u?this.get(u[0])[u[1]]:this.get(y);"from"in p||(p.from=c),o||(f=~f.indexOf("=")?c+parseFloat(f.replace("=","")):parseFloat(f));var g={target:this,startValue:p.from,endValue:f,byValue:p.by,easing:p.easing,duration:p.duration,abort:p.abort&&function(l,m,_){return p.abort.call(a,l,m,_)},onChange:function(l,m,_){u?a[u[0]][u[1]]=l:a.set(y,l),!h&&p.onChange&&p.onChange(l,m,_)},onComplete:function(l,m,_){h||(a.setCoords(),p.onComplete&&p.onComplete(l,m,_))}};return o?C.util.animateColor(g.startValue,g.endValue,g.duration,g):C.util.animate(g)}}),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,h=f.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};function u(o,c){var g=o.origin,l=o.axis1,m=o.axis2,_=o.dimension,w=c.nearest,b=c.center,E=c.farthest;return function(){switch(this.get(g)){case w:return Math.min(this.get(l),this.get(m));case b:return Math.min(this.get(l),this.get(m))+.5*this.get(_);case E:return Math.max(this.get(l),this.get(m))}}}f.Line?f.warn("fabric.Line is already defined"):(f.Line=f.util.createClass(f.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:f.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(o,c){o||(o=[0,0,0,0]),this.callSuper("initialize",c),this.set("x1",o[0]),this.set("y1",o[1]),this.set("x2",o[2]),this.set("y2",o[3]),this._setWidthHeight(c)},_setWidthHeight:function(o){o||(o={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in o?o.left:this._getLeftToOriginX(),this.top="top"in o?o.top:this._getTopToOriginY()},_set:function(o,c){return this.callSuper("_set",o,c),typeof a[o]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:u({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:u({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(o){o.beginPath();var c=this.calcLinePoints();o.moveTo(c.x1,c.y1),o.lineTo(c.x2,c.y2),o.lineWidth=this.strokeWidth;var g=o.strokeStyle;o.strokeStyle=this.stroke||o.fillStyle,this.stroke&&this._renderStroke(o),o.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(o){return p(this.callSuper("toObject",o),this.calcLinePoints())},_getNonTransformedDimensions:function(){var o=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(o.y-=this.strokeWidth),0===this.height&&(o.x-=this.strokeWidth)),o},calcLinePoints:function(){var o=this.x1<=this.x2?-1:1,c=this.y1<=this.y2?-1:1;return{x1:o*this.width*.5,x2:o*this.width*-.5,y1:c*this.height*.5,y2:c*this.height*-.5}},_toSVG:function(){var o=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,'" />\n']}}),f.Line.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),f.Line.fromElement=function(o,c,g){g=g||{};var l=f.parseAttributes(o,f.Line.ATTRIBUTE_NAMES);c(new f.Line([l.x1||0,l.y1||0,l.x2||0,l.y2||0],p(l,g)))},f.Line.fromObject=function(o,c){var l=h(o,!0);l.points=[o.x1,o.y1,o.x2,o.y2],f.Object._fromObject("Line",l,function g(m){delete m.points,c&&c(m)},"points")})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.degreesToRadians;f.Circle?f.warn("fabric.Circle is already defined."):(f.Circle=f.util.createClass(f.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:f.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,u){return this.callSuper("_set",a,u),"radius"===a&&this.setRadius(u),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,c=(this.endAngle-this.startAngle)%360;if(0===c)a=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var g=p(this.startAngle),l=p(this.endAngle),m=this.radius;a=['<path d="M '+f.util.cos(g)*m+" "+f.util.sin(g)*m," A "+m+" "+m," 0 ",+(c>180?"1":"0")+" 1"," "+f.util.cos(l)*m+" "+f.util.sin(l)*m,'" ',"COMMON_PARTS"," />\n"]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,p(this.startAngle),p(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",2*a).set("height",2*a)}}),f.Circle.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),f.Circle.fromElement=function(a,u){var o=f.parseAttributes(a,f.Circle.ATTRIBUTE_NAMES);if(!function h(a){return"radius"in a&&a.radius>=0}(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=(o.left||0)-o.radius,o.top=(o.top||0)-o.radius,u(new f.Circle(o))},f.Circle.fromObject=function(a,u){f.Object._fromObject("Circle",a,u)})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Triangle?f.warn("fabric.Triangle is already defined"):(f.Triangle=f.util.createClass(f.Object,{type:"triangle",width:100,height:100,_render:function(p){var h=this.width/2,a=this.height/2;p.beginPath(),p.moveTo(-h,a),p.lineTo(0,-a),p.lineTo(h,a),p.closePath(),this._renderPaintInOrder(p)},_toSVG:function(){var p=this.width/2,h=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-p+" "+h,"0 "+-h,p+" "+h].join(","),'" />']}}),f.Triangle.fromObject=function(p,h){return f.Object._fromObject("Triangle",p,h)})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=2*Math.PI;f.Ellipse?f.warn("fabric.Ellipse is already defined."):(f.Ellipse=f.util.createClass(f.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,a){switch(this.callSuper("_set",h,a),h){case"rx":this.rx=a,this.set("width",2*a);break;case"ry":this.ry=a,this.set("height",2*a)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,p,!1),h.restore(),this._renderPaintInOrder(h)}}),f.Ellipse.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),f.Ellipse.fromElement=function(h,a){var u=f.parseAttributes(h,f.Ellipse.ATTRIBUTE_NAMES);u.left=(u.left||0)-u.rx,u.top=(u.top||0)-u.ry,a(new f.Ellipse(u))},f.Ellipse.fromObject=function(h,a){f.Object._fromObject("Ellipse",h,a)})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend;f.Rect?f.warn("fabric.Rect is already defined"):(f.Rect=f.util.createClass(f.Object,{stateProperties:f.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:f.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var a=this.rx?Math.min(this.rx,this.width/2):0,u=this.ry?Math.min(this.ry,this.height/2):0,o=this.width,c=this.height,g=-this.width/2,l=-this.height/2,m=0!==a||0!==u,_=.4477152502;h.beginPath(),h.moveTo(g+a,l),h.lineTo(g+o-a,l),m&&h.bezierCurveTo(g+o-_*a,l,g+o,l+_*u,g+o,l+u),h.lineTo(g+o,l+c-u),m&&h.bezierCurveTo(g+o,l+c-_*u,g+o-_*a,l+c,g+o-a,l+c),h.lineTo(g+a,l+c),m&&h.bezierCurveTo(g+_*a,l+c,g,l+c-_*u,g,l+c-u),h.lineTo(g,l+u),m&&h.bezierCurveTo(g,l+_*u,g+_*a,l,g+a,l),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),f.Rect.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),f.Rect.fromElement=function(h,a,u){if(!h)return a(null);u=u||{};var o=f.parseAttributes(h,f.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var c=new f.Rect(p(u?f.util.object.clone(u):{},o));c.visible=c.visible&&c.width>0&&c.height>0,a(c)},f.Rect.fromObject=function(h,a){return f.Object._fromObject("Rect",h,a)})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,h=f.util.array.min,a=f.util.array.max,u=f.util.toFixed,o=f.util.projectStrokeOnPoints;f.Polyline?f.warn("fabric.Polyline is already defined"):(f.Polyline=f.util.createClass(f.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:f.Object.prototype.cacheProperties.concat("points"),initialize:function(c,g){g=g||{},this.points=c||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(c){var l,g=this._calcDimensions(c),m=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-m,this.height=g.height-m,c.fromSVG||(l=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+m/2,y:g.top-this.strokeWidth/2+m/2},"left","top",this.originX,this.originY)),typeof c.left>"u"&&(this.left=c.fromSVG?g.left:l.x),typeof c.top>"u"&&(this.top=c.fromSVG?g.top:l.y),this.pathOffset={x:g.left+this.width/2+m/2,y:g.top+this.height/2+m/2}},_calcDimensions:function(){var c=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=h(c,"x")||0,l=h(c,"y")||0;return{left:g,top:l,width:(a(c,"x")||0)-g,height:(a(c,"y")||0)-l}},toObject:function(c){return p(this.callSuper("toObject",c),{points:this.points.concat()})},_toSVG:function(){for(var c=[],g=this.pathOffset.x,l=this.pathOffset.y,m=f.Object.NUM_FRACTION_DIGITS,_=0,w=this.points.length;_<w;_++)c.push(u(this.points[_].x-g,m),",",u(this.points[_].y-l,m)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',c.join(""),'" />\n']},commonRender:function(c){var g,l=this.points.length,m=this.pathOffset.x,_=this.pathOffset.y;if(!l||isNaN(this.points[l-1].y))return!1;c.beginPath(),c.moveTo(this.points[0].x-m,this.points[0].y-_);for(var w=0;w<l;w++)c.lineTo((g=this.points[w]).x-m,g.y-_);return!0},_render:function(c){!this.commonRender(c)||this._renderPaintInOrder(c)},complexity:function(){return this.get("points").length}}),f.Polyline.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polyline.fromElementGenerator=function(c){return function(g,l,m){if(!g)return l(null);m||(m={});var _=f.parsePointsAttribute(g.getAttribute("points")),w=f.parseAttributes(g,f[c].ATTRIBUTE_NAMES);w.fromSVG=!0,l(new f[c](_,p(w,m)))}},f.Polyline.fromElement=f.Polyline.fromElementGenerator("Polyline"),f.Polyline.fromObject=function(c,g){return f.Object._fromObject("Polyline",c,g,"points")})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.projectStrokeOnPoints;f.Polygon?f.warn("fabric.Polygon is already defined"):(f.Polygon=f.util.createClass(f.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return p(this.points,this)},_render:function(h){!this.commonRender(h)||(h.closePath(),this._renderPaintInOrder(h))}}),f.Polygon.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(),f.Polygon.fromElement=f.Polyline.fromElementGenerator("Polygon"),f.Polygon.fromObject=function(h,a){f.Object._fromObject("Polygon",h,a,"points")})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.array.min,h=f.util.array.max,a=f.util.object.extend,u=f.util.object.clone,o=f.util.toFixed;f.Path?f.warn("fabric.Path is already defined"):(f.Path=f.util.createClass(f.Object,{type:"path",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:f.Object.prototype.stateProperties.concat("path"),initialize:function(c,g){delete(g=u(g||{})).path,this.callSuper("initialize",g),this._setPath(c||[],g)},_setPath:function(c,g){this.path=f.util.makePathSimpler(Array.isArray(c)?c:f.util.parsePath(c)),f.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(c){var g,l=0,m=0,_=0,w=0,A=-this.pathOffset.x,F=-this.pathOffset.y;c.beginPath();for(var B=0,z=this.path.length;B<z;++B)switch(g=this.path[B],g[0]){case"L":c.lineTo((_=g[1])+A,(w=g[2])+F);break;case"M":l=_=g[1],m=w=g[2],c.moveTo(_+A,w+F);break;case"C":c.bezierCurveTo(g[1]+A,g[2]+F,g[3]+A,g[4]+F,(_=g[5])+A,(w=g[6])+F);break;case"Q":c.quadraticCurveTo(g[1]+A,g[2]+F,g[3]+A,g[4]+F),_=g[3],w=g[4];break;case"z":case"Z":_=l,w=m,c.closePath()}},_render:function(c){this._renderPathCommands(c),this._renderPaintInOrder(c)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(c){return a(this.callSuper("toObject",c),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(c){var g=this.toObject(["sourcePath"].concat(c));return g.sourcePath&&delete g.path,g},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',f.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var c=f.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,c)+", "+o(-this.pathOffset.y,c)+")"},toClipPathSVG:function(c){var g=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:g})},toSVG:function(c){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var l,E,c=[],g=[],m=0,_=0,w=0,b=0,A=0,F=this.path.length;A<F;++A){switch((l=this.path[A])[0]){case"L":w=l[1],b=l[2],E=[];break;case"M":m=w=l[1],_=b=l[2],E=[];break;case"C":E=f.util.getBoundsOfCurve(w,b,l[1],l[2],l[3],l[4],l[5],l[6]),w=l[5],b=l[6];break;case"Q":E=f.util.getBoundsOfCurve(w,b,l[1],l[2],l[1],l[2],l[3],l[4]),w=l[3],b=l[4];break;case"z":case"Z":w=m,b=_}E.forEach(function(ce){c.push(ce.x),g.push(ce.y)}),c.push(w),g.push(b)}var B=p(c)||0,z=p(g)||0;return{left:B,top:z,width:(h(c)||0)-B,height:(h(g)||0)-z}}}),f.Path.fromObject=function(c,g){"string"==typeof c.sourcePath?f.loadSVGFromURL(c.sourcePath,function(m){var _=m[0];_.setOptions(c),c.clipPath?f.util.enlivenObjects([c.clipPath],function(w){_.clipPath=w[0],g&&g(_)}):g&&g(_)}):f.Object._fromObject("Path",c,g,"path")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["d"]),f.Path.fromElement=function(c,g,l){var m=f.parseAttributes(c,f.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,g(new f.Path(m.d,a(m,l)))})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.array.min,h=f.util.array.max;f.Group||(f.Group=f.util.createClass(f.Object,f.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,u,o){u=u||{},this._objects=[],o&&this.callSuper("initialize",u),this._objects=a||[];for(var c=this._objects.length;c--;)this._objects[c].group=this;if(o)this._updateObjectsACoords();else{var g=u&&u.centerPoint;void 0!==u.originX&&(this.originX=u.originX),void 0!==u.originY&&(this.originY=u.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete u.centerPoint,this.callSuper("initialize",u)}this.setCoords()},_updateObjectsACoords:function(){for(var u=this._objects.length;u--;)this._objects[u].setCoords(!0)},_updateObjectsCoords:function(u){u=u||this.getCenterPoint();for(var o=this._objects.length;o--;)this._updateObjectCoords(this._objects[o],u)},_updateObjectCoords:function(a,u){a.set({left:a.left-u.x,top:a.top-u.y}),a.group=this,a.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var u=!!this.group;return this._restoreObjectsState(),f.util.resetObjectTransform(this),a&&(u&&f.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,u?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),f.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,u){var o=this._objects.length;if(this.useSetOnGroup)for(;o--;)this._objects[o].setOnGroup(a,u);if("canvas"===a)for(;o--;)this._objects[o]._set(a,u);f.Object.prototype._set.call(this,a,u)},toObject:function(a){var u=this.includeDefaultValues,o=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var l=g.includeDefaultValues;g.includeDefaultValues=u;var m=g.toObject(a);return g.includeDefaultValues=l,m}),c=f.Object.prototype.toObject.call(this,a);return c.objects=o,c},toDatalessObject:function(a){var u,o=this.sourcePath;if(o)u=o;else{var c=this.includeDefaultValues;u=this._objects.map(function(l){var m=l.includeDefaultValues;l.includeDefaultValues=c;var _=l.toDatalessObject(a);return l.includeDefaultValues=m,_})}var g=f.Object.prototype.toDatalessObject.call(this,a);return g.objects=u,g},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=f.Object.prototype.shouldCache.call(this);if(a)for(var u=0,o=this._objects.length;u<o;u++)if(this._objects[u].willDrawShadow())return this.ownCaching=!1,!1;return a},willDrawShadow:function(){if(f.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,u=this._objects.length;a<u;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var u=0,o=this._objects.length;u<o;u++)this._objects[u].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var u=0,o=this._objects.length;u<o;u++)if(this._objects[u].isCacheDirty(!0)){if(this._cacheCanvas){var c=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-c/2,-g/2,c,g)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(u){f.util.addTransformToObject(u,a),delete u.group,u.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,u=this.canvas;this._objects=[];var o=this.toObject();delete o.objects;var c=new f.ActiveSelection([]);return c.set(o),c.type="activeSelection",u.remove(this),a.forEach(function(g){g.group=c,g.dirty=!0,u.add(g)}),c.canvas=u,c._objects=a,u._activeObject=c,c.setCoords(),c}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(u){u.setCoords(!0)}),this},_calcBounds:function(a){for(var c,g,l,b,u=[],o=[],m=["tr","br","bl","tl"],_=0,w=this._objects.length,E=m.length;_<w;++_){for(l=(c=this._objects[_]).calcACoords(),b=0;b<E;b++)u.push(l[g=m[b]].x),o.push(l[g].y);c.aCoords=l}this._getBounds(u,o,a)},_getBounds:function(a,u,o){var c=new f.Point(p(a),p(u)),g=new f.Point(h(a),h(u)),l=c.y||0,m=c.x||0,w=g.y-c.y||0;this.width=g.x-c.x||0,this.height=w,o||this.setPositionByOrigin({x:m,y:l},"left","top")},_toSVG:function(a){for(var u=["<g ","COMMON_PARTS"," >\n"],o=0,c=this._objects.length;o<c;o++)u.push("\t\t",this._objects[o].toSVG(a));return u.push("</g>\n"),u},getSvgStyles:function(){var u=this.visible?"":" visibility: hidden;";return[typeof this.opacity<"u"&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),u].join("")},toClipPathSVG:function(a){for(var u=[],o=0,c=this._objects.length;o<c;o++)u.push("\t",this._objects[o].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(u,{reviver:a})}}),f.Group.fromObject=function(a,u){var o=a.objects,c=f.util.object.clone(a,!0);delete c.objects,"string"!=typeof o?f.util.enlivenObjects(o,function(g){f.util.enlivenObjectEnlivables(a,c,function(){u&&u(new f.Group(g,c,!0))})}):f.loadSVGFromURL(o,function(g){var l=f.util.groupSVGElements(g,a,o),m=c.clipPath;delete c.clipPath,l.set(c),m?f.util.enlivenObjects([m],function(_){l.clipPath=_[0],u&&u(l)}):u&&u(l)})})}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={});f.ActiveSelection||(f.ActiveSelection=f.util.createClass(f.Group,{type:"activeSelection",initialize:function(p,h){h=h||{},this._objects=p||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),f.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var p=this._objects.concat();this._objects=[];var h=f.Object.prototype.toObject.call(this),a=new f.Group([]);if(delete h.type,a.set(h),p.forEach(function(o){o.canvas.remove(o),o.group=a}),a._objects=p,!this.canvas)return a;var u=this.canvas;return u.add(a),u._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(p,h,a){p.save(),p.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",p,h),typeof(a=a||{}).hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var u=0,o=this._objects.length;u<o;u++)this._objects[u]._renderControls(p,a);p.restore()}}),f.ActiveSelection.fromObject=function(p,h){f.util.enlivenObjects(p.objects,function(a){delete p.objects,h&&h(new f.ActiveSelection(a,p,!0))})})}(Re),function(y){"use strict";var f=C.util.object.extend;y.fabric||(y.fabric={}),y.fabric.Image?C.warn("fabric.Image is already defined."):(C.Image=C.util.createClass(C.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:C.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:C.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(p,h){h||(h={}),this.filters=[],this.cacheKey="texture"+C.Object.__uid++,this.callSuper("initialize",h),this._initElement(p,h)},getElement:function(){return this._element||{}},setElement:function(p,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=p,this._originalElement=p,this._initConfig(h),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(p){var h=C.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(p)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(p){C.util.cleanUpJsdomNode(this[p]),this[p]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var p=this.getElement();return{width:p.naturalWidth||p.width,height:p.naturalHeight||p.height}},_stroke:function(p){if(this.stroke&&0!==this.strokeWidth){var h=this.width/2,a=this.height/2;p.beginPath(),p.moveTo(-h,-a),p.lineTo(h,-a),p.lineTo(h,a),p.lineTo(-h,a),p.lineTo(-h,-a),p.closePath()}},toObject:function(p){var h=[];this.filters.forEach(function(u){u&&h.push(u.toObject())});var a=f(this.callSuper("toObject",["cropX","cropY"].concat(p)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var a,p=[],h=[],u=this._element,o=-this.width/2,c=-this.height/2,g="",l="";if(!u)return[];if(this.hasCrop()){var m=C.Object.__uid++;p.push('<clipPath id="imageCrop_'+m+'">\n','\t<rect x="'+o+'" y="'+c+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),g=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),h.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',c-this.cropY,'" width="',u.width||u.naturalWidth,'" height="',u.height||u.height,l,'"',g,"></image>\n"),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,a=["\t<rect ",'x="',o,'" y="',c,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=_}return"fill"!==this.paintFirst?p.concat(a,h):p.concat(h,a)},getSrc:function(p){var h=p?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(p,h,a){return C.util.loadImage(p,function(u,o){this.setElement(u,a),this._setWidthHeight(),h&&h(this,o)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var p=this.resizeFilter,h=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),u=a.scaleX,o=a.scaleY,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!p||u>h&&o>h)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=u,void(this._lastScaleY=o);C.filterBackend||(C.filterBackend=C.initFilterBackend());var g=C.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=c.width,_=c.height;g.width=m,g.height=_,this._element=g,this._lastScaleX=p.scaleX=u,this._lastScaleY=p.scaleY=o,C.filterBackend.applyFilters([p],c,m,_,this._element,l),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(p){if(p=(p=p||this.filters||[]).filter(function(c){return c&&!c.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===p.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,a=h.naturalWidth||h.width,u=h.naturalHeight||h.height;if(this._element===this._originalElement){var o=C.util.createCanvasElement();o.width=a,o.height=u,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,u),this._lastScaleX=1,this._lastScaleY=1;return C.filterBackend||(C.filterBackend=C.initFilterBackend()),C.filterBackend.applyFilters(p,this._originalElement,a,u,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(p){C.util.setImageSmoothing(p,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(p),this._renderPaintInOrder(p)},drawCacheOnCanvas:function(p){C.util.setImageSmoothing(p,this.imageSmoothing),C.Object.prototype.drawCacheOnCanvas.call(this,p)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(p){var h=this._element;if(h){var a=this._filterScalingX,u=this._filterScalingY,o=this.width,c=this.height,g=Math.min,l=Math.max,m=l(this.cropX,0),_=l(this.cropY,0),w=h.naturalWidth||h.width,b=h.naturalHeight||h.height,E=m*a,A=_*u,F=g(o*a,w-E),B=g(c*u,b-A),z=-o/2,ie=-c/2,ue=g(o,w/a-m),he=g(c,b/u-_);h&&p.drawImage(h,E,A,F,B,z,ie,ue,he)}},_needsResize:function(){var p=this.getTotalObjectScaling();return p.scaleX!==this._lastScaleX||p.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(p,h){this.setElement(C.util.getById(p),h),C.util.addClass(this.getElement(),C.Image.CSS_CANVAS)},_initConfig:function(p){p||(p={}),this.setOptions(p),this._setWidthHeight(p)},_initFilters:function(p,h){p&&p.length?C.util.enlivenObjects(p,function(a){h&&h(a)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(p){p||(p={});var h=this.getElement();this.width=p.width||h.naturalWidth||h.width||0,this.height=p.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var _,p=C.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,a=this._element.height,u=1,o=1,c=0,g=0,l=0,m=0,w=this.width,b=this.height,E={width:w,height:b};return!p||"none"===p.alignX&&"none"===p.alignY?(u=w/h,o=b/a):("meet"===p.meetOrSlice&&(_=(w-h*(u=o=C.util.findScaleToFit(this._element,E)))/2,"Min"===p.alignX&&(c=-_),"Max"===p.alignX&&(c=_),_=(b-a*o)/2,"Min"===p.alignY&&(g=-_),"Max"===p.alignY&&(g=_)),"slice"===p.meetOrSlice&&(_=h-w/(u=o=C.util.findScaleToCover(this._element,E)),"Mid"===p.alignX&&(l=_/2),"Max"===p.alignX&&(l=_),_=a-b/o,"Mid"===p.alignY&&(m=_/2),"Max"===p.alignY&&(m=_),h=w/u,a=b/o)),{width:h,height:a,scaleX:u,scaleY:o,offsetLeft:c,offsetTop:g,cropX:l,cropY:m}}}),C.Image.CSS_CANVAS="canvas-img",C.Image.prototype.getSvgSrc=C.Image.prototype.getSrc,C.Image.fromObject=function(p,h){var a=C.util.object.clone(p);C.util.loadImage(a.src,function(u,o){o?h&&h(null,!0):C.Image.prototype._initFilters.call(a,a.filters,function(c){a.filters=c||[],C.Image.prototype._initFilters.call(a,[a.resizeFilter],function(g){a.resizeFilter=g[0],C.util.enlivenObjectEnlivables(a,a,function(){var l=new C.Image(u,a);h(l,!1)})})})},null,a.crossOrigin)},C.Image.fromURL=function(p,h,a){C.util.loadImage(p,function(u,o){h&&h(new C.Image(u,a),o)},null,a&&a.crossOrigin)},C.Image.ATTRIBUTE_NAMES=C.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),C.Image.fromElement=function(p,h,a){var u=C.parseAttributes(p,C.Image.ATTRIBUTE_NAMES);C.Image.fromURL(u["xlink:href"],h,f(a?C.util.object.clone(a):{},u))})}(Re),C.util.object.extend(C.Object.prototype,{_getAngleValueForStraighten:function(){var y=this.angle%360;return y>0?90*Math.round((y-1)/90):90*Math.round(y/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(y){var f=function(){},p=(y=y||{}).onComplete||f,h=y.onChange||f,a=this;return C.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(u){a.rotate(u),h()},onComplete:function(){a.setCoords(),p()}})}}),C.util.object.extend(C.StaticCanvas.prototype,{straightenObject:function(y){return y.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(y){return y.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function y(p,h){var a="precision "+h+" float;\nvoid main(){}",u=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(u,a),p.compileShader(u),!!p.getShaderParameter(u,p.COMPILE_STATUS)}function f(p){p&&p.tileSize&&(this.tileSize=p.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}C.isWebglSupported=function(p){if(C.isLikelyNode)return!1;p=p||C.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),a=h.getContext("webgl")||h.getContext("experimental-webgl"),u=!1;if(a){C.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),u=C.maxTextureSize>=p;for(var o=["highp","mediump","lowp"],c=0;c<3;c++)if(y(a,o[c])){C.webGlPrecision=o[c];break}}return this.isSupported=u,u},C.WebglFilterBackend=f,f.prototype={tileSize:2048,resources:{},setupGLContext:function(p,h){this.dispose(),this.createWebGLCanvas(p,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(p,h)},chooseFastestCopyGLTo2DMethod:function(p,h){var u,a=typeof window.performance<"u";try{new ImageData(1,1),u=!0}catch{u=!1}var o=typeof ArrayBuffer<"u",c=typeof Uint8ClampedArray<"u";if(a&&u&&o&&c){var g=C.util.createCanvasElement(),l=new ArrayBuffer(p*h*4);if(C.forceGLPutImageData)return this.imageBuffer=l,void(this.copyGLTo2D=Ri);var _,w,m={imageBuffer:l,destinationWidth:p,destinationHeight:h,targetCanvas:g};g.width=p,g.height=h,_=window.performance.now(),$t.call(m,this.gl,m),w=window.performance.now()-_,_=window.performance.now(),Ri.call(m,this.gl,m),w>window.performance.now()-_?(this.imageBuffer=l,this.copyGLTo2D=Ri):this.copyGLTo2D=$t}},createWebGLCanvas:function(p,h){var a=C.util.createCanvasElement();a.width=p,a.height=h;var u={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=a.getContext("webgl",u);o||(o=a.getContext("experimental-webgl",u)),o&&(o.clearColor(0,0,0,0),this.canvas=a,this.gl=o)},applyFilters:function(p,h,a,u,o,c){var l,g=this.gl;c&&(l=this.getCachedTexture(c,h));var m={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:a,sourceHeight:u,destinationWidth:a,destinationHeight:u,context:g,sourceTexture:this.createTexture(g,a,u,!l&&h),targetTexture:this.createTexture(g,a,u),originalTexture:l||this.createTexture(g,a,u,!l&&h),passes:p.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},_=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,_),p.forEach(function(w){w&&w.applyTo(m)}),function Or(y){var f=y.targetCanvas,a=y.destinationWidth,u=y.destinationHeight;(f.width!==a||f.height!==u)&&(f.width=a,f.height=u)}(m),this.copyGLTo2D(g,m),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(m.sourceTexture),g.deleteTexture(m.targetTexture),g.deleteFramebuffer(_),o.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(p,h,a,u){var o=p.createTexture();return p.bindTexture(p.TEXTURE_2D,o),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),u?p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,u):p.texImage2D(p.TEXTURE_2D,0,p.RGBA,h,a,0,p.RGBA,p.UNSIGNED_BYTE,null),o},getCachedTexture:function(p,h){if(this.textureCache[p])return this.textureCache[p];var a=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[p]=a,a},evictCachesForKey:function(p){this.textureCache[p]&&(this.gl.deleteTexture(this.textureCache[p]),delete this.textureCache[p])},copyGLTo2D:$t,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var p=this.gl,h={renderer:"",vendor:""};if(!p)return h;var a=p.getExtension("WEBGL_debug_renderer_info");if(a){var u=p.getParameter(a.UNMASKED_RENDERER_WEBGL),o=p.getParameter(a.UNMASKED_VENDOR_WEBGL);u&&(h.renderer=u.toLowerCase()),o&&(h.vendor=o.toLowerCase())}return this.gpuInfo=h,h}}}(),function(){"use strict";var y=function(){};function f(){}C.Canvas2dFilterBackend=f,f.prototype={evictCachesForKey:y,dispose:y,clearWebGLCaches:y,resources:{},applyFilters:function(p,h,a,u,o){var c=o.getContext("2d");c.drawImage(h,0,0,a,u);var m={sourceWidth:a,sourceHeight:u,imageData:c.getImageData(0,0,a,u),originalEl:h,originalImageData:c.getImageData(0,0,a,u),canvasEl:o,ctx:c,filterBackend:this};return p.forEach(function(_){_.applyTo(m)}),(m.imageData.width!==a||m.imageData.height!==u)&&(o.width=m.imageData.width,o.height=m.imageData.height),c.putImageData(m.imageData,0,0),m}}}(),C.Image=C.Image||{},C.Image.filters=C.Image.filters||{},C.Image.filters.BaseFilter=C.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(y){y&&this.setOptions(y)},setOptions:function(y){for(var f in y)this[f]=y[f]},createProgram:function(y,f,p){f=f||this.fragmentSource,p=p||this.vertexSource,"highp"!==C.webGlPrecision&&(f=f.replace(/precision highp float/g,"precision "+C.webGlPrecision+" float"));var h=y.createShader(y.VERTEX_SHADER);if(y.shaderSource(h,p),y.compileShader(h),!y.getShaderParameter(h,y.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+y.getShaderInfoLog(h));var a=y.createShader(y.FRAGMENT_SHADER);if(y.shaderSource(a,f),y.compileShader(a),!y.getShaderParameter(a,y.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+y.getShaderInfoLog(a));var u=y.createProgram();if(y.attachShader(u,h),y.attachShader(u,a),y.linkProgram(u),!y.getProgramParameter(u,y.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+y.getProgramInfoLog(u));var o=this.getAttributeLocations(y,u),c=this.getUniformLocations(y,u)||{};return c.uStepW=y.getUniformLocation(u,"uStepW"),c.uStepH=y.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:o,uniformLocations:c}},getAttributeLocations:function(y,f){return{aPosition:y.getAttribLocation(f,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(y,f,p){var h=f.aPosition,a=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,a),y.enableVertexAttribArray(h),y.vertexAttribPointer(h,2,y.FLOAT,!1,0,0),y.bufferData(y.ARRAY_BUFFER,p,y.STATIC_DRAW)},_setupFrameBuffer:function(y){var p,h,f=y.context;y.passes>1?(h=y.destinationHeight,(y.sourceWidth!==(p=y.destinationWidth)||y.sourceHeight!==h)&&(f.deleteTexture(y.targetTexture),y.targetTexture=y.filterBackend.createTexture(f,p,h)),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,y.targetTexture,0)):(f.bindFramebuffer(f.FRAMEBUFFER,null),f.finish())},_swapTextures:function(y){y.passes--,y.pass++;var f=y.targetTexture;y.targetTexture=y.sourceTexture,y.sourceTexture=f},isNeutralState:function(){var y=this.mainParameter,f=C.Image.filters[this.type].prototype;if(y){if(Array.isArray(f[y])){for(var p=f[y].length;p--;)if(this[y][p]!==f[y][p])return!1;return!0}return f[y]===this[y]}return!1},applyTo:function(y){y.webgl?(this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y)):this.applyTo2d(y)},retrieveShader:function(y){return y.programCache.hasOwnProperty(this.type)||(y.programCache[this.type]=this.createProgram(y.context)),y.programCache[this.type]},applyToWebGL:function(y){var f=y.context,p=this.retrieveShader(y);f.bindTexture(f.TEXTURE_2D,0===y.pass&&y.originalTexture?y.originalTexture:y.sourceTexture),f.useProgram(p.program),this.sendAttributeData(f,p.attributeLocations,y.aPosition),f.uniform1f(p.uniformLocations.uStepW,1/y.sourceWidth),f.uniform1f(p.uniformLocations.uStepH,1/y.sourceHeight),this.sendUniformData(f,p.uniformLocations),f.viewport(0,0,y.destinationWidth,y.destinationHeight),f.drawArrays(f.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(y,f,p){y.activeTexture(p),y.bindTexture(y.TEXTURE_2D,f),y.activeTexture(y.TEXTURE0)},unbindAdditionalTexture:function(y,f){y.activeTexture(f),y.bindTexture(y.TEXTURE_2D,null),y.activeTexture(y.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(y){this[this.mainParameter]=y},sendUniformData:function(){},createHelpLayer:function(y){if(!y.helpLayer){var f=document.createElement("canvas");f.width=y.sourceWidth,f.height=y.sourceHeight,y.helpLayer=f}},toObject:function(){var y={type:this.type},f=this.mainParameter;return f&&(y[f]=this[f]),y},toJSON:function(){return this.toObject()}}),C.Image.filters.BaseFilter.fromObject=function(y,f){var p=new C.Image.filters[y.type](y);return f&&f(p),p},function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.ColorMatrix=(0,f.util.createClass)(p.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var l,m,_,w,b,o=a.imageData.data,c=o.length,g=this.matrix,E=this.colorsOnly;for(b=0;b<c;b+=4)l=o[b],m=o[b+1],_=o[b+2],E?(o[b]=l*g[0]+m*g[1]+_*g[2]+255*g[4],o[b+1]=l*g[5]+m*g[6]+_*g[7]+255*g[9],o[b+2]=l*g[10]+m*g[11]+_*g[12]+255*g[14]):(o[b]=l*g[0]+m*g[1]+_*g[2]+(w=o[b+3])*g[3]+255*g[4],o[b+1]=l*g[5]+m*g[6]+_*g[7]+w*g[8]+255*g[9],o[b+2]=l*g[10]+m*g[11]+_*g[12]+w*g[13]+255*g[14],o[b+3]=l*g[15]+m*g[16]+_*g[17]+w*g[18]+255*g[19])},getUniformLocations:function(a,u){return{uColorMatrix:a.getUniformLocation(u,"uColorMatrix"),uConstants:a.getUniformLocation(u,"uConstants")}},sendUniformData:function(a,u){var o=this.matrix,g=[o[4],o[9],o[14],o[19]];a.uniformMatrix4fv(u.uColorMatrix,!1,[o[0],o[1],o[2],o[3],o[5],o[6],o[7],o[8],o[10],o[11],o[12],o[13],o[15],o[16],o[17],o[18]]),a.uniform4fv(u.uConstants,g)}}),f.Image.filters.ColorMatrix.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Brightness=(0,f.util.createClass)(p.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(0!==this.brightness){var c,o=a.imageData.data,g=o.length,l=Math.round(255*this.brightness);for(c=0;c<g;c+=4)o[c]=o[c]+l,o[c+1]=o[c+1]+l,o[c+2]=o[c+2]+l}},getUniformLocations:function(a,u){return{uBrightness:a.getUniformLocation(u,"uBrightness")}},sendUniformData:function(a,u){a.uniform1f(u.uBrightness,this.brightness)}}),f.Image.filters.Brightness.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,h=f.Image.filters;h.Convolute=(0,f.util.createClass)(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(u){var o=Math.sqrt(this.matrix.length),c=this.type+"_"+o+"_"+(this.opaque?1:0),g=this.fragmentSource[c];return u.programCache.hasOwnProperty(c)||(u.programCache[c]=this.createProgram(u.context,g)),u.programCache[c]},applyTo2d:function(u){var F,B,z,ie,ue,he,pe,ce,fe,xe,ve,Ce,M,o=u.imageData,c=o.data,g=this.matrix,l=Math.round(Math.sqrt(g.length)),m=Math.floor(l/2),_=o.width,w=o.height,b=u.ctx.createImageData(_,w),E=b.data,A=this.opaque?1:0;for(ve=0;ve<w;ve++)for(xe=0;xe<_;xe++){for(ue=4*(ve*_+xe),F=0,B=0,z=0,ie=0,M=0;M<l;M++)for(Ce=0;Ce<l;Ce++)he=xe+Ce-m,!((pe=ve+M-m)<0||pe>=w||he<0||he>=_)&&(F+=c[ce=4*(pe*_+he)]*(fe=g[M*l+Ce]),B+=c[ce+1]*fe,z+=c[ce+2]*fe,A||(ie+=c[ce+3]*fe));E[ue]=F,E[ue+1]=B,E[ue+2]=z,E[ue+3]=A?c[ue+3]:ie}u.imageData=b},getUniformLocations:function(u,o){return{uMatrix:u.getUniformLocation(o,"uMatrix"),uOpaque:u.getUniformLocation(o,"uOpaque"),uHalfSize:u.getUniformLocation(o,"uHalfSize"),uSize:u.getUniformLocation(o,"uSize")}},sendUniformData:function(u,o){u.uniform1fv(o.uMatrix,this.matrix)},toObject:function(){return p(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),f.Image.filters.Convolute.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Grayscale=(0,f.util.createClass)(p.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(a){var c,l,o=a.imageData.data,g=o.length,m=this.mode;for(c=0;c<g;c+=4)"average"===m?l=(o[c]+o[c+1]+o[c+2])/3:"lightness"===m?l=(Math.min(o[c],o[c+1],o[c+2])+Math.max(o[c],o[c+1],o[c+2]))/2:"luminosity"===m&&(l=.21*o[c]+.72*o[c+1]+.07*o[c+2]),o[c]=l,o[c+1]=l,o[c+2]=l},retrieveShader:function(a){var u=this.type+"_"+this.mode;return a.programCache.hasOwnProperty(u)||(a.programCache[u]=this.createProgram(a.context,this.fragmentSource[this.mode])),a.programCache[u]},getUniformLocations:function(a,u){return{uMode:a.getUniformLocation(u,"uMode")}},sendUniformData:function(a,u){a.uniform1i(u.uMode,1)},isNeutralState:function(){return!1}}),f.Image.filters.Grayscale.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Invert=(0,f.util.createClass)(p.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(a){var c,o=a.imageData.data,g=o.length;for(c=0;c<g;c+=4)o[c]=255-o[c],o[c+1]=255-o[c+1],o[c+2]=255-o[c+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,u){return{uInvert:a.getUniformLocation(u,"uInvert")}},sendUniformData:function(a,u){a.uniform1i(u.uInvert,this.invert)}}),f.Image.filters.Invert.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,h=f.Image.filters;h.Noise=(0,f.util.createClass)(h.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(u){if(0!==this.noise){var g,l,_,c=u.imageData.data,m=this.noise;for(g=0,l=c.length;g<l;g+=4)_=(.5-Math.random())*m,c[g]+=_,c[g+1]+=_,c[g+2]+=_}},getUniformLocations:function(u,o){return{uNoise:u.getUniformLocation(o,"uNoise"),uSeed:u.getUniformLocation(o,"uSeed")}},sendUniformData:function(u,o){u.uniform1f(o.uNoise,this.noise/255),u.uniform1f(o.uSeed,Math.random())},toObject:function(){return p(this.callSuper("toObject"),{noise:this.noise})}}),f.Image.filters.Noise.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Pixelate=(0,f.util.createClass)(p.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(a){var l,m,_,w,b,E,A,F,B,z,ie,u=a.imageData,o=u.data,c=u.height,g=u.width;for(m=0;m<c;m+=this.blocksize)for(_=0;_<g;_+=this.blocksize)for(w=o[l=4*m*g+4*_],b=o[l+1],E=o[l+2],A=o[l+3],z=Math.min(m+this.blocksize,c),ie=Math.min(_+this.blocksize,g),F=m;F<z;F++)for(B=_;B<ie;B++)o[l=4*F*g+4*B]=w,o[l+1]=b,o[l+2]=E,o[l+3]=A},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(a,u){return{uBlocksize:a.getUniformLocation(u,"uBlocksize"),uStepW:a.getUniformLocation(u,"uStepW"),uStepH:a.getUniformLocation(u,"uStepH")}},sendUniformData:function(a,u){a.uniform1f(u.uBlocksize,this.blocksize)}}),f.Image.filters.Pixelate.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.extend,h=f.Image.filters;h.RemoveColor=(0,f.util.createClass)(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(u){var g,m,_,w,c=u.imageData.data,l=255*this.distance,b=new f.Color(this.color).getSource(),E=[b[0]-l,b[1]-l,b[2]-l],A=[b[0]+l,b[1]+l,b[2]+l];for(g=0;g<c.length;g+=4)_=c[g+1],w=c[g+2],(m=c[g])>E[0]&&_>E[1]&&w>E[2]&&m<A[0]&&_<A[1]&&w<A[2]&&(c[g+3]=0)},getUniformLocations:function(u,o){return{uLow:u.getUniformLocation(o,"uLow"),uHigh:u.getUniformLocation(o,"uHigh")}},sendUniformData:function(u,o){var c=new f.Color(this.color).getSource(),g=parseFloat(this.distance),m=[c[0]/255+g,c[1]/255+g,c[2]/255+g,1];u.uniform4fv(o.uLow,[0+c[0]/255-g,0+c[1]/255-g,0+c[2]/255-g,1]),u.uniform4fv(o.uHigh,m)},toObject:function(){return p(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),f.Image.filters.RemoveColor.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters,h=f.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var u in a)p[u]=h(p.ColorMatrix,{type:u,matrix:a[u],mainParameter:!1,colorsOnly:!0}),f.Image.filters[u].fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric,p=f.Image.filters;p.BlendColor=(0,f.util.createClass)(p.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(a){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[a]+"}\n}"},retrieveShader:function(a){var o,u=this.type+"_"+this.mode;return a.programCache.hasOwnProperty(u)||(o=this.buildSource(this.mode),a.programCache[u]=this.createProgram(a.context,o)),a.programCache[u]},applyTo2d:function(a){var g,l,m,_,w,b,E,o=a.imageData.data,c=o.length,A=1-this.alpha;g=(E=new f.Color(this.color).getSource())[0]*this.alpha,l=E[1]*this.alpha,m=E[2]*this.alpha;for(var F=0;F<c;F+=4)switch(_=o[F],w=o[F+1],b=o[F+2],this.mode){case"multiply":o[F]=_*g/255,o[F+1]=w*l/255,o[F+2]=b*m/255;break;case"screen":o[F]=255-(255-_)*(255-g)/255,o[F+1]=255-(255-w)*(255-l)/255,o[F+2]=255-(255-b)*(255-m)/255;break;case"add":o[F]=_+g,o[F+1]=w+l,o[F+2]=b+m;break;case"diff":case"difference":o[F]=Math.abs(_-g),o[F+1]=Math.abs(w-l),o[F+2]=Math.abs(b-m);break;case"subtract":o[F]=_-g,o[F+1]=w-l,o[F+2]=b-m;break;case"darken":o[F]=Math.min(_,g),o[F+1]=Math.min(w,l),o[F+2]=Math.min(b,m);break;case"lighten":o[F]=Math.max(_,g),o[F+1]=Math.max(w,l),o[F+2]=Math.max(b,m);break;case"overlay":o[F]=g<128?2*_*g/255:255-2*(255-_)*(255-g)/255,o[F+1]=l<128?2*w*l/255:255-2*(255-w)*(255-l)/255,o[F+2]=m<128?2*b*m/255:255-2*(255-b)*(255-m)/255;break;case"exclusion":o[F]=g+_-2*g*_/255,o[F+1]=l+w-2*l*w/255,o[F+2]=m+b-2*m*b/255;break;case"tint":o[F]=g+_*A,o[F+1]=l+w*A,o[F+2]=m+b*A}},getUniformLocations:function(a,u){return{uColor:a.getUniformLocation(u,"uColor")}},sendUniformData:function(a,u){var o=new f.Color(this.color).getSource();o[0]=this.alpha*o[0]/255,o[1]=this.alpha*o[1]/255,o[2]=this.alpha*o[2]/255,o[3]=this.alpha,a.uniform4fv(u.uColor,o)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendColor.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric,p=f.Image.filters;p.BlendImage=(0,f.util.createClass)(p.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(a){var u=this.type+"_"+this.mode,o=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(u)||(a.programCache[u]=this.createProgram(a.context,o)),a.programCache[u]},applyToWebGL:function(a){var u=a.context,o=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(u,o,u.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(u,u.TEXTURE1)},createTexture:function(a,u){return a.getCachedTexture(u.cacheKey,u._element)},calculateMatrix:function(){var a=this.image;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/a._element.width,-a.top/a._element.height,1]},applyTo2d:function(a){var _,w,b,E,A,F,B,z,ie,ue,pe,u=a.imageData,o=a.filterBackend.resources,c=u.data,g=c.length,l=u.width,m=u.height,he=this.image;o.blendImage||(o.blendImage=f.util.createCanvasElement()),ue=(ie=o.blendImage).getContext("2d"),ie.width!==l||ie.height!==m?(ie.width=l,ie.height=m):ue.clearRect(0,0,l,m),ue.setTransform(he.scaleX,0,0,he.scaleY,he.left,he.top),ue.drawImage(he._element,0,0,l,m),pe=ue.getImageData(0,0,l,m).data;for(var ce=0;ce<g;ce+=4)switch(A=c[ce],F=c[ce+1],B=c[ce+2],z=c[ce+3],_=pe[ce],w=pe[ce+1],b=pe[ce+2],E=pe[ce+3],this.mode){case"multiply":c[ce]=A*_/255,c[ce+1]=F*w/255,c[ce+2]=B*b/255,c[ce+3]=z*E/255;break;case"mask":c[ce+3]=E}},getUniformLocations:function(a,u){return{uTransformMatrix:a.getUniformLocation(u,"uTransformMatrix"),uImage:a.getUniformLocation(u,"uImage")}},sendUniformData:function(a,u){var o=this.calculateMatrix();a.uniform1i(u.uImage,1),a.uniformMatrix3fv(u.uTransformMatrix,!1,o)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),f.Image.filters.BlendImage.fromObject=function(a,u){f.Image.fromObject(a.image,function(o){var c=f.util.object.clone(a);c.image=o,u(new f.Image.filters.BlendImage(c))})}}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=Math.pow,h=Math.floor,a=Math.sqrt,u=Math.abs,o=Math.round,c=Math.sin,g=Math.ceil,l=f.Image.filters;l.Resize=(0,f.util.createClass)(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,w){return{uDelta:_.getUniformLocation(w,"uDelta"),uTaps:_.getUniformLocation(w,"uTaps")}},sendUniformData:function(_,w){_.uniform2fv(w.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(w.uTaps,this.taps)},retrieveShader:function(_){var w=this.getFilterWindow(),b=this.type+"_"+w;if(!_.programCache.hasOwnProperty(b)){var E=this.generateShader(w);_.programCache[b]=this.createProgram(_.context,E)}return _.programCache[b]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),w=this.tempScale,b=this.getFilterWindow(),E=new Array(b),A=1;A<=b;A++)E[A-1]=_(A*w);return E},generateShader:function(E){for(var w=new Array(E),b=this.fragmentSourceTOP,A=1;A<=E;A++)w[A-1]=A+".0 * uDelta";return b+="uniform float uTaps["+E+"];\n",b+="void main() {\n",b+="  vec4 color = texture2D(uTexture, vTexCoord);\n",b+="  float sum = 1.0;\n",w.forEach(function(F,B){b+="  color += texture2D(uTexture, vTexCoord + "+F+") * uTaps["+B+"];\n",b+="  color += texture2D(uTexture, vTexCoord - "+F+") * uTaps["+B+"];\n",b+="  sum += 2.0 * uTaps["+B+"];\n"}),b+="  gl_FragColor = color / sum;\n",b+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(_){return function(w){if(w>=_||w<=-_)return 0;if(w<1.1920929e-7&&w>-1.1920929e-7)return 1;var b=(w*=Math.PI)/_;return c(w)/w*c(b)/b}},applyTo2d:function(_){var w=_.imageData,b=this.scaleX,E=this.scaleY;this.rcpScaleX=1/b,this.rcpScaleY=1/E;var ie,A=w.width,F=w.height,B=o(A*b),z=o(F*E);"sliceHack"===this.resizeType?ie=this.sliceByTwo(_,A,F,B,z):"hermite"===this.resizeType?ie=this.hermiteFastResize(_,A,F,B,z):"bilinear"===this.resizeType?ie=this.bilinearFiltering(_,A,F,B,z):"lanczos"===this.resizeType&&(ie=this.lanczosResize(_,A,F,B,z)),_.imageData=ie},sliceByTwo:function(_,w,b,E,A){var ce,fe,F=_.imageData,B=.5,z=!1,ie=!1,ue=w*B,he=b*B,pe=f.filterBackend.resources,xe=0,ve=0,Ce=w,M=0;for(pe.sliceByTwo||(pe.sliceByTwo=document.createElement("canvas")),((ce=pe.sliceByTwo).width<1.5*w||ce.height<b)&&(ce.width=1.5*w,ce.height=b),(fe=ce.getContext("2d")).clearRect(0,0,1.5*w,b),fe.putImageData(F,0,0),E=h(E),A=h(A);!z||!ie;)w=ue,b=he,E<h(ue*B)?ue=h(ue*B):(ue=E,z=!0),A<h(he*B)?he=h(he*B):(he=A,ie=!0),fe.drawImage(ce,xe,ve,w,b,Ce,M,ue,he),xe=Ce,ve=M,M+=he;return fe.getImageData(xe,ve,E,A)},lanczosResize:function(_,w,b,E,A){var B=_.imageData.data,z=_.ctx.createImageData(E,A),ie=z.data,ue=this.lanczosCreate(this.lanczosLobes),he=this.rcpScaleX,pe=this.rcpScaleY,ce=2/this.rcpScaleX,fe=2/this.rcpScaleY,xe=g(he*this.lanczosLobes/2),ve=g(pe*this.lanczosLobes/2),Ce={},M={},k={};return function F(L){var R,W,P,I,j,H,q,$,ne,oe,de;for(M.x=(L+.5)*he,k.x=h(M.x),R=0;R<A;R++){for(M.y=(R+.5)*pe,k.y=h(M.y),j=0,H=0,q=0,$=0,ne=0,W=k.x-xe;W<=k.x+xe;W++)if(!(W<0||W>=w)){oe=h(1e3*u(W-M.x)),Ce[oe]||(Ce[oe]={});for(var Y=k.y-ve;Y<=k.y+ve;Y++)Y<0||Y>=b||(de=h(1e3*u(Y-M.y)),Ce[oe][de]||(Ce[oe][de]=ue(a(p(oe*ce,2)+p(de*fe,2))/1e3)),(P=Ce[oe][de])>0&&(j+=P,H+=P*B[I=4*(Y*w+W)],q+=P*B[I+1],$+=P*B[I+2],ne+=P*B[I+3]))}ie[I=4*(R*E+L)]=H/j,ie[I+1]=q/j,ie[I+2]=$/j,ie[I+3]=ne/j}return++L<E?F(L):z}(0)},bilinearFiltering:function(_,w,b,E,A){var ue,he,pe,ce,fe,xe,ve,k,M=0,L=this.rcpScaleX,R=this.rcpScaleY,W=4*(w-1),I=_.imageData.data,j=_.ctx.createImageData(E,A),H=j.data;for(pe=0;pe<A;pe++)for(ce=0;ce<E;ce++)for(fe=L*ce-(ue=h(L*ce)),xe=R*pe-(he=h(R*pe)),k=4*(he*w+ue),ve=0;ve<4;ve++)H[M++]=I[k+ve]*(1-fe)*(1-xe)+I[k+4+ve]*fe*(1-xe)+I[k+W+ve]*xe*(1-fe)+I[k+W+4+ve]*fe*xe;return j},hermiteFastResize:function(_,w,b,E,A){for(var F=this.rcpScaleX,B=this.rcpScaleY,z=g(F/2),ie=g(B/2),he=_.imageData.data,pe=_.ctx.createImageData(E,A),ce=pe.data,fe=0;fe<A;fe++)for(var xe=0;xe<E;xe++){for(var ve=4*(xe+fe*E),Ce=0,M=0,k=0,L=0,R=0,W=0,P=0,I=(fe+.5)*B,j=h(fe*B);j<(fe+1)*B;j++)for(var H=u(I-(j+.5))/ie,q=(xe+.5)*F,$=H*H,ne=h(xe*F);ne<(xe+1)*F;ne++){var oe=u(q-(ne+.5))/z,de=a($+oe*oe);de>1&&de<-1||(Ce=2*de*de*de-3*de*de+1)>0&&(P+=Ce*he[3+(oe=4*(ne+j*w))],k+=Ce,he[oe+3]<255&&(Ce=Ce*he[oe+3]/250),L+=Ce*he[oe],R+=Ce*he[oe+1],W+=Ce*he[oe+2],M+=Ce)}ce[ve]=L/M,ce[ve+1]=R/M,ce[ve+2]=W/M,ce[ve+3]=P/k}return pe},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),f.Image.filters.Resize.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Contrast=(0,f.util.createClass)(p.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(0!==this.contrast){var o,c=a.imageData.data,g=c.length,l=Math.floor(255*this.contrast),m=259*(l+255)/(255*(259-l));for(o=0;o<g;o+=4)c[o]=m*(c[o]-128)+128,c[o+1]=m*(c[o+1]-128)+128,c[o+2]=m*(c[o+2]-128)+128}},getUniformLocations:function(a,u){return{uContrast:a.getUniformLocation(u,"uContrast")}},sendUniformData:function(a,u){a.uniform1f(u.uContrast,this.contrast)}}),f.Image.filters.Contrast.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Saturation=(0,f.util.createClass)(p.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(0!==this.saturation){var l,m,o=a.imageData.data,c=o.length,g=-this.saturation;for(l=0;l<c;l+=4)m=Math.max(o[l],o[l+1],o[l+2]),o[l]+=m!==o[l]?(m-o[l])*g:0,o[l+1]+=m!==o[l+1]?(m-o[l+1])*g:0,o[l+2]+=m!==o[l+2]?(m-o[l+2])*g:0}},getUniformLocations:function(a,u){return{uSaturation:a.getUniformLocation(u,"uSaturation")}},sendUniformData:function(a,u){a.uniform1f(u.uSaturation,-this.saturation)}}),f.Image.filters.Saturation.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Vibrance=(0,f.util.createClass)(p.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(0!==this.vibrance){var l,m,w,o=a.imageData.data,c=o.length,g=-this.vibrance;for(l=0;l<c;l+=4)m=Math.max(o[l],o[l+1],o[l+2]),w=2*Math.abs(m-(o[l]+o[l+1]+o[l+2])/3)/255*g,o[l]+=m!==o[l]?(m-o[l])*w:0,o[l+1]+=m!==o[l+1]?(m-o[l+1])*w:0,o[l+2]+=m!==o[l+2]?(m-o[l+2])*w:0}},getUniformLocations:function(a,u){return{uVibrance:a.getUniformLocation(u,"uVibrance")}},sendUniformData:function(a,u){a.uniform1f(u.uVibrance,-this.vibrance)}}),f.Image.filters.Vibrance.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Blur=(0,f.util.createClass)(p.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var o,c,u=a.filterBackend.resources,g=a.imageData.width,l=a.imageData.height;u.blurLayer1||(u.blurLayer1=f.util.createCanvasElement(),u.blurLayer2=f.util.createCanvasElement()),c=u.blurLayer2,((o=u.blurLayer1).width!==g||o.height!==l)&&(c.width=o.width=g,c.height=o.height=l);var b,E,A,F,m=o.getContext("2d"),_=c.getContext("2d"),w=15,B=.06*this.blur*.5;for(m.putImageData(a.imageData,0,0),_.clearRect(0,0,g,l),F=-w;F<=w;F++)A=B*(E=F/w)*g+(b=(Math.random()-.5)/4),_.globalAlpha=1-Math.abs(E),_.drawImage(o,A,b),m.drawImage(c,0,0),_.globalAlpha=1,_.clearRect(0,0,c.width,c.height);for(F=-w;F<=w;F++)A=B*(E=F/w)*l+(b=(Math.random()-.5)/4),_.globalAlpha=1-Math.abs(E),_.drawImage(o,b,A),m.drawImage(c,0,0),_.globalAlpha=1,_.clearRect(0,0,c.width,c.height);a.ctx.drawImage(o,0,0);var z=a.ctx.getImageData(0,0,o.width,o.height);return m.globalAlpha=1,m.clearRect(0,0,o.width,o.height),z},getUniformLocations:function(a,u){return{delta:a.getUniformLocation(u,"uDelta")}},sendUniformData:function(a,u){var o=this.chooseRightDelta();a.uniform2fv(u.delta,o)},chooseRightDelta:function(){var o,a=1,u=[0,0];return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),o=a*this.blur*.12,this.horizontal?u[0]=o:u[1]=o,u}}),p.Blur.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Gamma=(0,f.util.createClass)(p.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],p.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var w,o=a.imageData.data,c=this.gamma,g=o.length,l=1/c[0],m=1/c[1],_=1/c[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),w=0,g=256;w<g;w++)this.rVals[w]=255*Math.pow(w/255,l),this.gVals[w]=255*Math.pow(w/255,m),this.bVals[w]=255*Math.pow(w/255,_);for(w=0,g=o.length;w<g;w+=4)o[w]=this.rVals[o[w]],o[w+1]=this.gVals[o[w+1]],o[w+2]=this.bVals[o[w+2]]},getUniformLocations:function(a,u){return{uGamma:a.getUniformLocation(u,"uGamma")}},sendUniformData:function(a,u){a.uniform3fv(u.uGamma,this.gamma)}}),f.Image.filters.Gamma.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.Composed=(0,f.util.createClass)(p.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(u){u.applyTo(a)})},toObject:function(){return f.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),f.Image.filters.Composed.fromObject=function(a,u){var c=(a.subFilters||[]).map(function(l){return new f.Image.filters[l.type](l)}),g=new f.Image.filters.Composed({subFilters:c});return u&&u(g),g}}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.Image.filters;p.HueRotation=(0,f.util.createClass)(p.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,u=f.util.cos(a),o=f.util.sin(a),c=1/3,g=Math.sqrt(c)*o,l=1-u;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=u+l/3,this.matrix[1]=c*l-g,this.matrix[2]=c*l+g,this.matrix[5]=c*l+g,this.matrix[6]=u+c*l,this.matrix[7]=c*l-g,this.matrix[10]=c*l-g,this.matrix[11]=c*l+g,this.matrix[12]=u+c*l},isNeutralState:function(a){return this.calculateMatrix(),p.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),p.BaseFilter.prototype.applyTo.call(this,a)}}),f.Image.filters.HueRotation.fromObject=f.Image.filters.BaseFilter.fromObject}(Re),function(y){"use strict";var f=y.fabric||(y.fabric={}),p=f.util.object.clone;if(f.Text)f.warn("fabric.Text is already defined");else{var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");f.Text=f.util.createClass(f.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:f.Object.prototype.stateProperties.concat(h),cacheProperties:f.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,u){this.styles=u&&u.styles||{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",u),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=f.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return f._measuringContext||(f._measuringContext=this.canvas&&this.canvas.contextCache||f.util.createCanvasElement().getContext("2d")),f._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var a,u,c,g,l,m,_=0,w=this._textLines.length;_<w;_++)if(("justify"===this.textAlign||_!==w-1&&!this.isEndOfWrapping(_))&&(c=0,g=this._textLines[_],(u=this.getLineWidth(_))<this.width&&(m=this.textLines[_].match(this._reSpacesAndTabs)))){a=(this.width-u)/m.length;for(var b=0,E=g.length;b<=E;b++)l=this.__charBounds[_][b],this._reSpaceAndTab.test(g[b])?(l.width+=a,l.kernedWidth+=a,l.left+=c,c+=a):l.left+=c}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),u=this.fontSize;return a.width+=u*a.zoomX,a.height+=u*a.zoomY,a},_render:function(a){var u=this.path;u&&!u.isNotVisible()&&u._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){"stroke"===this.paintFirst?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,u,o){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom"}a.font=this._getFontDeclaration(u,o)},calcTextWidth:function(){for(var a=this.getLineWidth(0),u=1,o=this._textLines.length;u<o;u++){var c=this.getLineWidth(u);c>a&&(a=c)}return a},_renderTextLine:function(a,u,o,c,g,l){this._renderChars(a,u,o,c,g,l)},_renderTextLinesBackground:function(a){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var u,o,g,l,E,A,B,c=a.fillStyle,m=this._getLeftOffset(),_=this._getTopOffset(),w=0,b=0,F=this.path,z=0,ie=this._textLines.length;z<ie;z++)if(u=this.getHeightOfLine(z),this.textBackgroundColor||this.styleHas("textBackgroundColor",z)){g=this._textLines[z],o=this._getLineLeftOffset(z),b=0,w=0,l=this.getValueOfPropertyAt(z,0,"textBackgroundColor");for(var ue=0,he=g.length;ue<he;ue++)E=this.__charBounds[z][ue],A=this.getValueOfPropertyAt(z,ue,"textBackgroundColor"),F?(a.save(),a.translate(E.renderLeft,E.renderTop),a.rotate(E.angle),a.fillStyle=A,A&&a.fillRect(-E.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),E.width,u/this.lineHeight),a.restore()):A!==l?(B=m+o+w,"rtl"===this.direction&&(B=this.width-B-b),a.fillStyle=l,l&&a.fillRect(B,_,b,u/this.lineHeight),w=E.left,b=E.width,l=A):b+=E.kernedWidth;A&&!F&&(B=m+o+w,"rtl"===this.direction&&(B=this.width-B-b),a.fillStyle=A,a.fillRect(B,_,b,u/this.lineHeight)),_+=u}else _+=u;a.fillStyle=c,this._removeShadow(a)}},getFontCache:function(a){var u=a.fontFamily.toLowerCase();f.charWidthsCache[u]||(f.charWidthsCache[u]={});var o=f.charWidthsCache[u],c=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return o[c]||(o[c]={}),o[c]},_measureChar:function(a,u,o,c){var b,E,A,B,g=this.getFontCache(u),_=o+a,w=this._getFontDeclaration(u)===this._getFontDeclaration(c),F=u.fontSize/this.CACHE_FONT_SIZE;if(o&&void 0!==g[o]&&(A=g[o]),void 0!==g[a]&&(B=b=g[a]),w&&void 0!==g[_]&&(B=(E=g[_])-A),void 0===b||void 0===A||void 0===E){var z=this.getMeasuringContext();this._setTextStyles(z,u,!0)}return void 0===b&&(B=b=z.measureText(a).width,g[a]=b),void 0===A&&w&&o&&(A=z.measureText(o).width,g[o]=A),w&&void 0===E&&(E=z.measureText(_).width,g[_]=E,B=E-A),{width:b*F,kernedWidth:B*F}},getHeightOfChar:function(a,u){return this.getValueOfPropertyAt(a,u,"fontSize")},measureLine:function(a){var u=this._measureLine(a);return 0!==this.charSpacing&&(u.width-=this._getWidthOfCharSpacing()),u.width<0&&(u.width=0),u},_measureLine:function(a){var o,c,l,m,E,A,u=0,g=this._textLines[a],w=new Array(g.length),b=0,F=this.path,B="right"===this.pathSide;for(this.__charBounds[a]=w,o=0;o<g.length;o++)m=this._getGraphemeBox(c=g[o],a,o,l),w[o]=m,u+=m.kernedWidth,l=c;if(w[o]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},F){switch(A=F.segmentsInfo[F.segmentsInfo.length-1].length,(E=f.util.getPointOnPath(F.path,0,F.segmentsInfo)).x+=F.pathOffset.x,E.y+=F.pathOffset.y,this.textAlign){case"left":b=B?A-u:0;break;case"center":b=(A-u)/2;break;case"right":b=B?0:A-u}for(b+=this.pathStartOffset*(B?-1:1),o=B?g.length-1:0;B?o>=0:o<g.length;B?o--:o++)b>A?b%=A:b<0&&(b+=A),this._setGraphemeOnPath(b,m=w[o],E),b+=m.kernedWidth}return{width:u,numOfSpaces:0}},_setGraphemeOnPath:function(a,u,o){var g=this.path,l=f.util.getPointOnPath(g.path,a+u.kernedWidth/2,g.segmentsInfo);u.renderLeft=l.x-o.x,u.renderTop=l.y-o.y,u.angle=l.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(a,u,o,c,g){var E,l=this.getCompleteStyleDeclaration(u,o),m=c?this.getCompleteStyleDeclaration(u,o-1):{},_=this._measureChar(a,l,c,m),w=_.kernedWidth,b=_.width;0!==this.charSpacing&&(b+=E=this._getWidthOfCharSpacing(),w+=E);var A={width:b,left:0,height:l.fontSize,kernedWidth:w,deltaY:l.deltaY};if(o>0&&!g){var F=this.__charBounds[u][o-1];A.left=F.left+F.width+_.kernedWidth-_.width}return A},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var u=this._textLines[a],o=this.getHeightOfChar(a,0),c=1,g=u.length;c<g;c++)o=Math.max(this.getHeightOfChar(a,c),o);return this.__lineHeights[a]=o*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,u=0,o=0,c=this._textLines.length;o<c;o++)a=this.getHeightOfLine(o),u+=o===c-1?a/this.lineHeight:a;return u},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,u){a.save();for(var o=0,c=this._getLeftOffset(),g=this._getTopOffset(),l=0,m=this._textLines.length;l<m;l++){var _=this.getHeightOfLine(l),w=_/this.lineHeight,b=this._getLineLeftOffset(l);this._renderTextLine(u,a,this._textLines[l],c+b,g+o+w,l),o+=_}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||0===this.strokeWidth)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,u,o,c,g,l){var w,b,A,B,m=this.getHeightOfLine(l),_=-1!==this.textAlign.indexOf("justify"),E="",F=0,z=this.path,ie=!_&&0===this.charSpacing&&this.isEmptyStyles(l)&&!z,ue="ltr"===this.direction,he="ltr"===this.direction?1:-1,ce=u.canvas.getAttribute("dir");if(u.save(),ce!==this.direction&&(u.canvas.setAttribute("dir",ue?"ltr":"rtl"),u.direction=ue?"ltr":"rtl",u.textAlign=ue?"left":"right"),g-=m*this._fontSizeFraction/this.lineHeight,ie)return this._renderChar(a,u,l,0,o.join(""),c,g,m),void u.restore();for(var fe=0,xe=o.length-1;fe<=xe;fe++)B=fe===xe||this.charSpacing||z,E+=o[fe],A=this.__charBounds[l][fe],0===F?(c+=he*(A.kernedWidth-A.width),F+=A.width):F+=A.kernedWidth,_&&!B&&this._reSpaceAndTab.test(o[fe])&&(B=!0),B||(w=w||this.getCompleteStyleDeclaration(l,fe),b=this.getCompleteStyleDeclaration(l,fe+1),B=f.util.hasStyleChanged(w,b,!1)),B&&(z?(u.save(),u.translate(A.renderLeft,A.renderTop),u.rotate(A.angle),this._renderChar(a,u,l,fe,E,-F/2,0,m),u.restore()):this._renderChar(a,u,l,fe,E,c,g,m),E="",w=b,c+=he*F,F=0);u.restore()},_applyPatternGradientTransformText:function(a){var o,u=f.util.createCanvasElement(),c=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return u.width=c,u.height=g,(o=u.getContext("2d")).beginPath(),o.moveTo(0,0),o.lineTo(c,0),o.lineTo(c,g),o.lineTo(0,g),o.closePath(),o.translate(c/2,g/2),o.fillStyle=a.toLive(o),this._applyPatternGradientTransform(o,a),o.fill(),o.createPattern(u,"no-repeat")},handleFiller:function(a,u,o){var c,g;return o.toLive?"percentage"===o.gradientUnits||o.gradientTransform||o.patternTransform?(a.translate(c=-this.width/2,g=-this.height/2),a[u]=this._applyPatternGradientTransformText(o),{offsetX:c,offsetY:g}):(a[u]=o.toLive(a,this),this._applyPatternGradientTransform(a,o)):(a[u]=o,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,u){return a.lineWidth=u.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",u.stroke)},_setFillStyles:function(a,u){return this.handleFiller(a,"fillStyle",u.fill)},_renderChar:function(a,u,o,c,g,l,m){var A,F,_=this._getStyleDeclaration(o,c),w=this.getCompleteStyleDeclaration(o,c),b="fillText"===a&&w.fill,E="strokeText"===a&&w.stroke&&w.strokeWidth;!E&&!b||(u.save(),b&&(A=this._setFillStyles(u,w)),E&&(F=this._setStrokeStyles(u,w)),u.font=this._getFontDeclaration(w),_&&_.textBackgroundColor&&this._removeShadow(u),_&&_.deltaY&&(m+=_.deltaY),b&&u.fillText(g,l-A.offsetX,m-A.offsetY),E&&u.strokeText(g,l-F.offsetX,m-F.offsetY),u.restore())},setSuperscript:function(a,u){return this._setScript(a,u,this.superscript)},setSubscript:function(a,u){return this._setScript(a,u,this.subscript)},_setScript:function(a,u,o){var c=this.get2DCursorLocation(a,!0),g=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"fontSize"),l=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"deltaY");return this.setSelectionStyles({fontSize:g*o.size,deltaY:l+g*o.baseline},a,u),this},_getLineLeftOffset:function(a){var u=this.getLineWidth(a),o=this.width-u,c=this.textAlign,g=this.direction,l=0,m=this.isEndOfWrapping(a);return"justify"===c||"justify-center"===c&&!m||"justify-right"===c&&!m||"justify-left"===c&&!m?0:("center"===c&&(l=o/2),"right"===c&&(l=o),"justify-center"===c&&(l=o/2),"justify-right"===c&&(l=o),"rtl"===g&&(l-=o),l)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(void 0!==this.__lineWidths[a])return this.__lineWidths[a];var o=this.measureLine(a).width;return this.__lineWidths[a]=o,o},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,u,o){var c=this._getStyleDeclaration(a,u);return c&&typeof c[o]<"u"?c[o]:this[o]},_renderTextDecoration:function(a,u){if(this[u]||this.styleHas(u)){for(var o,c,g,l,m,_,w,b,F,B,z,ie,ue,he,pe,ce,E=this._getLeftOffset(),A=this._getTopOffset(),fe=this.path,xe=this._getWidthOfCharSpacing(),ve=this.offsets[u],Ce=0,M=this._textLines.length;Ce<M;Ce++)if(o=this.getHeightOfLine(Ce),this[u]||this.styleHas(u,Ce)){w=this._textLines[Ce],he=o/this.lineHeight,l=this._getLineLeftOffset(Ce),B=0,z=0,b=this.getValueOfPropertyAt(Ce,0,u),ce=this.getValueOfPropertyAt(Ce,0,"fill"),F=A+he*(1-this._fontSizeFraction),c=this.getHeightOfChar(Ce,0),m=this.getValueOfPropertyAt(Ce,0,"deltaY");for(var k=0,L=w.length;k<L;k++)if(ie=this.__charBounds[Ce][k],ue=this.getValueOfPropertyAt(Ce,k,u),pe=this.getValueOfPropertyAt(Ce,k,"fill"),g=this.getHeightOfChar(Ce,k),_=this.getValueOfPropertyAt(Ce,k,"deltaY"),fe&&ue&&pe)a.save(),a.fillStyle=ce,a.translate(ie.renderLeft,ie.renderTop),a.rotate(ie.angle),a.fillRect(-ie.kernedWidth/2,ve*g+_,ie.kernedWidth,this.fontSize/15),a.restore();else if((ue!==b||pe!==ce||g!==c||_!==m)&&z>0){var R=E+l+B;"rtl"===this.direction&&(R=this.width-R-z),b&&ce&&(a.fillStyle=ce,a.fillRect(R,F+ve*c+m,z,this.fontSize/15)),B=ie.left,z=ie.width,b=ue,ce=pe,c=g,m=_}else z+=ie.kernedWidth;R=E+l+B,"rtl"===this.direction&&(R=this.width-R-z),a.fillStyle=pe,ue&&pe&&a.fillRect(R,F+ve*c+m,z-xe,this.fontSize/15),A+=o}else A+=o;this._removeShadow(a)}},_getFontDeclaration:function(a,u){var o=a||this,c=this.fontFamily,g=f.Text.genericFonts.indexOf(c.toLowerCase())>-1,l=void 0===c||c.indexOf("'")>-1||c.indexOf(",")>-1||c.indexOf('"')>-1||g?o.fontFamily:'"'+o.fontFamily+'"';return[f.isLikelyNode?o.fontWeight:o.fontStyle,f.isLikelyNode?o.fontStyle:o.fontWeight,u?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",l].join(" ")},render:function(a){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a))},_splitTextIntoLines:function(a){for(var u=a.split(this._reNewline),o=new Array(u.length),c=["\n"],g=[],l=0;l<u.length;l++)o[l]=f.util.string.graphemeSplit(u[l]),g=g.concat(o[l],c);return g.pop(),{_unwrappedLines:o,lines:u,graphemeText:g,graphemeLines:o}},toObject:function(a){var u=h.concat(a),o=this.callSuper("toObject",u);return o.styles=f.util.stylesToArray(this.styles,this.text),o.path&&(o.path=this.path.toObject()),o},set:function(a,u){this.callSuper("set",a,u);var o=!1,c=!1;if("object"==typeof a)for(var g in a)"path"===g&&this.setPathInfo(),o=o||-1!==this._dimensionAffectingProps.indexOf(g),c=c||"path"===g;else o=-1!==this._dimensionAffectingProps.indexOf(a),c="path"===a;return c&&this.setPathInfo(),o&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),f.Text.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),f.Text.DEFAULT_SVG_FONT_SIZE=16,f.Text.fromElement=function(a,u,o){if(!a)return u(null);var c=f.parseAttributes(a,f.Text.ATTRIBUTE_NAMES),g=c.textAnchor||"left";if((o=f.util.object.extend(o?p(o):{},c)).top=o.top||0,o.left=o.left||0,c.textDecoration){var l=c.textDecoration;-1!==l.indexOf("underline")&&(o.underline=!0),-1!==l.indexOf("overline")&&(o.overline=!0),-1!==l.indexOf("line-through")&&(o.linethrough=!0),delete o.textDecoration}"dx"in c&&(o.left+=c.dx),"dy"in c&&(o.top+=c.dy),"fontSize"in o||(o.fontSize=f.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in a?m=a.textContent:"firstChild"in a&&null!==a.firstChild&&"data"in a.firstChild&&null!==a.firstChild.data&&(m=a.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=o.strokeWidth;o.strokeWidth=0;var w=new f.Text(m,o),b=w.getScaledHeight()/w.height,A=((w.height+w.strokeWidth)*w.lineHeight-w.height)*b,F=w.getScaledHeight()+A,B=0;"center"===g&&(B=w.getScaledWidth()/2),"right"===g&&(B=w.getScaledWidth()),w.set({left:w.left-B,top:w.top-(F-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:typeof _<"u"?_:1}),u(w)},f.Text.fromObject=function(a,u){var o=p(a),c=a.path;return delete o.path,f.Object._fromObject("Text",o,function(g){g.styles=f.util.stylesFromArray(a.styles,a.text),c?f.Object._fromObject("Path",c,function(l){g.set("path",l),u(g)},"path"):u(g)},"text")},f.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],f.util.createAccessors&&f.util.createAccessors(f.Text)}}(Re),C.util.object.extend(C.Text.prototype,{isEmptyStyles:function(y){if(!this.styles||typeof y<"u"&&!this.styles[y])return!0;var f=typeof y>"u"?this.styles:{line:this.styles[y]};for(var p in f)for(var h in f[p])for(var a in f[p][h])return!1;return!0},styleHas:function(y,f){if(!this.styles||!y||""===y||typeof f<"u"&&!this.styles[f])return!1;var p=typeof f>"u"?this.styles:{0:this.styles[f]};for(var h in p)for(var a in p[h])if(typeof p[h][a][y]<"u")return!0;return!1},cleanStyle:function(y){if(!this.styles||!y||""===y)return!1;var h,a,f=this.styles,p=0,u=!0,o=0;for(var g in f){for(var l in h=0,f[g]){var c;p++,(c=f[g][l]).hasOwnProperty(y)?(a?c[y]!==a&&(u=!1):a=c[y],c[y]===this[y]&&delete c[y]):u=!1,0!==Object.keys(c).length?h++:delete f[g][l]}0===h&&delete f[g]}for(var _=0;_<this._textLines.length;_++)o+=this._textLines[_].length;u&&p===o&&(this[y]=a,this.removeStyle(y))},removeStyle:function(y){if(this.styles&&y&&""!==y){var p,h,a,f=this.styles;for(h in f){for(a in p=f[h])delete p[a][y],0===Object.keys(p[a]).length&&delete p[a];0===Object.keys(p).length&&delete f[h]}}},_extendStyles:function(y,f){var p=this.get2DCursorLocation(y);this._getLineStyle(p.lineIndex)||this._setLineStyle(p.lineIndex),this._getStyleDeclaration(p.lineIndex,p.charIndex)||this._setStyleDeclaration(p.lineIndex,p.charIndex,{}),C.util.object.extend(this._getStyleDeclaration(p.lineIndex,p.charIndex),f)},get2DCursorLocation:function(y,f){typeof y>"u"&&(y=this.selectionStart);for(var p=f?this._unwrappedTextLines:this._textLines,h=p.length,a=0;a<h;a++){if(y<=p[a].length)return{lineIndex:a,charIndex:y};y-=p[a].length+this.missingNewlineOffset(a)}return{lineIndex:a-1,charIndex:p[a-1].length<y?p[a-1].length:y}},getSelectionStyles:function(y,f,p){typeof y>"u"&&(y=this.selectionStart||0),typeof f>"u"&&(f=this.selectionEnd||y);for(var h=[],a=y;a<f;a++)h.push(this.getStyleAtPosition(a,p));return h},getStyleAtPosition:function(y,f){var p=this.get2DCursorLocation(y);return(f?this.getCompleteStyleDeclaration(p.lineIndex,p.charIndex):this._getStyleDeclaration(p.lineIndex,p.charIndex))||{}},setSelectionStyles:function(y,f,p){typeof f>"u"&&(f=this.selectionStart||0),typeof p>"u"&&(p=this.selectionEnd||f);for(var h=f;h<p;h++)this._extendStyles(h,y);return this._forceClearCache=!0,this},_getStyleDeclaration:function(y,f){var p=this.styles&&this.styles[y];return p?p[f]:null},getCompleteStyleDeclaration:function(y,f){for(var a,p=this._getStyleDeclaration(y,f)||{},h={},u=0;u<this._styleProperties.length;u++)h[a=this._styleProperties[u]]=typeof p[a]>"u"?this[a]:p[a];return h},_setStyleDeclaration:function(y,f,p){this.styles[y][f]=p},_deleteStyleDeclaration:function(y,f){delete this.styles[y][f]},_getLineStyle:function(y){return!!this.styles[y]},_setLineStyle:function(y){this.styles[y]={}},_deleteLineStyle:function(y){delete this.styles[y]}}),function(){function y(f){f.textDecoration&&(f.textDecoration.indexOf("underline")>-1&&(f.underline=!0),f.textDecoration.indexOf("line-through")>-1&&(f.linethrough=!0),f.textDecoration.indexOf("overline")>-1&&(f.overline=!0),delete f.textDecoration)}C.IText=C.util.createClass(C.Text,C.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(f,p){this.callSuper("initialize",f,p),this.initBehavior()},setSelectionStart:function(f){f=Math.max(f,0),this._updateAndFire("selectionStart",f)},setSelectionEnd:function(f){f=Math.min(f,this.text.length),this._updateAndFire("selectionEnd",f)},_updateAndFire:function(f,p){this[f]!==p&&(this._fireSelectionChanged(),this[f]=p),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(f){this.clearContextTop(),this.callSuper("render",f),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(f){this.callSuper("_render",f)},clearContextTop:function(f){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var p=this.canvas.contextTop,h=this.canvas.viewportTransform;p.save(),p.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(p),this._clearTextArea(p),f||p.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var f=this._getCursorBoundaries(),p=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(f,p):this.renderSelection(f,p),p.restore()}},_clearTextArea:function(f){var p=this.width+4,h=this.height+4;f.clearRect(-p/2,-h/2,p,h)},_getCursorBoundaries:function(f){typeof f>"u"&&(f=this.selectionStart);var p=this._getLeftOffset(),h=this._getTopOffset(),a=this._getCursorBoundariesOffsets(f);return{left:p,top:h,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(f){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var p,h,a,c,u=0,o=0,g=this.get2DCursorLocation(f);a=g.charIndex,h=g.lineIndex;for(var l=0;l<h;l++)u+=this.getHeightOfLine(l);p=this._getLineLeftOffset(h);var m=this.__charBounds[h][a];return m&&(o=m.left),0!==this.charSpacing&&a===this._textLines[h].length&&(o-=this._getWidthOfCharSpacing()),c={top:u,left:p+(o>0?o:0)},"rtl"===this.direction&&(c.left*=-1),this.cursorOffsetCache=c,this.cursorOffsetCache},renderCursor:function(f,p){var h=this.get2DCursorLocation(),a=h.lineIndex,u=h.charIndex>0?h.charIndex-1:0,o=this.getValueOfPropertyAt(a,u,"fontSize"),c=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/c,l=f.topOffset,m=this.getValueOfPropertyAt(a,u,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(f,p),p.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,u,"fill"),p.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,p.fillRect(f.left+f.leftOffset-g/2,l+f.top+m,g,o)},renderSelection:function(f,p){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,u=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(h),c=this.get2DCursorLocation(a),g=o.lineIndex,l=c.lineIndex,m=o.charIndex<0?0:o.charIndex,_=c.charIndex<0?0:c.charIndex,w=g;w<=l;w++){var A,b=this._getLineLeftOffset(w)||0,E=this.getHeightOfLine(w),F=0,B=0;if(w===g&&(F=this.__charBounds[g][m].left),w>=g&&w<l)B=u&&!this.isEndOfWrapping(w)?this.width:this.getLineWidth(w)||5;else if(w===l)if(0===_)B=this.__charBounds[l][_].left;else{var z=this._getWidthOfCharSpacing();B=this.__charBounds[l][_-1].left+this.__charBounds[l][_-1].width-z}A=E,(this.lineHeight<1||w===l&&this.lineHeight>1)&&(E/=this.lineHeight);var ie=f.left+b+F,ue=B-F,he=E,pe=0;this.inCompositionMode?(p.fillStyle=this.compositionColor||"black",he=1,pe=E):p.fillStyle=this.selectionColor,"rtl"===this.direction&&(ie=this.width-ie-ue),p.fillRect(ie,f.top+f.topOffset+pe,ue,he),f.topOffset+=A}},getCurrentCharFontSize:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fontSize")},getCurrentCharColor:function(){var f=this._getCurrentCharIndex();return this.getValueOfPropertyAt(f.l,f.c,"fill")},_getCurrentCharIndex:function(){var f=this.get2DCursorLocation(this.selectionStart,!0);return{l:f.lineIndex,c:f.charIndex>0?f.charIndex-1:0}}}),C.IText.fromObject=function(f,p){var h=C.util.stylesFromArray(f.styles,f.text),a=Object.assign({},f,{styles:h});if(y(a),a.styles)for(var u in a.styles)for(var o in a.styles[u])y(a.styles[u][o]);C.Object._fromObject("IText",a,p,"text")}}(),function(){var y=C.util.object.clone;C.util.object.extend(C.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var f=this;this.on("added",function(){var p=f.canvas;p&&(p._hasITextHandlers||(p._hasITextHandlers=!0,f._initCanvasHandlers(p)),p._iTextInstances=p._iTextInstances||[],p._iTextInstances.push(f))})},initRemovedHandler:function(){var f=this;this.on("removed",function(){var p=f.canvas;p&&(p._iTextInstances=p._iTextInstances||[],C.util.removeFromArray(p._iTextInstances,f),0===p._iTextInstances.length&&(p._hasITextHandlers=!1,f._removeCanvasHandlers(p)))})},_initCanvasHandlers:function(f){f._mouseUpITextHandler=function(){f._iTextInstances&&f._iTextInstances.forEach(function(p){p.__isMousedown=!1})},f.on("mouse:up",f._mouseUpITextHandler)},_removeCanvasHandlers:function(f){f.off("mouse:up",f._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(f,p,h,a){var u;return u={isAborted:!1,abort:function(){this.isAborted=!0}},f.animate("_currentCursorOpacity",p,{duration:h,onComplete:function(){u.isAborted||f[a]()},onChange:function(){f.canvas&&f.selectionStart===f.selectionEnd&&f.renderCursorOrSelection()},abort:function(){return u.isAborted}}),u},_onTickComplete:function(){var f=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){f._currentTickCompleteState=f._animateCursor(f,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(f){var p=this,h=f?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){p._tick()},h)},abortCursorAnimation:function(){var f=this._currentTickState||this._currentTickCompleteState,p=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,f&&p&&p.clearContext(p.contextTop||p.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(f){var p=0,h=f-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)p++,h--;for(;/\S/.test(this._text[h])&&h>-1;)p++,h--;return f-p},findWordBoundaryRight:function(f){var p=0,h=f;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)p++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)p++,h++;return f+p},findLineBoundaryLeft:function(f){for(var p=0,h=f-1;!/\n/.test(this._text[h])&&h>-1;)p++,h--;return f-p},findLineBoundaryRight:function(f){for(var p=0,h=f;!/\n/.test(this._text[h])&&h<this._text.length;)p++,h++;return f+p},searchWordBoundary:function(f,p){for(var h=this._text,a=this._reSpace.test(h[f])?f-1:f,u=h[a],o=C.reNonWord;!o.test(u)&&a>0&&a<h.length;)u=h[a+=p];return o.test(u)&&(a+=1===p?0:1),a},selectWord:function(f){var p=this.searchWordBoundary(f=f||this.selectionStart,-1),h=this.searchWordBoundary(f,1);this.selectionStart=p,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(f){var p=this.findLineBoundaryLeft(f=f||this.selectionStart),h=this.findLineBoundaryRight(f);return this.selectionStart=p,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(f){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(f),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(f){f._iTextInstances&&f._iTextInstances.forEach(function(p){p.selected=!1,p.isEditing&&p.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(f){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var p=this.getSelectionStartFromPointer(f.e),h=this.selectionStart,a=this.selectionEnd;(p!==this.__selectionStartOnMouseDown||h===a)&&(h===p||a===p)||(p>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=p):(this.selectionStart=p,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(f,p,h){var a=h.slice(0,f),u=C.util.string.graphemeSplit(a).length;if(f===p)return{selectionStart:u,selectionEnd:u};var o=h.slice(f,p);return{selectionStart:u,selectionEnd:u+C.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(f,p,h){var u=h.slice(0,f).join("").length;return f===p?{selectionStart:u,selectionEnd:u}:{selectionStart:u,selectionEnd:u+h.slice(f,p).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var f=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=f.selectionStart,this.hiddenTextarea.selectionEnd=f.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=f.selectionEnd,this.inCompositionMode||(this.selectionStart=f.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var f=this._calcTextareaPosition();this.hiddenTextarea.style.left=f.left,this.hiddenTextarea.style.top=f.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var f=this.inCompositionMode?this.compositionStart:this.selectionStart,p=this._getCursorBoundaries(f),h=this.get2DCursorLocation(f),o=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize")*this.lineHeight,c=p.leftOffset,g=this.calcTransformMatrix(),l={x:p.left+c,y:p.top+p.topOffset+o},m=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,w=_.width/m,b=_.height/m,E=w-o,A=b-o,F=_.clientWidth/w,B=_.clientHeight/b;return l=C.util.transformPoint(l,g),(l=C.util.transformPoint(l,this.canvas.viewportTransform)).x*=F,l.y*=B,l.x<0&&(l.x=0),l.x>E&&(l.x=E),l.y<0&&(l.y=0),l.y>A&&(l.y=A),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var f=this._textBeforeEdit!==this.text,p=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,p&&(p.blur&&p.blur(),p.parentNode&&p.parentNode.removeChild(p)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),f&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),f&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var f in this.styles)this._textLines[f]||delete this.styles[f]},removeStyleFromTo:function(f,p){var l,m,h=this.get2DCursorLocation(f,!0),a=this.get2DCursorLocation(p,!0),u=h.lineIndex,o=h.charIndex,c=a.lineIndex,g=a.charIndex;if(u!==c){if(this.styles[u])for(l=o;l<this._unwrappedTextLines[u].length;l++)delete this.styles[u][l];if(this.styles[c])for(l=g;l<this._unwrappedTextLines[c].length;l++)(m=this.styles[c][l])&&(this.styles[u]||(this.styles[u]={}),this.styles[u][o+l-g]=m);for(l=u+1;l<=c;l++)delete this.styles[l];this.shiftLineStyles(c,u-c)}else if(this.styles[u]){m=this.styles[u];var w,b,_=g-o;for(l=o;l<g;l++)delete m[l];for(b in this.styles[u])(w=parseInt(b,10))>=g&&(m[w-_]=m[b],delete m[b])}},shiftLineStyles:function(f,p){var h=y(this.styles);for(var a in this.styles){var u=parseInt(a,10);u>f&&(this.styles[u+p]=h[u],h[u-p]||delete this.styles[u])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(f,p,h,a){var u,o={},c=!1,g=this._unwrappedTextLines[f].length===p;for(var l in h||(h=1),this.shiftLineStyles(f,h),this.styles[f]&&(u=this.styles[f][0===p?p:p-1]),this.styles[f]){var m=parseInt(l,10);m>=p&&(c=!0,o[m-p]=this.styles[f][l],g&&0===p||delete this.styles[f][l])}var _=!1;for(c&&!g&&(this.styles[f+h]=o,_=!0),_&&h--;h>0;)a&&a[h-1]?this.styles[f+h]={0:y(a[h-1])}:u?this.styles[f+h]={0:y(u)}:delete this.styles[f+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(f,p,h,a){this.styles||(this.styles={});var u=this.styles[f],o=u?y(u):{};for(var c in h||(h=1),o){var g=parseInt(c,10);g>=p&&(u[g+h]=o[g],o[g-h]||delete u[g])}if(this._forceClearCache=!0,a)for(;h--;)!Object.keys(a[h]).length||(this.styles[f]||(this.styles[f]={}),this.styles[f][p+h]=y(a[h]));else if(u)for(var l=u[p?p-1:1];l&&h--;)this.styles[f][p+h]=y(l)},insertNewStyleBlock:function(f,p,h){for(var a=this.get2DCursorLocation(p,!0),u=[0],o=0,c=0;c<f.length;c++)"\n"===f[c]?u[++o]=0:u[o]++;for(u[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,u[0],h),h=h&&h.slice(u[0]+1)),o&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+u[0],o),c=1;c<o;c++)u[c]>0?this.insertCharStyleObject(a.lineIndex+c,0,u[c],h):h&&this.styles[a.lineIndex+c]&&h[0]&&(this.styles[a.lineIndex+c][0]=h[0]),h=h&&h.slice(u[c]+1);u[c]>0&&this.insertCharStyleObject(a.lineIndex+c,0,u[c],h)},setSelectionStartEndWithShift:function(f,p,h){h<=f?(p===f?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=f),this.selectionStart=h):h>f&&h<p?"right"===this._selectionDirection?this.selectionEnd=h:this.selectionStart=h:(p===f?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=p),this.selectionEnd=h)},setSelectionInBoundaries:function(){var f=this.text.length;this.selectionStart>f?this.selectionStart=f:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>f?this.selectionEnd=f:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),C.util.object.extend(C.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(y){if(this.canvas){this.__newClickTime=+new Date;var f=y.pointer;this.isTripleClick(f)&&(this.fire("tripleclick",y),this._stopEvent(y.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=f,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(y){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===y.x&&this.__lastPointer.y===y.y},_stopEvent:function(y){y.preventDefault&&y.preventDefault(),y.stopPropagation&&y.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(y){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(y.e))},tripleClickHandler:function(y){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(y.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(y){!this.canvas||!this.editable||y.e.button&&1!==y.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(y.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(y){!this.canvas||!this.editable||y.e.button&&1!==y.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(y){if(this.__isMousedown=!1,!(!this.editable||this.group||y.transform&&y.transform.actionPerformed||y.e.button&&1!==y.e.button)){if(this.canvas){var f=this.canvas._activeObject;if(f&&f!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(y.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(y){var f=this.getSelectionStartFromPointer(y);y.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,f):(this.selectionStart=f,this.selectionEnd=f),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(y){for(var g,f=this.getLocalPointer(y),p=0,h=0,a=0,u=0,o=0,l=0,m=this._textLines.length;l<m&&a<=f.y;l++)a+=this.getHeightOfLine(l)*this.scaleY,o=l,l>0&&(u+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));h=this._getLineLeftOffset(o)*this.scaleX,g=this._textLines[o],"rtl"===this.direction&&(f.x=this.width*this.scaleX-f.x+h);for(var _=0,w=g.length;_<w&&(p=h,(h+=this.__charBounds[o][_].kernedWidth*this.scaleX)<=f.x);_++)u++;return this._getNewSelectionStartFromOffset(f,p,h,u,w)},_getNewSelectionStartFromOffset:function(y,f,p,h,a){var o=p-y.x,g=h+(o>y.x-f||o<0?0:1);return this.flipX&&(g=a-g),g>this._text.length&&(g=this._text.length),g}}),C.util.object.extend(C.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=C.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var y=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+y.top+"; left: "+y.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: "+y.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):C.document.body.appendChild(this.hiddenTextarea),C.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),C.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),C.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),C.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),C.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),C.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(C.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(y){if(this.isEditing){var f="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(y.keyCode in f)this[f[y.keyCode]](y);else{if(!(y.keyCode in this.ctrlKeysMapDown)||!y.ctrlKey&&!y.metaKey)return;this[this.ctrlKeysMapDown[y.keyCode]](y)}y.stopImmediatePropagation(),y.preventDefault(),y.keyCode>=33&&y.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(y){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:y.keyCode in this.ctrlKeysMapUp&&(y.ctrlKey||y.metaKey)&&(this[this.ctrlKeysMapUp[y.keyCode]](y),y.stopImmediatePropagation(),y.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(y){var f=this.fromPaste;if(this.fromPaste=!1,y&&y.stopPropagation(),this.isEditing){var u,o,_,w,b,p=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,a=p.length,c=a-h,g=this.selectionStart,l=this.selectionEnd,m=g!==l;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var E=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),A=g>E.selectionStart;m?(u=this._text.slice(g,l),c+=l-g):a<h&&(u=A?this._text.slice(l+c,l):this._text.slice(g,g-c)),o=p.slice(E.selectionEnd-c,E.selectionEnd),u&&u.length&&(o.length&&(_=this.getSelectionStyles(g,g+1,!1),_=o.map(function(){return _[0]})),m?(w=g,b=l):A?(w=l-u.length,b=l):(w=l,b=l+u.length),this.removeStyleFromTo(w,b)),o.length&&(f&&o.join("")===C.copiedText&&!C.disableStyleCopyPaste&&(_=C.copiedTextStyle),this.insertNewStyleBlock(o,g,_)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(y){this.compositionStart=y.target.selectionStart,this.compositionEnd=y.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(C.copiedText=this.getSelectedText(),C.copiedTextStyle=C.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(y){return y&&y.clipboardData||C.window.clipboardData},_getWidthBeforeCursor:function(y,f){var h,p=this._getLineLeftOffset(y);return f>0&&(p+=(h=this.__charBounds[y][f-1]).left+h.width),p},getDownCursorOffset:function(y,f){var p=this._getSelectionForOffset(y,f),h=this.get2DCursorLocation(p),a=h.lineIndex;if(a===this._textLines.length-1||y.metaKey||34===y.keyCode)return this._text.length-p;var u=h.charIndex,o=this._getWidthBeforeCursor(a,u),c=this._getIndexOnLine(a+1,o);return this._textLines[a].slice(u).length+c+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(y,f){return y.shiftKey&&this.selectionStart!==this.selectionEnd&&f?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(y,f){var p=this._getSelectionForOffset(y,f),h=this.get2DCursorLocation(p),a=h.lineIndex;if(0===a||y.metaKey||33===y.keyCode)return-p;var u=h.charIndex,o=this._getWidthBeforeCursor(a,u),c=this._getIndexOnLine(a-1,o),g=this._textLines[a].slice(0,u),l=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+c-g.length+(1-l)},_getIndexOnLine:function(y,f){for(var o,c,p=this._textLines[y],a=this._getLineLeftOffset(y),u=0,g=0,l=p.length;g<l;g++)if((a+=o=this.__charBounds[y][g].width)>f){c=!0;var _=a,w=Math.abs(a-o-f);u=Math.abs(_-f)<w?g:g-1;break}return c||(u=p.length-1),u},moveCursorDown:function(y){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",y)},moveCursorUp:function(y){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",y)},_moveCursorUpOrDown:function(y,f){var h=this["get"+y+"CursorOffset"](f,"right"===this._selectionDirection);f.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),0!==h&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(y){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+y:this.selectionEnd+y),0!==y},moveCursorWithoutShift:function(y){return y<0?(this.selectionStart+=y,this.selectionEnd=this.selectionStart):(this.selectionEnd+=y,this.selectionStart=this.selectionEnd),0!==y},moveCursorLeft:function(y){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",y)},_move:function(y,f,p){var h;if(y.altKey)h=this["findWordBoundary"+p](this[f]);else{if(!y.metaKey&&35!==y.keyCode&&36!==y.keyCode)return this[f]+="Left"===p?-1:1,!0;h=this["findLineBoundary"+p](this[f])}if(typeof h<"u"&&this[f]!==h)return this[f]=h,!0},_moveLeft:function(y,f){return this._move(y,f,"Left")},_moveRight:function(y,f){return this._move(y,f,"Right")},moveCursorLeftWithoutShift:function(y){var f=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(f=this._moveLeft(y,"selectionStart")),this.selectionEnd=this.selectionStart,f},moveCursorLeftWithShift:function(y){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(y,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(y,"selectionStart")):void 0},moveCursorRight:function(y){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",y)},_moveCursorLeftOrRight:function(y,f){var p="moveCursor"+y+"With";this._currentCursorOpacity=1,this[p+=f.shiftKey?"Shift":"outShift"](f)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(y){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(y,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(y,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(y){var f=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(f=this._moveRight(y,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,f},removeChars:function(y,f){typeof f>"u"&&(f=y+1),this.removeStyleFromTo(y,f),this._text.splice(y,f-y),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(y,f,p,h){typeof h>"u"&&(h=p),h>p&&this.removeStyleFromTo(p,h);var a=C.util.string.graphemeSplit(y);this.insertNewStyleBlock(a,p,f),this._text=[].concat(this._text.slice(0,p),a,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var y=C.util.toFixed,f=/  +/g;C.util.object.extend(C.Text.prototype,{_toSVG:function(){var p=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(p.textTop,p.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(p){return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(p){var a=this.getSvgTextDecoration(this);return[p.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",a?'text-decoration="'+a+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",p.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(p,h){var c,a=[],u=[],o=p;this._setSVGBg(u);for(var g=0,l=this._textLines.length;g<l;g++)c=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(u,g,h+c,o),this._setSVGTextLineText(a,g,h+c,o),o+=this.getHeightOfLine(g);return{textSpans:a,textBgRects:u}},_createTextCharSpan:function(p,h,a,u){var o=p!==p.trim()||p.match(f),c=this.getSvgSpanStyles(h,o),g=c?'style="'+c+'"':"",l=h.deltaY,m="",_=C.Object.NUM_FRACTION_DIGITS;return l&&(m=' dy="'+y(l,_)+'" '),['<tspan x="',y(a,_),'" y="',y(u,_),'" ',m,g,">",C.util.string.escapeXml(p),"</tspan>"].join("")},_setSVGTextLineText:function(p,h,a,u){var g,l,_,w,A,o=this.getHeightOfLine(h),c=-1!==this.textAlign.indexOf("justify"),m="",b=0,E=this._textLines[h];u+=o*(1-this._fontSizeFraction)/this.lineHeight;for(var F=0,B=E.length-1;F<=B;F++)A=F===B||this.charSpacing,m+=E[F],_=this.__charBounds[h][F],0===b?(a+=_.kernedWidth-_.width,b+=_.width):b+=_.kernedWidth,c&&!A&&this._reSpaceAndTab.test(E[F])&&(A=!0),A||(g=g||this.getCompleteStyleDeclaration(h,F),l=this.getCompleteStyleDeclaration(h,F+1),A=C.util.hasStyleChanged(g,l,!0)),A&&(w=this._getStyleDeclaration(h,F)||{},p.push(this._createTextCharSpan(m,w,a,u)),m="",g=l,a+=b,b=0)},_pushTextBgRect:function(p,h,a,u,o,c){var g=C.Object.NUM_FRACTION_DIGITS;p.push("\t\t<rect ",this._getFillAttributes(h),' x="',y(a,g),'" y="',y(u,g),'" width="',y(o,g),'" height="',y(c,g),'"></rect>\n')},_setSVGTextLineBg:function(p,h,a,u){for(var m,_,o=this._textLines[h],c=this.getHeightOfLine(h)/this.lineHeight,g=0,l=0,w=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),b=0,E=o.length;b<E;b++)m=this.__charBounds[h][b],(_=this.getValueOfPropertyAt(h,b,"textBackgroundColor"))!==w?(w&&this._pushTextBgRect(p,w,a+l,u,g,c),l=m.left,g=m.width,w=_):g+=m.kernedWidth;_&&this._pushTextBgRect(p,_,a+l,u,g,c)},_getFillAttributes:function(p){var h=p&&"string"==typeof p?new C.Color(p):"";return h&&h.getSource()&&1!==h.getAlpha()?'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"':'fill="'+p+'"'},_getSVGLineTopOffset:function(p){for(var a,h=0,u=0;u<p;u++)h+=this.getHeightOfLine(u);return a=this.getHeightOfLine(u),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*a/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(p){return C.Object.prototype.getSvgStyles.call(this,p)+" white-space: pre;"}})}(),function(y){"use strict";var f=y.fabric||(y.fabric={});f.Textbox=f.util.createClass(f.IText,f.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:f.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(p){for(var h=0,a=0,u=0,o={},c=0;c<p.graphemeLines.length;c++)"\n"===p.graphemeText[u]&&c>0?(a=0,u++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(p.graphemeText[u])&&c>0&&(a++,u++),o[c]={line:h,offset:a},u+=p.graphemeLines[c].length,a+=p.graphemeLines[c].length;return o},styleHas:function(p,h){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[h];a&&(h=a.line)}return f.Text.prototype.styleHas.call(this,p,h)},isEmptyStyles:function(p){if(!this.styles)return!0;var u,o,h=0,c=!1,g=this._styleMap[p],l=this._styleMap[p+1];for(var m in g&&(p=g.line,h=g.offset),l&&(c=l.line===p,u=l.offset),o=typeof p>"u"?this.styles:{line:this.styles[p]})for(var _ in o[m])if(_>=h&&(!c||_<u))for(var w in o[m][_])return!1;return!0},_getStyleDeclaration:function(p,h){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[p];if(!a)return null;p=a.line,h=a.offset+h}return this.callSuper("_getStyleDeclaration",p,h)},_setStyleDeclaration:function(p,h,a){var u=this._styleMap[p];this.styles[p=u.line][h=u.offset+h]=a},_deleteStyleDeclaration:function(p,h){var a=this._styleMap[p];delete this.styles[p=a.line][h=a.offset+h]},_getLineStyle:function(p){return!!this.styles[this._styleMap[p].line]},_setLineStyle:function(p){this.styles[this._styleMap[p].line]={}},_wrapText:function(p,h){var u,a=[];for(this.isWrapping=!0,u=0;u<p.length;u++)a=a.concat(this._wrapLine(p[u],u,h));return this.isWrapping=!1,a},_measureWord:function(p,h,a){var o,u=0;a=a||0;for(var g=0,l=p.length;g<l;g++)u+=this._getGraphemeBox(p[g],h,g+a,o,!0).kernedWidth,o=p[g];return u},_wrapLine:function(p,h,a,ie){var o=0,c=this.splitByGrapheme,g=[],l=[],m=c?f.util.string.graphemeSplit(p):p.split(this._wordJoiners),_="",w=0,b=c?"":" ",E=0,A=0,F=0,B=!0,z=this._getWidthOfCharSpacing();ie=ie||0,0===m.length&&m.push([]),a-=ie;for(var ue=0;ue<m.length;ue++)_=c?m[ue]:f.util.string.graphemeSplit(m[ue]),E=this._measureWord(_,h,w),w+=_.length,(o+=A+E-z)>a&&!B?(g.push(l),l=[],o=E,B=!0):o+=z,!B&&!c&&l.push(b),l=l.concat(_),A=c?0:this._measureWord([b],h,w),w++,B=!1,E>F&&(F=E);return ue&&g.push(l),F+ie>this.dynamicMinWidth&&(this.dynamicMinWidth=F-z+ie),g},isEndOfWrapping:function(p){return!this._styleMap[p+1]||this._styleMap[p+1].line!==this._styleMap[p].line},missingNewlineOffset:function(p){return this.splitByGrapheme?this.isEndOfWrapping(p)?1:0:1},_splitTextIntoLines:function(p){for(var h=f.Text.prototype._splitTextIntoLines.call(this,p),a=this._wrapText(h.lines,this.width),u=new Array(a.length),o=0;o<a.length;o++)u[o]=a[o].join("");return h.lines=u,h.graphemeLines=a,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var p={};for(var h in this._styleMap)this._textLines[h]&&(p[this._styleMap[h].line]=1);for(var h in this.styles)p[h]||delete this.styles[h]},toObject:function(p){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(p))}}),f.Textbox.fromObject=function(p,h){var a=f.util.stylesFromArray(p.styles,p.text),u=Object.assign({},p,{styles:a});return f.Object._fromObject("Textbox",u,h,"text")}}(Re),function(){var y=C.controlsUtils,f=y.scaleSkewCursorStyleHandler,p=y.scaleCursorStyleHandler,h=y.scalingEqually,a=y.scalingYOrSkewingX,u=y.scalingXOrSkewingY,o=y.scaleOrSkewActionName,c=C.Object.prototype.controls;if(c.ml=new C.Control({x:-.5,y:0,cursorStyleHandler:f,actionHandler:u,getActionName:o}),c.mr=new C.Control({x:.5,y:0,cursorStyleHandler:f,actionHandler:u,getActionName:o}),c.mb=new C.Control({x:0,y:.5,cursorStyleHandler:f,actionHandler:a,getActionName:o}),c.mt=new C.Control({x:0,y:-.5,cursorStyleHandler:f,actionHandler:a,getActionName:o}),c.tl=new C.Control({x:-.5,y:-.5,cursorStyleHandler:p,actionHandler:h}),c.tr=new C.Control({x:.5,y:-.5,cursorStyleHandler:p,actionHandler:h}),c.bl=new C.Control({x:-.5,y:.5,cursorStyleHandler:p,actionHandler:h}),c.br=new C.Control({x:.5,y:.5,cursorStyleHandler:p,actionHandler:h}),c.mtr=new C.Control({x:0,y:-.5,actionHandler:y.rotationWithSnapping,cursorStyleHandler:y.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),C.Textbox){var g=C.Textbox.prototype.controls={};g.mtr=c.mtr,g.tr=c.tr,g.br=c.br,g.tl=c.tl,g.bl=c.bl,g.mt=c.mt,g.mb=c.mb,g.mr=new C.Control({x:.5,y:0,actionHandler:y.changeWidth,cursorStyleHandler:f,actionName:"resizing"}),g.ml=new C.Control({x:-.5,y:0,actionHandler:y.changeWidth,cursorStyleHandler:f,actionName:"resizing"})}}()},960:()=>{},759:()=>{},272:()=>{}},Ts=>{Ts(Ts.s=472)}]);